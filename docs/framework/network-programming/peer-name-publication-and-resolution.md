---
title: Publicación y resolución de nombres del mismo nivel
ms.date: 03/30/2017
ms.assetid: f0370e08-9fa6-4ee5-ab78-9a58a20a7da2
ms.openlocfilehash: 4a0787972a61f5700d1e8728be96db8ef9ee749e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/15/2020
ms.locfileid: "64623198"
---
# <a name="peer-name-publication-and-resolution"></a><span data-ttu-id="f2f5f-102">Publicación y resolución de nombres del mismo nivel</span><span class="sxs-lookup"><span data-stu-id="f2f5f-102">Peer Name Publication and Resolution</span></span>

## <a name="publishing-a-peer-name"></a><span data-ttu-id="f2f5f-103">Publicación de un nombre del mismo nivel</span><span class="sxs-lookup"><span data-stu-id="f2f5f-103">Publishing a peer name</span></span>  

 <span data-ttu-id="f2f5f-104">Para publicar un nuevo identificador PNRP, un elemento de mismo nivel realiza lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f2f5f-104">To publish a new PNRP ID, a peer performs the following:</span></span>  
  
- <span data-ttu-id="f2f5f-105">Envía mensajes de publicación de PNRP a sus vecinos de caché (los elementos de mismo nivel que han registrado identificadores PNRP en el nivel más bajo de la memoria caché) para inicializar sus cachés.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-105">Sends PNRP publication messages to its cache neighbors (the peers that have registered PNRP IDs in the lowest level of the cache) to seed their caches.</span></span>  
  
- <span data-ttu-id="f2f5f-106">Elige nodos aleatorios en la nube que no son sus vecinos y les envía solicitudes de resolución de nombres de PNRP para su propio identificador P2P.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-106">Chooses random nodes in the cloud that are not its neighbors and sends them PNRP name resolution requests for its own P2P ID.</span></span> <span data-ttu-id="f2f5f-107">El proceso de determinación del punto de conexión resultante inicializa las memorias caché de los nodos aleatorios en la nube con el identificador PNRP del elemento de mismo nivel de publicación.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-107">The resulting endpoint determination process seeds the caches of random nodes in the cloud with the PNRP ID of the publishing peer.</span></span>  
  
<span data-ttu-id="f2f5f-108">Los nodos de la versión 2 de PNRP no publican identificadores PNRP si solo resuelven otros identificadores de P2P.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-108">PNRP version 2 nodes do not publish PNRP IDs if they are only resolving other P2P IDs.</span></span> <span data-ttu-id="f2f5f-109">El valor del Registro HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 (tipo REG_DWORD) especifica que los elementos de mismo nivel solo usen PNRP para la resolución de nombres, nunca para la publicación de nombres.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-109">The HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 registry value (REG_DWORD type) specifies that peers only use PNRP for name resolution, never for name publication.</span></span> <span data-ttu-id="f2f5f-110">Este valor del Registro también se puede configurar mediante Directiva de grupo.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-110">This registry value can also be configured through Group Policy.</span></span>  
  
## <a name="resolving-a-peer-name"></a><span data-ttu-id="f2f5f-111">Resolución de un nombre del mismo nivel</span><span class="sxs-lookup"><span data-stu-id="f2f5f-111">Resolving a peer name</span></span>

 <span data-ttu-id="f2f5f-112">La búsqueda de otros elementos de mismo nivel en una red de PNRP o en la nube es un proceso que consta de dos fases:</span><span class="sxs-lookup"><span data-stu-id="f2f5f-112">Locating other peers in a PNRP network or cloud is a process comprised of two phases:</span></span>  
  
1. <span data-ttu-id="f2f5f-113">Determinación del punto de conexión</span><span class="sxs-lookup"><span data-stu-id="f2f5f-113">Endpoint Determination</span></span>  
  
2. <span data-ttu-id="f2f5f-114">Resolución de identificadores PNRP</span><span class="sxs-lookup"><span data-stu-id="f2f5f-114">PNRP ID Resolution</span></span>  
  
 <span data-ttu-id="f2f5f-115">En la fase de determinación del punto de conexión, un equipo de mismo nivel que está intentando resolver el identificador PNRP de un servicio en otro equipo determina la dirección IPv6 de ese equipo remoto de mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-115">In the endpoint determination phase, a peer that is attempting to resolve the PNRP ID of a service on another computer determines the IPv6 address of that remote peer.</span></span>  <span data-ttu-id="f2f5f-116">El equipo remoto de mismo nivel es el que publica o está asociado con el identificador PNRP del equipo o servicio.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-116">The remote peer is the one that published, or is associated with, the PNRP ID of the computer or service.</span></span>  
  
 <span data-ttu-id="f2f5f-117">Después de confirmar que el punto de conexión remoto se ha registrado en la nube PNRP, el equipo de mismo nivel que realiza la solicitud en la fase de resolución de identificadores PNRP envía una solicitud a ese punto de conexión de mismo nivel para requerir el identificador PNRP del servicio deseado.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-117">After confirming that the remote endpoint has been registered into the PNRP cloud, the requesting peer in the PNRP ID resolution phase sends a request to that peer endpoint for the PNRP ID of the desired service.</span></span> <span data-ttu-id="f2f5f-118">El punto de conexión envía una respuesta que confirma el identificador PNRP del servicio, un comentario y hasta 4 kilobytes de información adicional que el equipo de mismo nivel que realiza la solicitud puede usar para la comunicación posterior.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-118">The endpoint sends a reply confirming the PNRP ID of the service, a comment, and up to 4 kilobytes of additional information that the requesting peer can use for future communication.</span></span> <span data-ttu-id="f2f5f-119">Por ejemplo, si el punto de conexión deseado es un servidor de juegos, los datos adicionales del registro de nombre de mismo nivel pueden contener información sobre el juego, el nivel de juego y el número actual de jugadores.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-119">For example, if the desired endpoint is a gaming server, the additional peer name record data can contain information about the game, the level of play, and the current number of players.</span></span>  
  
 <span data-ttu-id="f2f5f-120">En la fase de determinación de punto de conexión, PNRP usa un proceso iterativo para buscar el nodo que publicó el identificador PNRP, en el que el nodo que realiza la resolución es responsable de ponerse en contacto con los nodos que están más cercanos consecutivamente al identificador PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-120">In the endpoint determination phase, PNRP uses an iterative process for locating the node that published the PNRP ID, in which the node performing the resolution is responsible for contacting nodes that are successively closer to the target PNRP ID.</span></span>  
  
 <span data-ttu-id="f2f5f-121">Para realizar la resolución de nombres en PNRP, el equipo de mismo nivel examina las entradas en su propia memoria caché para buscar una que coincida con el identificador PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-121">To perform name resolution in PNRP, the peer examines the entries in its own cache for an entry that matches the target PNRP ID.</span></span> <span data-ttu-id="f2f5f-122">Si se encuentra, el equipo de mismo nivel envía un mensaje de solicitud de PNRP y espera una respuesta.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-122">If found, the peer sends a PNRP Request message to the peer and waits for a response.</span></span> <span data-ttu-id="f2f5f-123">Si no se encuentra una entrada para el identificador PNRP, el equipo de mismo nivel envía un mensaje de solicitud PNRP al equipo de mismo nivel que se corresponde a la entrada que tiene un identificador PNRP que mejor coincida con el identificador PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-123">If an entry for the PNRP ID is not found, the peer sends a PNRP Request message to the peer that corresponds to the entry that has a PNRP ID that most closely matches the target PNRP ID.</span></span> <span data-ttu-id="f2f5f-124">El nodo que recibe el mensaje de solicitud de PNRP examina su propia memoria caché y realiza las acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="f2f5f-124">The node that receives the PNRP Request message examines its own cache and does the following:</span></span>  
  
- <span data-ttu-id="f2f5f-125">Si se encuentra el identificador PNRP, el punto de conexión de mismo nivel solicitado responde directamente al equipo de mismo nivel que realizó la solicitud.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-125">If the PNRP ID is found, the requested endpoint peer replies directly to the requesting peer.</span></span>  
  
- <span data-ttu-id="f2f5f-126">Si no se encuentra el identificador PNRP y un identificador PNRP de la memoria caché está más próximo al identificador PNRP de destino, el equipo de mismo nivel receptor de la solicitud envía una respuesta al emisor de la solicitud que contiene la dirección IPv6 del equipo de mismo nivel que representa la entrada con un identificador PNRP que mejor coincida con el identificador PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-126">If the PNRP ID is not found and a PNRP ID in the cache is closer to the target PNRP ID, the requested peer sends a response to the requesting peer containing the IPv6 address of the peer that represents the entry with a PNRP ID that more closely matches the target PNRP ID.</span></span> <span data-ttu-id="f2f5f-127">Con la dirección IP en la respuesta, el nodo solicitante envía otro mensaje de solicitud de PNRP a la dirección IPv6 para responder o examinar su caché.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-127">Using the IP address in the response, the requesting node sends another PNRP Request message to the IPv6 address to respond or examine its cache.</span></span>  
  
- <span data-ttu-id="f2f5f-128">Si no se encuentra el identificador PNRP y no hay ningún identificador PNRP en su memoria caché que se aproxime más al identificador PNRP de destino, el equipo de mismo nivel al que se realiza la solicitud envía al equipo solicitante una respuesta que indica esta condición.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-128">If the PNRP ID is not found and there is no PNRP ID in its cache that is closer to the target PNRP ID, the requested peer sends the requesting peer a response that indicates this condition.</span></span> <span data-ttu-id="f2f5f-129">Después, el equipo de mismo nivel solicitante elige el identificador PNRP más cercano siguiente.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-129">The requesting peer then chooses the next-closest PNRP ID.</span></span>  
  
<span data-ttu-id="f2f5f-130">El equipo de mismo nivel solicitante continúa con iteraciones sucesivas, hasta localizar el nodo que registró el identificador PNRP.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-130">The requesting peer continues this process with successive iterations, eventually locating the node that registered the PNRP ID.</span></span>  
  
 <span data-ttu-id="f2f5f-131">En el espacio de nombres <xref:System.Net.PeerToPeer>, hay una relación de varios a varios entre los registros <xref:System.Net.PeerToPeer.PeerName> que contienen puntos de conexión y nubes PNRP o mallas en las que se comunican.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-131">Within the <xref:System.Net.PeerToPeer> namespace, there is a many-to-many relationship between the <xref:System.Net.PeerToPeer.PeerName> records that contain endpoints and PNRP clouds or meshes in which they communicate.</span></span> <span data-ttu-id="f2f5f-132">Cuando hay entradas duplicadas u obsoletas, o varios nodos con el mismo nombre de mismo nivel, los nodos PNRP pueden obtener información actual mediante la clase <xref:System.Net.PeerToPeer.PeerNameResolver>.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-132">When there are duplicate or stale entries, or multiple nodes with the same peer name, PNRP nodes can obtain current information using the <xref:System.Net.PeerToPeer.PeerNameResolver> class.</span></span> <span data-ttu-id="f2f5f-133">Los métodos <xref:System.Net.PeerToPeer.PeerNameResolver> usan un nombre de mismo nivel único para simplificar la perspectiva a registros de nombre de mismo nivel de uno a varios y del mismo equipo de mismo nivel a varias nubes.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-133">The <xref:System.Net.PeerToPeer.PeerNameResolver> methods use a single peer name to simplify the perspective to one peer-to-many peer name records and the same one peer to many clouds.</span></span> <span data-ttu-id="f2f5f-134">Esto es similar a una consulta realizada con una combinación de tabla relacional.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-134">This is similar to a query performed using a relational-table join.</span></span> <span data-ttu-id="f2f5f-135">Tras completarse correctamente, el objeto de resolución devuelve una <xref:System.Net.PeerToPeer.PeerNameRecordCollection> para el nombre de mismo nivel especificado.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-135">Upon successful completion, the Resolver object returns a <xref:System.Net.PeerToPeer.PeerNameRecordCollection> for the specified peer name.</span></span>  <span data-ttu-id="f2f5f-136">Por ejemplo, un nombre de mismo nivel se produciría en todos los registros de nombre de mismo nivel en la colección, ordenados por nube.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-136">For example, a peer name would occur in all the peer name records in the collection, ordered by cloud.</span></span> <span data-ttu-id="f2f5f-137">Estas son las instancias del nombre de mismo nivel cuyos datos auxiliares se pueden solicitar mediante una aplicación basada en PNRP.</span><span class="sxs-lookup"><span data-stu-id="f2f5f-137">These are the instances of the peer name whose supporting data may be requested by a PNRP-based application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f2f5f-138">Vea también</span><span class="sxs-lookup"><span data-stu-id="f2f5f-138">See also</span></span>

- <xref:System.Net.PeerToPeer>
