---
title: Formato de texto avanzado
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- formatting [WPF]
- text [WPF]
- typography [WPF], text formatting
ms.assetid: f0a7986e-f5b2-485c-a27d-f8e922022212
ms.openlocfilehash: 745d20e0bd4f877f9d4559f9fc7829b56689d35c
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185944"
---
# <a name="advanced-text-formatting"></a><span data-ttu-id="aa350-102">Formato de texto avanzado</span><span class="sxs-lookup"><span data-stu-id="aa350-102">Advanced Text Formatting</span></span>
<span data-ttu-id="aa350-103">Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF) proporciona un sólido conjunto de API para incluir texto en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa350-103">Windows Presentation Foundation (WPF) provides a robust set of APIs for including text in your application.</span></span> <span data-ttu-id="aa350-104">El [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] diseño y las <xref:System.Windows.Controls.TextBlock>API, como , proporcionan los elementos más comunes y de uso general para la presentación de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-104">Layout and [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] APIs, such as <xref:System.Windows.Controls.TextBlock>, provide the most common and general-use elements for text presentation.</span></span> <span data-ttu-id="aa350-105">Las API de <xref:System.Windows.Media.GlyphRunDrawing> dibujo, como y <xref:System.Windows.Media.FormattedText>, proporcionan un medio para incluir texto con formato en dibujos.</span><span class="sxs-lookup"><span data-stu-id="aa350-105">Drawing APIs, such as <xref:System.Windows.Media.GlyphRunDrawing> and <xref:System.Windows.Media.FormattedText>, provide a means for including formatted text in drawings.</span></span> <span data-ttu-id="aa350-106">En el nivel más avanzado, WPFWPF proporciona un motor de formato de texto extensible para controlar todos los aspectos de la presentación de texto, como la administración de almacenes de texto, la administración de formato de ejecución de texto y la administración de objetos incrustados.</span><span class="sxs-lookup"><span data-stu-id="aa350-106">At the most advanced level, WPF provides an extensible text formatting engine to control every aspect of text presentation, such as text store management, text run formatting management, and embedded object management.</span></span>  
  
 <span data-ttu-id="aa350-107">En este tema se proporciona una introducción al formato de texto WPFWPF.</span><span class="sxs-lookup"><span data-stu-id="aa350-107">This topic provides an introduction to WPF text formatting.</span></span> <span data-ttu-id="aa350-108">Se centra en la implementación del cliente y el uso del motor de formato de texto WPFWPF.</span><span class="sxs-lookup"><span data-stu-id="aa350-108">It focuses on client implementation and use of the WPF text formatting engine.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="aa350-109">Todos los ejemplos de código de este documento se pueden encontrar en el ejemplo de formato de [texto avanzado](https://github.com/Microsoft/WPF-Samples/tree/master/PerMonitorDPI/TextFormatting).</span><span class="sxs-lookup"><span data-stu-id="aa350-109">All code examples within this document can be found in the [Advanced Text Formatting Sample](https://github.com/Microsoft/WPF-Samples/tree/master/PerMonitorDPI/TextFormatting).</span></span>  

<a name="prereq"></a>
## <a name="prerequisites"></a><span data-ttu-id="aa350-110">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="aa350-110">Prerequisites</span></span>  
 <span data-ttu-id="aa350-111">En este tema se supone que está familiarizado con las API de nivel superior utilizadas para la presentación de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-111">This topic assumes that you are familiar with the higher level APIs used for text presentation.</span></span> <span data-ttu-id="aa350-112">La mayoría de los escenarios de usuario no requerirán las API de formato de texto avanzadas que se describen en este tema.</span><span class="sxs-lookup"><span data-stu-id="aa350-112">Most user scenarios will not require the advanced text formatting APIs discussed in this topic.</span></span> <span data-ttu-id="aa350-113">Para obtener una introducción a las diferentes API de texto, vea [Documentos en WPF .](documents-in-wpf.md)</span><span class="sxs-lookup"><span data-stu-id="aa350-113">For an introduction to the different text APIs, see [Documents in WPF](documents-in-wpf.md).</span></span>  
  
<a name="section1"></a>
## <a name="advanced-text-formatting"></a><span data-ttu-id="aa350-114">Formato de texto avanzado</span><span class="sxs-lookup"><span data-stu-id="aa350-114">Advanced Text Formatting</span></span>  
 <span data-ttu-id="aa350-115">El diseño [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] de texto y los controles de WPFWPF proporcionan propiedades de formato que permiten incluir fácilmente texto con formato en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa350-115">The text layout and [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] controls in WPF provide formatting properties that allow you to easily include formatted text in your application.</span></span> <span data-ttu-id="aa350-116">Estos controles exponen varias propiedades para controlar la presentación de texto, como las de tipo de letra, tamaño y color.</span><span class="sxs-lookup"><span data-stu-id="aa350-116">These controls expose a number of properties to handle the presentation of text, which includes its typeface, size, and color.</span></span> <span data-ttu-id="aa350-117">En circunstancias normales, estos controles pueden controlar la mayoría de las características de presentación de texto en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa350-117">Under ordinary circumstances, these controls can handle the majority of text presentation in your application.</span></span> <span data-ttu-id="aa350-118">Sin embargo, algunos escenarios avanzados requieren el control del almacenamiento de texto, así como su presentación.</span><span class="sxs-lookup"><span data-stu-id="aa350-118">However, some advanced scenarios require the control of text storage as well as text presentation.</span></span> <span data-ttu-id="aa350-119">WPFWPF proporciona un motor de formato de texto extensible para este propósito.</span><span class="sxs-lookup"><span data-stu-id="aa350-119">WPF provides an extensible text formatting engine for this purpose.</span></span>  
  
 <span data-ttu-id="aa350-120">Las características avanzadas de formato de texto que se encuentran en WPFWPF constan de un motor de formato de texto, un almacén de texto, ejecuciones de texto y propiedades de formato.</span><span class="sxs-lookup"><span data-stu-id="aa350-120">The advanced text formatting features found in WPF consist of a text formatting engine, a text store, text runs, and formatting properties.</span></span> <span data-ttu-id="aa350-121">El motor de <xref:System.Windows.Media.TextFormatting.TextFormatter>formato de texto, , crea líneas de texto que se utilizarán para la presentación.</span><span class="sxs-lookup"><span data-stu-id="aa350-121">The text formatting engine, <xref:System.Windows.Media.TextFormatting.TextFormatter>, creates lines of text to be used for presentation.</span></span> <span data-ttu-id="aa350-122">Esto se logra iniciando el proceso de formato de <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>línea y llamando al formateador de texto .</span><span class="sxs-lookup"><span data-stu-id="aa350-122">This is achieved by initiating the line formatting process and calling the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>.</span></span> <span data-ttu-id="aa350-123">El formateador de texto recupera las ejecuciones de <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> texto del almacén de texto llamando al método de la tienda.</span><span class="sxs-lookup"><span data-stu-id="aa350-123">The text formatter retrieves text runs from your text store by calling the store's <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="aa350-124">A <xref:System.Windows.Media.TextFormatting.TextRun> continuación, el <xref:System.Windows.Media.TextFormatting.TextLine> formateador de texto forma los objetos se forman en objetos y se asignan a la aplicación para su inspección o visualización.</span><span class="sxs-lookup"><span data-stu-id="aa350-124">The <xref:System.Windows.Media.TextFormatting.TextRun> objects are then formed into <xref:System.Windows.Media.TextFormatting.TextLine> objects by the text formatter and given to your application for inspection or display.</span></span>  
  
<a name="section2"></a>
## <a name="using-the-text-formatter"></a><span data-ttu-id="aa350-125">Uso del formateador de texto</span><span class="sxs-lookup"><span data-stu-id="aa350-125">Using the Text Formatter</span></span>  
 <span data-ttu-id="aa350-126"><xref:System.Windows.Media.TextFormatting.TextFormatter>es el motor de formato de texto WPFWPF y proporciona servicios para dar formato y romper líneas de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-126"><xref:System.Windows.Media.TextFormatting.TextFormatter> is the WPF text formatting engine and provides services for formatting and breaking text lines.</span></span> <span data-ttu-id="aa350-127">El formateador de texto puede controlar los distintos formatos de caracteres de texto y estilos de párrafo, e incluye compatibilidad para el diseño de texto internacional.</span><span class="sxs-lookup"><span data-stu-id="aa350-127">The text formatter can handle different text character formats and paragraph styles, and includes support for international text layout.</span></span>  
  
 <span data-ttu-id="aa350-128">A diferencia de una <xref:System.Windows.Media.TextFormatting.TextFormatter> API de texto tradicional, interactúa con un cliente de diseño de texto a través de un conjunto de métodos de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="aa350-128">Unlike a traditional text API, the <xref:System.Windows.Media.TextFormatting.TextFormatter> interacts with a text layout client through a set of callback methods.</span></span> <span data-ttu-id="aa350-129">Requiere que el cliente proporcione estos métodos <xref:System.Windows.Media.TextFormatting.TextSource> en una implementación de la clase.</span><span class="sxs-lookup"><span data-stu-id="aa350-129">It requires the client to provide these methods in an implementation of the <xref:System.Windows.Media.TextFormatting.TextSource> class.</span></span> <span data-ttu-id="aa350-130">En el diagrama siguiente se muestra la <xref:System.Windows.Media.TextFormatting.TextFormatter>interacción de diseño de texto entre la aplicación cliente y .</span><span class="sxs-lookup"><span data-stu-id="aa350-130">The following diagram illustrates the text layout interaction between the client application and <xref:System.Windows.Media.TextFormatting.TextFormatter>.</span></span>  
  
 ![Diagrama de TextFormatter y cliente de diseño de texto](./media/advanced-text-formatting/text-layout-textformatter-interaction.png)  
  
 <span data-ttu-id="aa350-132">El formateador de texto se utiliza para recuperar líneas de <xref:System.Windows.Media.TextFormatting.TextSource>texto con formato del almacén de texto, que es una implementación de .</span><span class="sxs-lookup"><span data-stu-id="aa350-132">The text formatter is used to retrieve formatted text lines from the text store, which is an implementation of <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="aa350-133">Esto se hace creando primero una instancia del <xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A> formateador de texto mediante el método.</span><span class="sxs-lookup"><span data-stu-id="aa350-133">This is done by first creating an instance of the text formatter by using the <xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A> method.</span></span> <span data-ttu-id="aa350-134">Este método crea una instancia del formateador de texto y establece los valores máximos de alto y ancho de línea.</span><span class="sxs-lookup"><span data-stu-id="aa350-134">This method creates an instance of the text formatter and sets the maximum line height and width values.</span></span> <span data-ttu-id="aa350-135">Tan pronto como se crea una instancia del formateador de <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> texto, el proceso de creación de líneas se inicia llamando al método.</span><span class="sxs-lookup"><span data-stu-id="aa350-135">As soon as an instance of the text formatter is created, the line creation process is started by calling the <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span> <span data-ttu-id="aa350-136"><xref:System.Windows.Media.TextFormatting.TextFormatter>vuelve a llamar al origen de texto para recuperar el texto y los parámetros de formato para las ejecuciones de texto que forman una línea.</span><span class="sxs-lookup"><span data-stu-id="aa350-136"><xref:System.Windows.Media.TextFormatting.TextFormatter> calls back to the text source to retrieve the text and formatting parameters for the runs of text that form a line.</span></span>  
  
 <span data-ttu-id="aa350-137">En el ejemplo siguiente, se muestra el proceso para formatear un almacén de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-137">In the following example, the process of formatting a text store is shown.</span></span> <span data-ttu-id="aa350-138">El <xref:System.Windows.Media.TextFormatting.TextFormatter> objeto se utiliza para recuperar líneas de texto del almacén <xref:System.Windows.Media.DrawingContext>de texto y, a continuación, dar formato a la línea de texto para dibujar en el archivo .</span><span class="sxs-lookup"><span data-stu-id="aa350-138">The <xref:System.Windows.Media.TextFormatting.TextFormatter> object is used to retrieve text lines from the text store and then format the text line for drawing into the <xref:System.Windows.Media.DrawingContext>.</span></span>  
  
 [!code-csharp[TextFormatterExample#100](~/samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/Window1.xaml.cs#100)]
 [!code-vb[TextFormatterExample#100](~/samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/Window1.xaml.vb#100)]  
  
<a name="section3"></a>
## <a name="implementing-the-client-text-store"></a><span data-ttu-id="aa350-139">Implementación del almacén de texto de cliente</span><span class="sxs-lookup"><span data-stu-id="aa350-139">Implementing the Client Text Store</span></span>  
 <span data-ttu-id="aa350-140">Al ampliar el motor de formato de texto, es necesario que implemente y administre todos los aspectos del almacén de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-140">When you extend the text formatting engine, you are required to implement and manage all aspects of the text store.</span></span> <span data-ttu-id="aa350-141">Esta no es una tarea trivial.</span><span class="sxs-lookup"><span data-stu-id="aa350-141">This is not a trivial task.</span></span> <span data-ttu-id="aa350-142">El almacén de texto es responsable del seguimiento de las propiedades de las ejecuciones de texto, las propiedades de párrafo, los objetos incrustados y otro contenido similar.</span><span class="sxs-lookup"><span data-stu-id="aa350-142">The text store is responsible for tracking text run properties, paragraph properties, embedded objects, and other similar content.</span></span> <span data-ttu-id="aa350-143">También proporciona el formateador <xref:System.Windows.Media.TextFormatting.TextRun> de texto con objetos <xref:System.Windows.Media.TextFormatting.TextLine> individuales que el formateador de texto utiliza para crear objetos.</span><span class="sxs-lookup"><span data-stu-id="aa350-143">It also provides the text formatter with individual <xref:System.Windows.Media.TextFormatting.TextRun> objects which the text formatter uses to create <xref:System.Windows.Media.TextFormatting.TextLine> objects.</span></span>  
  
 <span data-ttu-id="aa350-144">Para controlar la virtualización del almacén de texto, <xref:System.Windows.Media.TextFormatting.TextSource>el almacén de texto debe derivarse de .</span><span class="sxs-lookup"><span data-stu-id="aa350-144">To handle the virtualization of the text store, the text store must be derived from <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="aa350-145"><xref:System.Windows.Media.TextFormatting.TextSource>define el método que utiliza el formateador de texto para recuperar ejecuciones de texto del almacén de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-145"><xref:System.Windows.Media.TextFormatting.TextSource> defines the method the text formatter uses to retrieve text runs from the text store.</span></span> <span data-ttu-id="aa350-146"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A>es el método utilizado por el formateador de texto para recuperar las ejecuciones de texto utilizadas en el formato de línea.</span><span class="sxs-lookup"><span data-stu-id="aa350-146"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is the method used by the text formatter to retrieve text runs used in line formatting.</span></span> <span data-ttu-id="aa350-147">La llamada <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> a se realiza repetidamente por el formateador de texto hasta que se produce una de las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="aa350-147">The call to <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is repeatedly made by the text formatter until one of the following conditions occurs:</span></span>  
  
- <span data-ttu-id="aa350-148">Se <xref:System.Windows.Media.TextFormatting.TextEndOfLine> devuelve una o una subclase.</span><span class="sxs-lookup"><span data-stu-id="aa350-148">A <xref:System.Windows.Media.TextFormatting.TextEndOfLine> or a subclass is returned.</span></span>  
  
- <span data-ttu-id="aa350-149">El ancho acumulado de las ejecuciones de texto supera el ancho de línea máximo especificado en la <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> llamada para crear el formateador de texto o la llamada al método del formateador de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-149">The accumulated width of text runs exceeds the maximum line width specified in either the call to create the text formatter or the call to the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span>  
  
- <span data-ttu-id="aa350-150">Se devuelve una secuencia de nueva línea Unicode, como "CF", "LF" o "CRLF".</span><span class="sxs-lookup"><span data-stu-id="aa350-150">A Unicode newline sequence, such as "CF", "LF", or "CRLF", is returned.</span></span>  
  
<a name="section4"></a>
## <a name="providing-text-runs"></a><span data-ttu-id="aa350-151">Abastecimiento de ejecuciones de texto</span><span class="sxs-lookup"><span data-stu-id="aa350-151">Providing Text Runs</span></span>  
 <span data-ttu-id="aa350-152">La esencia del proceso de formato de texto es la interacción entre el formateador de texto y el almacén de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-152">The core of the text formatting process is the interaction between the text formatter and the text store.</span></span> <span data-ttu-id="aa350-153">La implementación de proporciona el formateador de <xref:System.Windows.Media.TextFormatting.TextSource> texto con los <xref:System.Windows.Media.TextFormatting.TextRun> objetos y las propiedades con las que se va a dar formato al texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-153">Your implementation of <xref:System.Windows.Media.TextFormatting.TextSource> provides the text formatter with the <xref:System.Windows.Media.TextFormatting.TextRun> objects and the properties with which to format the text runs.</span></span> <span data-ttu-id="aa350-154">Esta interacción se <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> controla mediante el método, al que llama el formateador de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-154">This interaction is handled by the <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method, which is called by the text formatter.</span></span>  
  
 <span data-ttu-id="aa350-155">En la tabla siguiente se <xref:System.Windows.Media.TextFormatting.TextRun> muestran algunos de los objetos predefinidos.</span><span class="sxs-lookup"><span data-stu-id="aa350-155">The following table shows some of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects.</span></span>  
  
|<span data-ttu-id="aa350-156">Tipo TextRun</span><span class="sxs-lookup"><span data-stu-id="aa350-156">TextRun Type</span></span>|<span data-ttu-id="aa350-157">Uso</span><span class="sxs-lookup"><span data-stu-id="aa350-157">Usage</span></span>|  
|------------------|-----------|  
|<xref:System.Windows.Media.TextFormatting.TextCharacters>|<span data-ttu-id="aa350-158">Ejecución de texto especializada que se usa para devolver una representación de glifos de caracteres al formateador de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-158">The specialized text run used to pass a representation of character glyphs back to the text formatter.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEmbeddedObject>|<span data-ttu-id="aa350-159">Ejecución de texto especializada que se usa para proporcionar contenido donde la medida, la prueba de posicionamiento y el dibujo se ejecutan de forma global, como un botón o una imagen dentro del texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-159">The specialized text run used to provide content in which measuring, hit testing, and drawing is done in whole, such as a button or image within the text.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfLine>|<span data-ttu-id="aa350-160">Ejecución de texto especializada que se usa para marcar el final de una línea.</span><span class="sxs-lookup"><span data-stu-id="aa350-160">The specialized text run used to mark the end of a line.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>|<span data-ttu-id="aa350-161">Ejecución de texto especializada que se usa para marcar el final de un párrafo.</span><span class="sxs-lookup"><span data-stu-id="aa350-161">The specialized text run used to mark the end of a paragraph.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfSegment>|<span data-ttu-id="aa350-162">La ejecución de texto especializada utilizada para marcar el final de un <xref:System.Windows.Media.TextFormatting.TextModifier> segmento, por ejemplo, para finalizar el ámbito afectado por una ejecución anterior.</span><span class="sxs-lookup"><span data-stu-id="aa350-162">The specialized text run used to mark the end of a segment, such as to end the scope affected by a previous <xref:System.Windows.Media.TextFormatting.TextModifier> run.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextHidden>|<span data-ttu-id="aa350-163">Ejecución de texto especializada que se usa para marcar un intervalo de caracteres ocultos.</span><span class="sxs-lookup"><span data-stu-id="aa350-163">The specialized text run used to mark a range of hidden characters.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextModifier>|<span data-ttu-id="aa350-164">Ejecución de texto especializada que se usa para modificar las propiedades de las ejecuciones de texto en su ámbito.</span><span class="sxs-lookup"><span data-stu-id="aa350-164">The specialized text run used to modify properties of text runs in its scope.</span></span> <span data-ttu-id="aa350-165">El ámbito se extiende <xref:System.Windows.Media.TextFormatting.TextEndOfSegment> a la siguiente <xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>ejecución de texto coincidente o a la siguiente.</span><span class="sxs-lookup"><span data-stu-id="aa350-165">The scope extends to the next matching <xref:System.Windows.Media.TextFormatting.TextEndOfSegment> text run, or the next <xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>.</span></span>|  
  
 <span data-ttu-id="aa350-166">Cualquiera de los <xref:System.Windows.Media.TextFormatting.TextRun> objetos predefinidos se puede subclase.</span><span class="sxs-lookup"><span data-stu-id="aa350-166">Any of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects can be subclassed.</span></span> <span data-ttu-id="aa350-167">Esto permite que el origen del texto proporcione al formateador de texto ejecuciones de texto que incluyan datos personalizados.</span><span class="sxs-lookup"><span data-stu-id="aa350-167">This allows your text source to provide the text formatter with text runs that include custom data.</span></span>  
  
 <span data-ttu-id="aa350-168">En el ejemplo <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> siguiente se muestra un método.</span><span class="sxs-lookup"><span data-stu-id="aa350-168">The following example demonstrates a <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="aa350-169">Este almacén <xref:System.Windows.Media.TextFormatting.TextRun> de texto devuelve objetos al formateador de texto para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="aa350-169">This text store returns <xref:System.Windows.Media.TextFormatting.TextRun> objects to the text formatter for processing.</span></span>  
  
 [!code-csharp[TextFormatterExample#101](~/samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/CustomTextSource.cs#101)]
 [!code-vb[TextFormatterExample#101](~/samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/CustomTextSource.vb#101)]  
  
> [!NOTE]
> <span data-ttu-id="aa350-170">En este ejemplo, el almacén de texto proporciona las mismas propiedades de texto para todo el texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-170">In this example, the text store provides the same text properties to all of the text.</span></span> <span data-ttu-id="aa350-171">Los almacenes de texto avanzados tendrían que implementar su propia administración de intervalos para permitir que caracteres individuales tengan propiedades diferentes.</span><span class="sxs-lookup"><span data-stu-id="aa350-171">Advanced text stores would need to implement their own span management to allow individual characters to have different properties.</span></span>  
  
<a name="section5"></a>
## <a name="specifying-formatting-properties"></a><span data-ttu-id="aa350-172">Especificación de las propiedades de formato</span><span class="sxs-lookup"><span data-stu-id="aa350-172">Specifying Formatting Properties</span></span>  
 <span data-ttu-id="aa350-173"><xref:System.Windows.Media.TextFormatting.TextRun>los objetos se formatean mediante las propiedades proporcionadas por el almacén de texto.</span><span class="sxs-lookup"><span data-stu-id="aa350-173"><xref:System.Windows.Media.TextFormatting.TextRun> objects are formatted by using properties provided by the text store.</span></span> <span data-ttu-id="aa350-174">Estas propiedades vienen en <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> <xref:System.Windows.Media.TextFormatting.TextRunProperties>dos tipos y .</span><span class="sxs-lookup"><span data-stu-id="aa350-174">These properties come in two types, <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties>.</span></span> <span data-ttu-id="aa350-175"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties>controlar las propiedades <xref:System.Windows.TextAlignment> inclusivas de párrafo, como y <xref:System.Windows.FlowDirection>.</span><span class="sxs-lookup"><span data-stu-id="aa350-175"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties> handle paragraph inclusive properties such as <xref:System.Windows.TextAlignment> and <xref:System.Windows.FlowDirection>.</span></span> <span data-ttu-id="aa350-176"><xref:System.Windows.Media.TextFormatting.TextRunProperties>son propiedades que pueden ser diferentes para cada texto que <xref:System.Windows.Media.Typeface>se ejecuta dentro de un párrafo, como el pincel en primer plano, y el tamaño de fuente.</span><span class="sxs-lookup"><span data-stu-id="aa350-176"><xref:System.Windows.Media.TextFormatting.TextRunProperties> are properties that can be different for each text run within a paragraph, such as foreground brush, <xref:System.Windows.Media.Typeface>, and font size.</span></span> <span data-ttu-id="aa350-177">Para implementar tipos de propiedad de ejecución de texto personalizado <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> <xref:System.Windows.Media.TextFormatting.TextRunProperties> y párrafo personalizado, la aplicación debe crear clases que se deriven de y, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="aa350-177">To implement custom paragraph and custom text run property types, your application must create classes that derive from <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties> respectively.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aa350-178">Consulte también</span><span class="sxs-lookup"><span data-stu-id="aa350-178">See also</span></span>

- [<span data-ttu-id="aa350-179">Tipografía en WPF</span><span class="sxs-lookup"><span data-stu-id="aa350-179">Typography in WPF</span></span>](typography-in-wpf.md)
- [<span data-ttu-id="aa350-180">Documentos en WPF</span><span class="sxs-lookup"><span data-stu-id="aa350-180">Documents in WPF</span></span>](documents-in-wpf.md)
