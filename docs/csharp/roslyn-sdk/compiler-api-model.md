---
title: Modelo de objetos y conceptos del SDK de .NET Compiler Platform
description: En este tema se proporciona la información necesaria para trabajar de forma eficaz con el SDK de .NET Compiler. Aprenderá sobre las capas de API, los tipos principales implicados y el modelo de objetos general.
ms.date: 10/10/2017
ms.custom: mvc
ms.openlocfilehash: e563260e21fb8807017db90ff63e30fec0415a48
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/14/2020
ms.locfileid: "79156966"
---
# <a name="understand-the-net-compiler-platform-sdk-model"></a><span data-ttu-id="81306-104">Descripción del modelo del SDK de .NET Compiler Platform</span><span class="sxs-lookup"><span data-stu-id="81306-104">Understand the .NET Compiler Platform SDK model</span></span>

<span data-ttu-id="81306-105">Los compiladores procesan el código que se escribe conforme a reglas estructuradas que a menudo se diferencian de la forma en que los seres humanos lo leen y lo entienden.</span><span class="sxs-lookup"><span data-stu-id="81306-105">Compilers process the code you write following structured rules that often differ from the way humans read and understand code.</span></span> <span data-ttu-id="81306-106">Una comprensión básica del modelo usado por los compiladores resulta fundamental para entender las API que se usan al compilar herramientas basadas en Roslyn.</span><span class="sxs-lookup"><span data-stu-id="81306-106">A basic understanding of the model used by compilers is essential to understanding the APIs you use when building Roslyn-based tools.</span></span>

## <a name="compiler-pipeline-functional-areas"></a><span data-ttu-id="81306-107">Áreas funcionales de canalización de compilador</span><span class="sxs-lookup"><span data-stu-id="81306-107">Compiler pipeline functional areas</span></span>

<span data-ttu-id="81306-108">El SDK de .NET Compiler Platform expone el análisis de código de los compiladores de C# y Visual Basic al proporcionar una capa de API que refleja una canalización de compilador tradicional.</span><span class="sxs-lookup"><span data-stu-id="81306-108">The .NET Compiler Platform SDK exposes the C# and Visual Basic compilers' code analysis to you as a consumer by providing an API layer that mirrors a traditional compiler pipeline.</span></span>

![Pasos del código fuente de procesamiento de canalización de compilador a código de objeto](media/compiler-api-model/compiler-pipeline.png)

<span data-ttu-id="81306-110">Cada fase de esta canalización es un componente independiente.</span><span class="sxs-lookup"><span data-stu-id="81306-110">Each phase of this pipeline is a separate component.</span></span> <span data-ttu-id="81306-111">En primer lugar, la fase de análisis acorta y analiza el texto de origen en la sintaxis que sigue la gramática del lenguaje.</span><span class="sxs-lookup"><span data-stu-id="81306-111">First, the parse phase tokenizes and parses source text into syntax that follows the language grammar.</span></span> <span data-ttu-id="81306-112">En segundo lugar, la fase de declaración analiza los metadatos importados y de origen para formar símbolos con nombre.</span><span class="sxs-lookup"><span data-stu-id="81306-112">Second, the declaration phase analyzes source and imported metadata to form named symbols.</span></span> <span data-ttu-id="81306-113">Luego, la fase de enlace combina los identificadores del código con los símbolos.</span><span class="sxs-lookup"><span data-stu-id="81306-113">Next, the bind phase matches identifiers in the code to symbols.</span></span> <span data-ttu-id="81306-114">Por último, en la fase de emisión se emite un ensamblado con toda la información generada por el compilador.</span><span class="sxs-lookup"><span data-stu-id="81306-114">Finally, the emit phase emits an assembly with all the information built up by the compiler.</span></span>

![La API de canalización de compilador proporciona acceso a cada paso que forma parte de la canalización de compilador.](media/compiler-api-model/compiler-pipeline-api.png)

<span data-ttu-id="81306-116">En correspondencia a cada una de esas fases, el SDK de .NET Compiler Platform expone un modelo de objetos que permite el acceso a la información en esa fase.</span><span class="sxs-lookup"><span data-stu-id="81306-116">Corresponding to each of those phases, the .NET Compiler Platform SDK exposes an object model that allows access to the information at that phase.</span></span> <span data-ttu-id="81306-117">La fase de análisis expone un árbol de sintaxis, la fase de declaración expone una tabla de símbolos jerárquica, la fase de enlace expone el resultado del análisis semántico del compilador y la fase de emisión es una API que genera códigos de bytes de IL.</span><span class="sxs-lookup"><span data-stu-id="81306-117">The parsing phase exposes a syntax tree, the declaration phase exposes a hierarchical symbol table, the binding phase exposes the result of the compiler’s semantic analysis, and the emit phase is an API that produces IL byte codes.</span></span>

![Servicios de lenguaje disponibles desde la API del compilador en cada paso de la canalización de compilador](media/compiler-api-model/compiler-pipeline-lang-svc.png)

<span data-ttu-id="81306-119">Cada compilador combina estos componentes como un único todo.</span><span class="sxs-lookup"><span data-stu-id="81306-119">Each compiler combines these components together as a single end-to-end whole.</span></span>

<span data-ttu-id="81306-120">Estas API son las mismas que usa Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81306-120">These APIs are the same ones used by Visual Studio.</span></span> <span data-ttu-id="81306-121">Por ejemplo, las características de formato y esquema del código usan los árboles de sintaxis, las características de navegación y el Examinador de objetos usan la tabla de símbolos, las refactorizaciones e Ir a definición usan el modelo semántico y Editar y continuar usa todos ellos, incluida la API de emisión.</span><span class="sxs-lookup"><span data-stu-id="81306-121">For instance, the code outlining and formatting features use the syntax trees, the Object Browser and navigation features use the symbol table, refactorings and Go to Definition use the semantic model, and Edit and Continue uses all of these, including the Emit API.</span></span>

## <a name="api-layers"></a><span data-ttu-id="81306-122">Capas de API</span><span class="sxs-lookup"><span data-stu-id="81306-122">API layers</span></span>

<span data-ttu-id="81306-123">El SDK de .NET Compiler está formado por dos capas principales de API: API de compilador y API de áreas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="81306-123">The .NET compiler SDK consists of two main layers of APIs: compiler APIs and workspaces APIs.</span></span>

![Capas de API representadas por las API de canalización de compilador](media/compiler-api-model/api-layers.png)

### <a name="compiler-apis"></a><span data-ttu-id="81306-125">API de compilador</span><span class="sxs-lookup"><span data-stu-id="81306-125">Compiler APIs</span></span>

<span data-ttu-id="81306-126">La capa de compilador contiene los modelos de objetos que corresponden con la información expuesta en cada fase de la canalización de compilador, sintáctica y semántica.</span><span class="sxs-lookup"><span data-stu-id="81306-126">The compiler layer contains the object models that correspond to information exposed at each phase of the compiler pipeline, both syntactic and semantic.</span></span> <span data-ttu-id="81306-127">La capa de compilador también contiene una instantánea inmutable de una sola invocación de un compilador, incluidas las referencias de ensamblado, las opciones del compilador y los archivos de código fuente.</span><span class="sxs-lookup"><span data-stu-id="81306-127">The compiler layer also contains an immutable snapshot of a single invocation of a compiler, including assembly references, compiler options, and source code files.</span></span> <span data-ttu-id="81306-128">Hay dos API distintas que representan el lenguaje C# y el lenguaje Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="81306-128">There are two distinct APIs that represent the C# language and the Visual Basic language.</span></span> <span data-ttu-id="81306-129">Estas dos API son similares en forma, aunque están adaptadas para lograr una alta fidelidad con cada lenguaje.</span><span class="sxs-lookup"><span data-stu-id="81306-129">These two APIs are similar in shape but tailored for high-fidelity to each individual language.</span></span> <span data-ttu-id="81306-130">Esta capa no tiene dependencias en componentes de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81306-130">This layer has no dependencies on Visual Studio components.</span></span>

### <a name="diagnostic-apis"></a><span data-ttu-id="81306-131">API de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="81306-131">Diagnostic APIs</span></span>

<span data-ttu-id="81306-132">Como parte de su análisis, el compilador puede generar un conjunto de diagnósticos que abarcan desde errores de sintaxis, semántica y asignación definitiva hasta distintas advertencias y diagnósticos informativos.</span><span class="sxs-lookup"><span data-stu-id="81306-132">As part of its analysis the compiler may produce a set of diagnostics covering everything from syntax, semantic, and definite assignment errors to various warnings and informational diagnostics.</span></span> <span data-ttu-id="81306-133">La capa de la API de compilador expone diagnósticos a través de una API extensible que permite incluir analizadores definidos por el usuario en el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="81306-133">The Compiler API layer exposes diagnostics through an extensible API that allows user-defined analyzers to be plugged into the compilation process.</span></span> <span data-ttu-id="81306-134">Permite generar diagnósticos definidos por el usuario, como los de herramientas como StyleCop o FxCop, junto con diagnósticos definidos por el compilador.</span><span class="sxs-lookup"><span data-stu-id="81306-134">It allows user-defined diagnostics, such as those produced by tools like StyleCop or FxCop, to be produced alongside compiler-defined diagnostics.</span></span> <span data-ttu-id="81306-135">La generación de diagnósticos de este modo tiene la ventaja de integrarse de forma natural con herramientas como MSBuild y Visual Studio que dependen de diagnósticos de experiencias como detener una compilación según una directiva y mostrar subrayados ondulados en vivo en el editor y sugerir correcciones de código.</span><span class="sxs-lookup"><span data-stu-id="81306-135">Producing diagnostics in this way has the benefit of integrating naturally with tools such as MSBuild and Visual Studio which depend on diagnostics for experiences such as halting a build based on policy and showing live squiggles in the editor and suggesting code fixes.</span></span>

### <a name="scripting-apis"></a><span data-ttu-id="81306-136">API de scripting</span><span class="sxs-lookup"><span data-stu-id="81306-136">Scripting APIs</span></span>

<span data-ttu-id="81306-137">Las API de hospedaje y scripting forman parte de la capa de compilador.</span><span class="sxs-lookup"><span data-stu-id="81306-137">Hosting and scripting APIs are part of the compiler layer.</span></span> <span data-ttu-id="81306-138">Puede usarlas para ejecutar fragmentos de código y acumular un contexto de ejecución en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="81306-138">You can use them for executing code snippets and accumulating a runtime execution context.</span></span>
<span data-ttu-id="81306-139">El REPL (bucle de lectura, evaluación e impresión) interactivo de C# usa estas API.</span><span class="sxs-lookup"><span data-stu-id="81306-139">The C# interactive REPL (Read-Evaluate-Print Loop) uses these APIs.</span></span> <span data-ttu-id="81306-140">El REPL permite usar C# como lenguaje de scripting, al ejecutar el código de forma interactiva mientras se escribe.</span><span class="sxs-lookup"><span data-stu-id="81306-140">The REPL enables you to use C# as a scripting language, executing the code interactively as you write it.</span></span>

### <a name="workspaces-apis"></a><span data-ttu-id="81306-141">API de áreas de trabajo</span><span class="sxs-lookup"><span data-stu-id="81306-141">Workspaces APIs</span></span>

<span data-ttu-id="81306-142">La capa de áreas de trabajo contiene la API de área de trabajo, que es el punto de partida para realizar análisis de código y refactorización de soluciones completas.</span><span class="sxs-lookup"><span data-stu-id="81306-142">The Workspaces layer contains the Workspace API, which is the starting point for doing code analysis and refactoring over entire solutions.</span></span> <span data-ttu-id="81306-143">Ayuda a organizar toda la información sobre los proyectos de una solución en un modelo de objetos único, lo que ofrece acceso directo a los modelos de objetos de capa de compilador sin necesidad de analizar archivos, configurar opciones ni administrar dependencias entre proyectos.</span><span class="sxs-lookup"><span data-stu-id="81306-143">It assists you in organizing all the information about the projects in a solution into single object model, offering you direct access to the compiler layer object models without needing to parse files, configure options, or manage project-to-project dependencies.</span></span>

<span data-ttu-id="81306-144">Además, la capa de áreas de trabajo expone un conjunto de API que se usa al implementar las herramientas de análisis de código y refactorización que funcionan en un entorno de host como el IDE de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81306-144">In addition, the Workspaces layer surfaces a set of APIs used when implementing code analysis and refactoring tools that function within a host environment like the Visual Studio IDE.</span></span> <span data-ttu-id="81306-145">Los ejemplos incluyen las API Buscar todas las referencias, Formato y Generación de código.</span><span class="sxs-lookup"><span data-stu-id="81306-145">Examples include the Find All References, Formatting, and Code Generation APIs.</span></span>

<span data-ttu-id="81306-146">Esta capa no tiene dependencias en componentes de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81306-146">This layer has no dependencies on Visual Studio components.</span></span>
