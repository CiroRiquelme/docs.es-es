---
title: Árboles
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: aed4350f1a7084b7894a70ac9d6d00cf25b39e34
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/20/2020
ms.locfileid: "81646198"
---
# <a name="trees-in-wpf"></a><span data-ttu-id="cab34-102">Árboles en WPF</span><span class="sxs-lookup"><span data-stu-id="cab34-102">Trees in WPF</span></span>
<span data-ttu-id="cab34-103">En muchas tecnologías, los elementos y componentes se organizan en una estructura de árbol en la que los desarrolladores manipulan directamente los nodos de objeto en el árbol para modificar la representación o el comportamiento de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="cab34-103">In many technologies, elements and components are organized in a tree structure where developers directly manipulate the object nodes in the tree to affect the rendering or behavior of an application.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="cab34-104">también usa varias metáforas de la estructura de árbol para definir las relaciones entre los elementos de programa.</span><span class="sxs-lookup"><span data-stu-id="cab34-104">also uses several tree structure metaphors to define relationships between program elements.</span></span> <span data-ttu-id="cab34-105">En su mayor parte, los desarrolladores de WPF pueden crear una aplicación en código o definir partes de la aplicación en código XAML mientras piensan conceptualmente en la metáfora de árbol de objetos, pero estarán llamando a una API concreta o usando un marcado concreto para llamarla, en lugar de usar una API de manipulación de árbol de objetos general como se usaría en DOM XML.</span><span class="sxs-lookup"><span data-stu-id="cab34-105">For the most part WPF developers can create an application in code or define portions of the application in XAML while thinking conceptually about the object tree metaphor, but will be calling specific API or using specific markup to do so rather than some general object tree manipulation API such as you might use in XML DOM.</span></span> <span data-ttu-id="cab34-106">WPFWPF expone dos clases auxiliares <xref:System.Windows.LogicalTreeHelper> que <xref:System.Windows.Media.VisualTreeHelper>proporcionan una vista de metáfora de árbol y .</span><span class="sxs-lookup"><span data-stu-id="cab34-106">WPF exposes two helper classes that provide a tree metaphor view, <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="cab34-107">Los términos árbol visual y árbol lógico también se usan en la documentación de WPF porque estos mismos árboles son útiles para entender el comportamiento de ciertas características clave de WPF.</span><span class="sxs-lookup"><span data-stu-id="cab34-107">The terms visual tree and logical tree are also used in the WPF documentation because these same trees are useful for understanding the behavior of certain key WPF features.</span></span> <span data-ttu-id="cab34-108">En este tema se define lo que representan el árbol visual y el árbol <xref:System.Windows.LogicalTreeHelper> lógico, se describe cómo se relacionan estos árboles con un concepto general de árbol de objetos e introducen y <xref:System.Windows.Media.VisualTreeHelper>s.</span><span class="sxs-lookup"><span data-stu-id="cab34-108">This topic defines what the visual tree and logical tree represent, discusses how such trees relate to an overall object tree concept, and introduces <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>s.</span></span>  

<a name="element_tree"></a>
## <a name="trees-in-wpf"></a><span data-ttu-id="cab34-109">Árboles en WPF</span><span class="sxs-lookup"><span data-stu-id="cab34-109">Trees in WPF</span></span>  
 <span data-ttu-id="cab34-110">La estructura de árbol más completa de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] es el árbol de objetos.</span><span class="sxs-lookup"><span data-stu-id="cab34-110">The most complete tree structure in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the object tree.</span></span> <span data-ttu-id="cab34-111">Si se define una página de aplicación en [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] y después se carga el [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], se crea una estructura de árbol basada en las relaciones de anidamiento de los elementos del marcado.</span><span class="sxs-lookup"><span data-stu-id="cab34-111">If you define an application page in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and then load the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], the tree structure is created based on the nesting relationships of the elements in the markup.</span></span> <span data-ttu-id="cab34-112">Si se define una aplicación o una parte de la aplicación en código, se crea la estructura de árbol en función de cómo se asignen los valores de propiedad de las propiedades que implementan el modelo de contenido para un objeto determinado.</span><span class="sxs-lookup"><span data-stu-id="cab34-112">If you define an application or a portion of the application in code, then the tree structure is created based on how you assign property values for properties that implement the content model for a given object.</span></span> <span data-ttu-id="cab34-113">En [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], hay dos maneras de conceptualizar el árbol de objetos completo y de notificarlo a su API pública: como el árbol lógico y como el árbol visual.</span><span class="sxs-lookup"><span data-stu-id="cab34-113">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], there are two ways that the complete object tree is conceptualized and can be reported to its public API: as the logical tree and as the visual tree.</span></span> <span data-ttu-id="cab34-114">Las distinciones entre árbol lógico y árbol visual no son siempre importantes, pero en ocasiones pueden dar lugar a problemas con algunos subsistemas de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] y afectar a las decisiones que se toman en el marcado o el código.</span><span class="sxs-lookup"><span data-stu-id="cab34-114">The distinctions between logical tree and visual tree are not always necessarily important, but they can occasionally cause issues with certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystems and affect choices you make in markup or code.</span></span>  
  
 <span data-ttu-id="cab34-115">Aunque no siempre se manipula directamente el árbol lógico o el árbol visual, entender los conceptos relativos a cómo interactúan ayuda a entender WPF como tecnología.</span><span class="sxs-lookup"><span data-stu-id="cab34-115">Even though you do not always manipulate either the logical tree or the visual tree directly, understanding the concepts of how the trees interact is useful for understanding WPF as a technology.</span></span> <span data-ttu-id="cab34-116">Pensar en WPF como en un tipo de metáfora de árbol también es crucial para entender cómo funcionan la herencia de propiedades y el enrutamiento de eventos en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cab34-116">Thinking of WPF as a tree metaphor of some kind is also crucial to understanding how property inheritance and event routing work in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cab34-117">Dado que el árbol de objetos es más un concepto que una API real, otra manera de pensar en el concepto es como un gráfico de objetos.</span><span class="sxs-lookup"><span data-stu-id="cab34-117">Because the object tree is more of a concept than an actual API, another way to think of the concept is as an object graph.</span></span> <span data-ttu-id="cab34-118">En la práctica, hay relaciones entre los objetos en tiempo de ejecución en las que la metáfora del árbol no servirá.</span><span class="sxs-lookup"><span data-stu-id="cab34-118">In practice, there are relationships between objects at run time where the tree metaphor will break down.</span></span> <span data-ttu-id="cab34-119">Pero la metáfora del árbol es lo bastante relevante para que la mayor parte de la documentación de WPF use el término árbol de objetos al hacer referencia a este concepto general, en especial con la interfaz de usuario definida en XAML.</span><span class="sxs-lookup"><span data-stu-id="cab34-119">Nevertheless, particularly with XAML-defined UI, the tree metaphor is relevant enough that most WPF documentation will use the term object tree when referencing this general concept.</span></span>  
  
<a name="logical_tree"></a>
## <a name="the-logical-tree"></a><span data-ttu-id="cab34-120">El árbol lógico</span><span class="sxs-lookup"><span data-stu-id="cab34-120">The Logical Tree</span></span>  
 <span data-ttu-id="cab34-121">En [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], el contenido se agrega a los elementos de la interfaz de usuario estableciendo propiedades de los objetos que respaldan esos elementos.</span><span class="sxs-lookup"><span data-stu-id="cab34-121">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you add content to UI elements by setting properties of the objects that back those elements.</span></span> <span data-ttu-id="cab34-122">Por ejemplo, se agregan <xref:System.Windows.Controls.ListBox> elementos a <xref:System.Windows.Controls.ItemsControl.Items%2A> un control manipulando su propiedad.</span><span class="sxs-lookup"><span data-stu-id="cab34-122">For example, you add items to a <xref:System.Windows.Controls.ListBox> control by manipulating its <xref:System.Windows.Controls.ItemsControl.Items%2A> property.</span></span> <span data-ttu-id="cab34-123">Al hacer esto, está colocando elementos en el <xref:System.Windows.Controls.ItemCollection> que es el <xref:System.Windows.Controls.ItemsControl.Items%2A> valor de propiedad.</span><span class="sxs-lookup"><span data-stu-id="cab34-123">By doing this, you are placing items into the <xref:System.Windows.Controls.ItemCollection> that is the <xref:System.Windows.Controls.ItemsControl.Items%2A> property value.</span></span> <span data-ttu-id="cab34-124">De forma similar, <xref:System.Windows.Controls.DockPanel>para agregar <xref:System.Windows.Controls.Panel.Children%2A> objetos a un , se manipula su valor de propiedad.</span><span class="sxs-lookup"><span data-stu-id="cab34-124">Similarly, to add objects to a <xref:System.Windows.Controls.DockPanel>, you manipulate its <xref:System.Windows.Controls.Panel.Children%2A> property value.</span></span> <span data-ttu-id="cab34-125">Aquí, está agregando <xref:System.Windows.Controls.UIElementCollection>objetos al archivo .</span><span class="sxs-lookup"><span data-stu-id="cab34-125">Here, you are adding objects to the <xref:System.Windows.Controls.UIElementCollection>.</span></span> <span data-ttu-id="cab34-126">Para obtener un ejemplo de código, vea [Cómo: Agregar un elemento dinámicamente](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="cab34-126">For a code example, see [How to: Add an Element Dynamically](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span></span>  
  
 <span data-ttu-id="cab34-127">En [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], cuando se colocan <xref:System.Windows.Controls.ListBox> elementos de lista <xref:System.Windows.Controls.DockPanel>en un o <xref:System.Windows.Controls.ItemsControl.Items%2A> <xref:System.Windows.Controls.Panel.Children%2A> controles u otros elementos de interfaz de usuario en un , también se usan las propiedades y, ya sea explícita o implícitamente, como en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="cab34-127">In [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], when you place list items in a <xref:System.Windows.Controls.ListBox> or controls or other UI elements in a <xref:System.Windows.Controls.DockPanel>, you also use the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.Panel.Children%2A> properties, either explicitly or implicitly, as in the following example.</span></span>  
  
 [!code-xaml[TreeOvwsSupport#AllCode](~/samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 <span data-ttu-id="cab34-128">Si se procesara este código XAML como XML bajo un modelo de objetos de documento y se incluyeran como implícitas las etiquetas marcadas como comentario (lo que sería válido), el árbol DOM XML resultante incluiría elementos para `<ListBox.Items>` y los demás elementos implícitos.</span><span class="sxs-lookup"><span data-stu-id="cab34-128">If you were to process this XAML as XML under a document object model, and if you had included the tags commented out as implicit (which would have been legal), then the resulting XML DOM tree would have included elements for `<ListBox.Items>` and the other implicit items.</span></span> <span data-ttu-id="cab34-129">Pero XAML no se procesa de esta forma al leer el marcado y escribir en los objetos; el gráfico de objetos resultante no incluye literalmente `ListBox.Items`.</span><span class="sxs-lookup"><span data-stu-id="cab34-129">But XAML does not process that way when you read the markup and write to objects, the resulting object graph does not literally include `ListBox.Items`.</span></span> <span data-ttu-id="cab34-130">Sin embargo, <xref:System.Windows.Controls.ListBox> tiene `Items` una <xref:System.Windows.Controls.ItemCollection>propiedad denominada <xref:System.Windows.Controls.ItemCollection> que contiene un <xref:System.Windows.Controls.ListBox> , y que se inicializa pero vacía cuando se procesa el XAML.</span><span class="sxs-lookup"><span data-stu-id="cab34-130">It does however have a <xref:System.Windows.Controls.ListBox> property named `Items` that contains a <xref:System.Windows.Controls.ItemCollection>, and that <xref:System.Windows.Controls.ItemCollection> is initialized but empty when the <xref:System.Windows.Controls.ListBox> XAML is processed.</span></span> <span data-ttu-id="cab34-131">A continuación, cada elemento de objeto <xref:System.Windows.Controls.ListBox> secundario que <xref:System.Windows.Controls.ItemCollection> existe como contenido `ItemCollection.Add`para el se agrega a la por llamadas de analizador a .</span><span class="sxs-lookup"><span data-stu-id="cab34-131">Then, each child object element that exists as content for the <xref:System.Windows.Controls.ListBox> is added to the <xref:System.Windows.Controls.ItemCollection> by parser calls to `ItemCollection.Add`.</span></span> <span data-ttu-id="cab34-132">Este ejemplo de procesamiento de XAML en un árbol de objetos es hasta ahora aparentemente un ejemplo en el que el árbol de objetos creado es básicamente el árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-132">This example of processing XAML into an object tree is so far seemingly an example where the created object tree is basically the logical tree.</span></span>  
  
 <span data-ttu-id="cab34-133">Sin embargo, el árbol lógico no es el gráfico de objetos completo que existe para la interfaz de usuario de la aplicación en tiempo de ejecución, incluso con los elementos de sintaxis implícita XAML factorizados. La razón principal de esto son los objetos visuales y las plantillas.</span><span class="sxs-lookup"><span data-stu-id="cab34-133">However, the logical tree is not the entire object graph that exists for your application UI at run time, even with the XAML implicit syntax items factored out. The main reason for this is visuals and templates.</span></span> <span data-ttu-id="cab34-134">Por ejemplo, <xref:System.Windows.Controls.Button>considere el archivo .</span><span class="sxs-lookup"><span data-stu-id="cab34-134">For example, consider the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="cab34-135">El árbol lógico <xref:System.Windows.Controls.Button> notifica el `Content`objeto y también su cadena.</span><span class="sxs-lookup"><span data-stu-id="cab34-135">The logical tree reports the <xref:System.Windows.Controls.Button> object and also its string `Content`.</span></span> <span data-ttu-id="cab34-136">Pero este botón es más complejo en el árbol de objetos en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="cab34-136">But there is more to this button in the run-time object tree.</span></span> <span data-ttu-id="cab34-137">En particular, el botón sólo aparece en <xref:System.Windows.Controls.Button> la pantalla de la forma en que lo hace porque se aplicó una plantilla de control específica.</span><span class="sxs-lookup"><span data-stu-id="cab34-137">In particular, the button only appears on screen the way it does because a specific <xref:System.Windows.Controls.Button> control template was applied.</span></span> <span data-ttu-id="cab34-138">Los objetos visuales que proceden de una <xref:System.Windows.Controls.Border> plantilla aplicada (como la plantilla definida de gris oscuro alrededor del botón visual) no se notifican en el árbol lógico, incluso si está mirando el árbol lógico durante el tiempo de ejecución (por ejemplo, controlar un evento de entrada de la interfaz de usuario visible y, a continuación, leer el árbol lógico).</span><span class="sxs-lookup"><span data-stu-id="cab34-138">The visuals that come from an applied template (such as the template-defined <xref:System.Windows.Controls.Border> of dark gray around the visual button) are not reported in the logical tree, even if you are looking at the logical tree during run time (such as handling an input event from the visible UI and then reading the logical tree).</span></span> <span data-ttu-id="cab34-139">Para buscar los elementos visuales de la plantilla, sería necesario examinar el árbol visual en su lugar.</span><span class="sxs-lookup"><span data-stu-id="cab34-139">To find the template visuals, you would instead need to examine the visual tree.</span></span>  
  
 <span data-ttu-id="cab34-140">Para más información sobre cómo se asigna la sintaxis de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] al gráfico de objetos creado, y la sintaxis implícita en XAML, vea [Detalles de la sintaxis XAML](xaml-syntax-in-detail.md) o [Información general sobre XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span><span class="sxs-lookup"><span data-stu-id="cab34-140">For more information about how [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax maps to the created object graph, and implicit syntax in XAML, see [XAML Syntax In Detail](xaml-syntax-in-detail.md) or [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span></span>  
  
<a name="tree_property_inheritance_event_routing"></a>
### <a name="the-purpose-of-the-logical-tree"></a><span data-ttu-id="cab34-141">Finalidad del árbol lógico</span><span class="sxs-lookup"><span data-stu-id="cab34-141">The Purpose of the Logical Tree</span></span>  
 <span data-ttu-id="cab34-142">El árbol lógico existe para que los modelos de contenido puedan iterar fácilmente sus posibles objetos secundarios y para que los modelos de contenido puedan ser extensibles.</span><span class="sxs-lookup"><span data-stu-id="cab34-142">The logical tree exists so that content models can readily iterate over their possible child objects, and so that content models can be extensible.</span></span> <span data-ttu-id="cab34-143">Además, el árbol lógico proporciona un marco para algunas notificaciones, como, por ejemplo cuándo se cargan todos los objetos en él.</span><span class="sxs-lookup"><span data-stu-id="cab34-143">Also, the logical tree provides a framework for certain notifications, such as when all objects in the logical tree are loaded.</span></span> <span data-ttu-id="cab34-144">Básicamente, el árbol lógico es una aproximación de un gráfico de objetos en tiempo de ejecución en el nivel de marco, que excluye los elementos visuales, pero es adecuado para muchas operaciones de consulta en la composición de su propia aplicación en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="cab34-144">Basically, the logical tree is an approximation of a run time object graph at the framework level, which excludes visuals, but is adequate for many querying operations against your own run time application's composition.</span></span>  
  
 <span data-ttu-id="cab34-145">Además, las referencias de recursos estáticos y dinámicos <xref:System.Windows.FrameworkElement.Resources%2A> se resuelven mirando hacia arriba a través del <xref:System.Windows.FrameworkElement> árbol <xref:System.Windows.FrameworkContentElement>lógico `Resources` para las <xref:System.Windows.ResourceDictionary>colecciones en el objeto solicitante inicial y, a continuación, continuando hacia arriba en el árbol lógico y comprobando cada uno (o ) para otro valor que contiene un , posiblemente que contenga esa clave.</span><span class="sxs-lookup"><span data-stu-id="cab34-145">In addition, both static and dynamic resource references are resolved by looking upwards through the logical tree for <xref:System.Windows.FrameworkElement.Resources%2A> collections on the initial requesting object, and then continuing up the logical tree and checking each <xref:System.Windows.FrameworkElement> (or <xref:System.Windows.FrameworkContentElement>) for another `Resources` value that contains a <xref:System.Windows.ResourceDictionary>, possibly containing that key.</span></span> <span data-ttu-id="cab34-146">El árbol lógico se usa para la búsqueda de recursos cuando también está presente el árbol visual.</span><span class="sxs-lookup"><span data-stu-id="cab34-146">The logical tree is used for resource lookup when both the logical tree and the visual tree are present.</span></span> <span data-ttu-id="cab34-147">Para más información sobre los diccionarios de recursos y la búsqueda, vea [Recursos XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="cab34-147">For more information on resource dictionaries and lookup, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
<a name="composition"></a>
### <a name="composition-of-the-logical-tree"></a><span data-ttu-id="cab34-148">Composición del árbol lógico</span><span class="sxs-lookup"><span data-stu-id="cab34-148">Composition of the Logical Tree</span></span>  
 <span data-ttu-id="cab34-149">El árbol lógico se define en el wpfWPF nivel de marco, lo que significa <xref:System.Windows.FrameworkElement> <xref:System.Windows.FrameworkContentElement>que el wpfWPF elemento base que es más relevante para las operaciones de árbol lógico es o .</span><span class="sxs-lookup"><span data-stu-id="cab34-149">The logical tree is defined at the WPF framework-level, which means that the WPF base element that is most relevant for logical tree operations is either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="cab34-150">Sin embargo, como puede ver <xref:System.Windows.LogicalTreeHelper> si realmente utiliza la API, <xref:System.Windows.FrameworkElement> el <xref:System.Windows.FrameworkContentElement>árbol lógico a veces contiene nodos que no son ninguno o .</span><span class="sxs-lookup"><span data-stu-id="cab34-150">However, as you can see if you actually use the <xref:System.Windows.LogicalTreeHelper> API, the logical tree sometimes contains nodes that are not either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="cab34-151">Por ejemplo, el árbol <xref:System.Windows.Controls.TextBlock.Text%2A> lógico <xref:System.Windows.Controls.TextBlock>notifica el valor de un , que es una cadena.</span><span class="sxs-lookup"><span data-stu-id="cab34-151">For instance, the logical tree reports the <xref:System.Windows.Controls.TextBlock.Text%2A> value of a <xref:System.Windows.Controls.TextBlock>, which is a string.</span></span>  
  
<a name="override_logical_tree"></a>
### <a name="overriding-the-logical-tree"></a><span data-ttu-id="cab34-152">Invalidar el árbol lógico</span><span class="sxs-lookup"><span data-stu-id="cab34-152">Overriding the Logical Tree</span></span>  
 <span data-ttu-id="cab34-153">Los autores de controles avanzados pueden invalidar el árbol lógico reemplazando varias API que definen cómo un objeto general o modelo de contenido agrega o quita objetos dentro del árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-153">Advanced control authors can override the logical tree by overriding several APIs that define how a general object or content model adds or removes objects within the logical tree.</span></span> <span data-ttu-id="cab34-154">Para obtener un ejemplo de cómo invalidar el árbol lógico, vea [Invalidar el árbol lógico](how-to-override-the-logical-tree.md).</span><span class="sxs-lookup"><span data-stu-id="cab34-154">For an example of how to override the logical tree, see [Override the Logical Tree](how-to-override-the-logical-tree.md).</span></span>  
  
<a name="pvi"></a>
### <a name="property-value-inheritance"></a><span data-ttu-id="cab34-155">Herencia de valores de propiedad</span><span class="sxs-lookup"><span data-stu-id="cab34-155">Property Value Inheritance</span></span>  
 <span data-ttu-id="cab34-156">La herencia de valores de propiedad funciona a través de un árbol híbrido.</span><span class="sxs-lookup"><span data-stu-id="cab34-156">Property value inheritance operates through a hybrid tree.</span></span> <span data-ttu-id="cab34-157">Los metadatos reales <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> que contienen la propiedad que <xref:System.Windows.FrameworkPropertyMetadata> habilita la herencia de propiedades es la clase de nivel de marco WPF.</span><span class="sxs-lookup"><span data-stu-id="cab34-157">The actual metadata that contains the <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property that enables property inheritance is the WPF framework-level <xref:System.Windows.FrameworkPropertyMetadata> class.</span></span> <span data-ttu-id="cab34-158">Por lo tanto, tanto el elemento primario que contiene el valor <xref:System.Windows.FrameworkElement> original <xref:System.Windows.FrameworkContentElement>como el objeto secundario que hereda ese valor deben ser o , y ambos deben formar parte de algún árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-158">Therefore, both the parent that holds the original value and the child object that inherits that value must both be <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>, and they must both be part of some logical tree.</span></span> <span data-ttu-id="cab34-159">Pero para las propiedades de WPF existentes que admiten la herencia de propiedades, la herencia del valor de propiedad puede perpetuarse a través de un objeto intermedio que no está en el árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-159">However, for existing WPF properties that support property inheritance, property value inheritance is able to perpetuate through an intervening object that is not in the logical tree.</span></span> <span data-ttu-id="cab34-160">Esto es especialmente pertinente para hacer que los elementos de plantilla usen cualquier valor de propiedad heredado establecido en la instancia basada en una plantilla o en los niveles aun más altos de composición de página y, por tanto, superiores en el árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-160">Mainly this is relevant for having template elements use any inherited property values set either on the instance that is templated, or at still higher levels of page-level composition and therefore higher in the logical tree.</span></span> <span data-ttu-id="cab34-161">Para que la herencia del valor de propiedad funcione de forma coherente a través de un límite de este tipo, la propiedad que hereda se debe registrar como una propiedad adjunta y se debe seguir este patrón si se piensa definir una propiedad de dependencia personalizada con un comportamiento de herencia de propiedades.</span><span class="sxs-lookup"><span data-stu-id="cab34-161">In order for property value inheritance to work consistently across such a boundary, the inheriting property must be registered as an attached property, and you should follow this pattern if you intend to define a custom dependency property with property inheritance behavior.</span></span> <span data-ttu-id="cab34-162">El árbol exacto que se usa para la herencia de propiedades no se puede prever completamente mediante un método de utilidad de clase del asistente, ni siquiera en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="cab34-162">The exact tree used for property inheritance cannot be entirely anticipated by a helper class utility method, even at run time.</span></span> <span data-ttu-id="cab34-163">Para más información, vea [Herencia de valores de propiedad](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="cab34-163">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>  
  
<a name="two_trees"></a>
## <a name="the-visual-tree"></a><span data-ttu-id="cab34-164">El árbol visual</span><span class="sxs-lookup"><span data-stu-id="cab34-164">The Visual Tree</span></span>  
 <span data-ttu-id="cab34-165">Además del concepto de árbol lógico, en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] también existe el concepto de árbol visual.</span><span class="sxs-lookup"><span data-stu-id="cab34-165">In addition to the concept of the logical tree, there is also the concept of the visual tree in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="cab34-166">El árbol visual describe la estructura de objetos <xref:System.Windows.Media.Visual> visuales, representada por la clase base.</span><span class="sxs-lookup"><span data-stu-id="cab34-166">The visual tree describes the structure of visual objects, as represented by the <xref:System.Windows.Media.Visual> base class.</span></span> <span data-ttu-id="cab34-167">Cuando se escribe una plantilla para un control, se define o se vuelve a definir el árbol visual aplicable a ese control.</span><span class="sxs-lookup"><span data-stu-id="cab34-167">When you write a template for a control, you are defining or redefining the visual tree that applies for that control.</span></span> <span data-ttu-id="cab34-168">El árbol visual también tiene interés para los desarrolladores que quieren un control más específico sobre el dibujo por motivos de optimización y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="cab34-168">The visual tree is also of interest to developers who want lower-level control over drawing for performance and optimization reasons.</span></span> <span data-ttu-id="cab34-169">Una exposición del árbol visual como parte de la programación convencional de aplicaciones de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] consiste en que las rutas de evento de un evento enrutado recorren en su mayoría el árbol visual, no el árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-169">One exposure of the visual tree as part of conventional [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application programming is that event routes for a routed event mostly travel along the visual tree, not the logical tree.</span></span> <span data-ttu-id="cab34-170">Esta sutileza de comportamiento de los eventos enrutados puede no resultar patente de forma inmediata salvo para los autores de controles.</span><span class="sxs-lookup"><span data-stu-id="cab34-170">This subtlety of routed event behavior might not be immediately apparent unless you are a control author.</span></span> <span data-ttu-id="cab34-171">El enrutamiento de eventos a través del árbol visual permite que los controles que implementan la composición en el nivel visual controlen eventos o creen establecedores de eventos.</span><span class="sxs-lookup"><span data-stu-id="cab34-171">Routing events through the visual tree enables controls that implement composition at the visual level to handle events or create event setters.</span></span>  
  
<a name="trees_content"></a>
## <a name="trees-content-elements-and-content-hosts"></a><span data-ttu-id="cab34-172">Árboles, elementos de contenido y hosts de contenido</span><span class="sxs-lookup"><span data-stu-id="cab34-172">Trees, Content Elements, and Content Hosts</span></span>  
 <span data-ttu-id="cab34-173">Los elementos de <xref:System.Windows.ContentElement>contenido (clases que derivan de ) no forman parte del árbol visual; no heredan <xref:System.Windows.Media.Visual> de y no tienen una representación visual.</span><span class="sxs-lookup"><span data-stu-id="cab34-173">Content elements (classes that derive from <xref:System.Windows.ContentElement>) are not part of the visual tree; they do not inherit from <xref:System.Windows.Media.Visual> and do not have a visual representation.</span></span> <span data-ttu-id="cab34-174">Para aparecer en una interfaz <xref:System.Windows.ContentElement> de usuario en absoluto, un <xref:System.Windows.Media.Visual> debe hospedarse en un host de contenido que es a y un participante de árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-174">In order to appear in a UI at all, a <xref:System.Windows.ContentElement> must be hosted in a content host that is both a <xref:System.Windows.Media.Visual> and a logical tree participant.</span></span> <span data-ttu-id="cab34-175">Por lo general, <xref:System.Windows.FrameworkElement>un objeto de este tipo es un archivo .</span><span class="sxs-lookup"><span data-stu-id="cab34-175">Usually such an object is a <xref:System.Windows.FrameworkElement>.</span></span> <span data-ttu-id="cab34-176">Puede considerarse el host del contenido como una especie de "explorador" para el contenido que decide cómo mostrar ese contenido dentro de la zona de la pantalla que controla.</span><span class="sxs-lookup"><span data-stu-id="cab34-176">You can conceptualize that the content host is somewhat like a "browser" for the content and chooses how to display that content within the screen region that the host controls.</span></span> <span data-ttu-id="cab34-177">Cuando se hospeda el contenido, puede participar en algunos procesos del árbol que suelen asociarse al árbol visual.</span><span class="sxs-lookup"><span data-stu-id="cab34-177">When the content is hosted, the content can be made a participant in certain tree processes that are normally associated with the visual tree.</span></span> <span data-ttu-id="cab34-178">Por lo <xref:System.Windows.FrameworkElement> general, la clase host incluye <xref:System.Windows.ContentElement> código de implementación que agrega cualquier hospedado a la ruta de eventos a través de subnodos del árbol lógico de contenido, aunque el contenido hospedado no forma parte del árbol visual verdadero.</span><span class="sxs-lookup"><span data-stu-id="cab34-178">Generally, the <xref:System.Windows.FrameworkElement> host class includes implementation code that adds any hosted <xref:System.Windows.ContentElement> to the event route through subnodes of the content logical tree, even though the hosted content is not part of the true visual tree.</span></span> <span data-ttu-id="cab34-179">Esto es necesario <xref:System.Windows.ContentElement> para que a pueda originar un evento enrutado que enruta a cualquier elemento que no sea él mismo.</span><span class="sxs-lookup"><span data-stu-id="cab34-179">This is necessary so that a <xref:System.Windows.ContentElement> can source a routed event that routes to any element other than itself.</span></span>  
  
<a name="tree_traversal"></a>
## <a name="tree-traversal"></a><span data-ttu-id="cab34-180">Exploración transversal del árbol</span><span class="sxs-lookup"><span data-stu-id="cab34-180">Tree Traversal</span></span>  
 <span data-ttu-id="cab34-181">La <xref:System.Windows.LogicalTreeHelper> clase <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>proporciona <xref:System.Windows.LogicalTreeHelper.GetParent%2A>el <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> , , y los métodos para el recorrido lógico del árbol.</span><span class="sxs-lookup"><span data-stu-id="cab34-181">The <xref:System.Windows.LogicalTreeHelper> class provides the <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, and <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> methods for logical tree traversal.</span></span> <span data-ttu-id="cab34-182">En la mayoría de los casos, no debería tener que recorrer el árbol lógico de los controles existentes, porque casi siempre exponen sus elementos secundarios lógicos como una propiedad de colección dedicada que admite el acceso a colecciones como `Add`, un indexador, etc.</span><span class="sxs-lookup"><span data-stu-id="cab34-182">In most cases, you should not have to traverse the logical tree of existing controls, because these controls almost always expose their logical child elements as a dedicated collection property that supports collection access such as `Add`, an indexer, and so on.</span></span> <span data-ttu-id="cab34-183">El recorrido del árbol es principalmente un escenario que usan los autores de <xref:System.Windows.Controls.ItemsControl> <xref:System.Windows.Controls.Panel> controles que deciden no derivar de patrones de control previstos, como o donde las propiedades de colección ya están definidas, y que tienen la intención de proporcionar su propia compatibilidad con propiedades de colección.</span><span class="sxs-lookup"><span data-stu-id="cab34-183">Tree traversal is mainly a scenario that is used by control authors who choose not to derive from intended control patterns such as <xref:System.Windows.Controls.ItemsControl> or <xref:System.Windows.Controls.Panel> where collection properties are already defined, and who intend to provide their own collection property support.</span></span>  
  
 <span data-ttu-id="cab34-184">El árbol visual también admite una clase auxiliar <xref:System.Windows.Media.VisualTreeHelper>para el recorrido del árbol visual, .</span><span class="sxs-lookup"><span data-stu-id="cab34-184">The visual tree also supports a helper class for visual tree traversal, <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="cab34-185">El árbol visual no se expone tan convenientemente <xref:System.Windows.Media.VisualTreeHelper> a través de propiedades específicas del control, por lo que la clase es la forma recomendada de recorrer el árbol visual si es necesario para el escenario de programación.</span><span class="sxs-lookup"><span data-stu-id="cab34-185">The visual tree is not exposed as conveniently through control-specific properties, so the <xref:System.Windows.Media.VisualTreeHelper> class is the recommended way to traverse the visual tree if that is necessary for your programming scenario.</span></span> <span data-ttu-id="cab34-186">Para más información, consulte [Información general sobre la representación de gráficos en WPF](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cab34-186">For more information, see [WPF Graphics Rendering Overview](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cab34-187">A veces es necesario examinar el árbol visual de una plantilla aplicada.</span><span class="sxs-lookup"><span data-stu-id="cab34-187">Sometimes it is necessary to examine the visual tree of an applied template.</span></span> <span data-ttu-id="cab34-188">Se recomienda tener cuidado al usar esta técnica.</span><span class="sxs-lookup"><span data-stu-id="cab34-188">You should be careful when using this technique.</span></span> <span data-ttu-id="cab34-189">Incluso si está recorriendo un árbol visual para un control donde se define la plantilla, <xref:System.Windows.Controls.Control.Template%2A> los consumidores del control siempre pueden cambiar la plantilla estableciendo la propiedad en las instancias, e incluso el usuario final puede influir en la plantilla aplicada cambiando el tema del sistema.</span><span class="sxs-lookup"><span data-stu-id="cab34-189">Even if you are traversing a visual tree for a control where you define the template, consumers of your control can always change the template by setting the <xref:System.Windows.Controls.Control.Template%2A> property on instances, and even the end user can influence the applied template by changing the system theme.</span></span>  
  
<a name="routes"></a>
## <a name="routes-for-routed-events-as-a-tree"></a><span data-ttu-id="cab34-190">Rutas para los eventos enrutados como un "árbol"</span><span class="sxs-lookup"><span data-stu-id="cab34-190">Routes for Routed Events as a "Tree"</span></span>  
 <span data-ttu-id="cab34-191">Como se ha mencionado antes, la ruta de cualquier evento enrutado determinado recorre una sola ruta de acceso predeterminada de un árbol, que es un híbrido de las representaciones del árbol visual y del árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-191">As mentioned before, the route of any given routed event travels along a single and predetermined path of a tree that is a hybrid of the visual and logical tree representations.</span></span> <span data-ttu-id="cab34-192">La ruta de evento puede recorrer el árbol hacia arriba o hacia abajo en función de si es un evento enrutado de tunelización o de propagación.</span><span class="sxs-lookup"><span data-stu-id="cab34-192">The event route can travel either in the up or down directions within the tree depending on whether it is a tunneling or bubbling routed event.</span></span> <span data-ttu-id="cab34-193">El concepto de ruta de evento no tiene ninguna clase del asistente que lo respalde directamente y que se pueda usar para "recorrer" la ruta de evento con independencia de que se genere un evento que se enrute realmente.</span><span class="sxs-lookup"><span data-stu-id="cab34-193">The event route concept does not have a directly supporting helper class that could be used to "walk" the event route independently of raising an event that actually routes.</span></span> <span data-ttu-id="cab34-194">Hay una clase que representa <xref:System.Windows.EventRoute>la ruta, pero los métodos de esa clase son generalmente solo para uso interno.</span><span class="sxs-lookup"><span data-stu-id="cab34-194">There is a class that represents the route, <xref:System.Windows.EventRoute>, but the methods of that class are generally for internal use only.</span></span>  
  
<a name="resourcesandtrees"></a>
## <a name="resource-dictionaries-and-trees"></a><span data-ttu-id="cab34-195">Diccionarios de recursos y árboles</span><span class="sxs-lookup"><span data-stu-id="cab34-195">Resource Dictionaries and Trees</span></span>  
 <span data-ttu-id="cab34-196">La búsqueda de diccionarios de recursos para todos los `Resources` definidos en una página recorre básicamente el árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-196">Resource dictionary lookup for all `Resources` defined in a page traverses basically the logical tree.</span></span> <span data-ttu-id="cab34-197">Los objetos que no están en el árbol lógico pueden hacer referencia a recursos con clave, pero la secuencia de búsqueda de recursos se inicia en el punto donde ese objeto está conectado al árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="cab34-197">Objects that are not in the logical tree can reference keyed resources, but the resource lookup sequence begins at the point where that object is connected to the logical tree.</span></span> <span data-ttu-id="cab34-198">En WPFWPF, solo los `Resources` nodos de <xref:System.Windows.ResourceDictionary>árbol lógico pueden tener una propiedad que contenga un archivo <xref:System.Windows.ResourceDictionary>, por lo tanto, no hay ninguna ventaja en recorrer el árbol visual en busca de recursos con clave de un archivo .</span><span class="sxs-lookup"><span data-stu-id="cab34-198">In WPF, only logical tree nodes can have a `Resources` property that contains a <xref:System.Windows.ResourceDictionary>, therefore there is no benefit in traversing the visual tree looking for keyed resources from a <xref:System.Windows.ResourceDictionary>.</span></span>  
  
 <span data-ttu-id="cab34-199">Pero la búsqueda de recursos también se puede extender más allá del árbol lógico inmediato.</span><span class="sxs-lookup"><span data-stu-id="cab34-199">However, resource lookup can also extend beyond the immediate logical tree.</span></span> <span data-ttu-id="cab34-200">Para el marcado de la aplicación, la búsqueda de recursos puede continuar con los diccionarios de recursos de nivel de aplicación y, después, con los valores de compatibilidad y sistema de tema a los que se hace referencia como propiedades estáticas o claves.</span><span class="sxs-lookup"><span data-stu-id="cab34-200">For application markup, the resource lookup can then continue onward to application-level resource dictionaries and then to theme support and system values that are referenced as static properties or keys.</span></span> <span data-ttu-id="cab34-201">Los propios temas también pueden hacer referencia a valores del sistema situados fuera del árbol lógico del tema si las referencias de recurso son dinámicas.</span><span class="sxs-lookup"><span data-stu-id="cab34-201">Themes themselves can also reference system values outside of the theme logical tree if the resource references are dynamic.</span></span> <span data-ttu-id="cab34-202">Para más información sobre los diccionarios de recursos y la lógica de búsqueda, vea [Recursos XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="cab34-202">For more information on resource dictionaries and the lookup logic, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cab34-203">Consulte también</span><span class="sxs-lookup"><span data-stu-id="cab34-203">See also</span></span>

- [<span data-ttu-id="cab34-204">Información general sobre acciones del usuario</span><span class="sxs-lookup"><span data-stu-id="cab34-204">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="cab34-205">Información general sobre la representación de gráficos en WPF</span><span class="sxs-lookup"><span data-stu-id="cab34-205">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="cab34-206">Información general sobre eventos enrutados</span><span class="sxs-lookup"><span data-stu-id="cab34-206">Routed Events Overview</span></span>](routed-events-overview.md)
- [<span data-ttu-id="cab34-207">Inicialización de elementos de objeto no incluidos en un árbol de objetos</span><span class="sxs-lookup"><span data-stu-id="cab34-207">Initialization for Object Elements Not in an Object Tree</span></span>](initialization-for-object-elements-not-in-an-object-tree.md)
- [<span data-ttu-id="cab34-208">Arquitectura de WPF</span><span class="sxs-lookup"><span data-stu-id="cab34-208">WPF Architecture</span></span>](wpf-architecture.md)
