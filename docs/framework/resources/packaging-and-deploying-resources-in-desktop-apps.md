---
title: Empaquetado e implementación de recursos en aplicaciones .NET
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- deploying applications [.NET Framework], resources
- resource files, deploying
- hub-and-spoke resource deployment model
- resource files, packaging
- application resources, packaging
- single resource assembly
- satellite assemblies
- default culture for applications
- names [.NET Framework], resources
- fallback process for resources
- grouping cultures
- application resources, deploying
- application resources, naming conventions
- culture, packaging and deploying resources
- resource files, naming conventions
- packaging application resources
- application resources, fallback processes
- resource files, fallback processes
- localizing resources
- neutral cultures
ms.assetid: b224d7c0-35f8-4e82-a705-dd76795e8d16
ms.openlocfilehash: d64e3b5201e34541fdafa5724b0c7e8c3f6c0c0d
ms.sourcegitcommit: 7980a91f90ae5eca859db7e6bfa03e23e76a1a50
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/13/2020
ms.locfileid: "81243055"
---
# <a name="packaging-and-deploying-resources-in-net-apps"></a><span data-ttu-id="3897b-102">Empaquetado e implementación de recursos en aplicaciones .NET</span><span class="sxs-lookup"><span data-stu-id="3897b-102">Packaging and Deploying Resources in .NET Apps</span></span>

<span data-ttu-id="3897b-103">Las aplicaciones se basan en el Administrador de recursos de .NET Framework, representado por la clase <xref:System.Resources.ResourceManager>, para recuperar recursos localizados.</span><span class="sxs-lookup"><span data-stu-id="3897b-103">Applications rely on the .NET Framework Resource Manager, represented by the <xref:System.Resources.ResourceManager> class, to retrieve localized resources.</span></span> <span data-ttu-id="3897b-104">El Administrador de recursos da por supuesto que se usa un modelo de concentrador y radio para empaquetar e implementar los recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-104">The Resource Manager assumes that a hub and spoke model is used to package and deploy resources.</span></span> <span data-ttu-id="3897b-105">El concentrador es el ensamblado principal que contiene el código ejecutable no localizable y los recursos de una referencia cultural única, denominada referencia cultural neutra o predeterminada.</span><span class="sxs-lookup"><span data-stu-id="3897b-105">The hub is the main assembly that contains the nonlocalizable executable code and the resources for a single culture, called the neutral or default culture.</span></span> <span data-ttu-id="3897b-106">La referencia cultural predeterminada es la referencia cultural de reserva de la aplicación. Se trata de la referencia cultural cuyos recursos se usarán si no se encuentran recursos localizados.</span><span class="sxs-lookup"><span data-stu-id="3897b-106">The default culture is the fallback culture for the application; it is the culture whose resources are used if localized resources cannot be found.</span></span> <span data-ttu-id="3897b-107">Cada radio se conecta a un ensamblado satélite que contiene los recursos de una única referencia cultural, pero no contiene código.</span><span class="sxs-lookup"><span data-stu-id="3897b-107">Each spoke connects to a satellite assembly that contains the resources for a single culture, but does not contain any code.</span></span>

<span data-ttu-id="3897b-108">Este modelo cuenta con varias ventajas:</span><span class="sxs-lookup"><span data-stu-id="3897b-108">There are several advantages to this model:</span></span>

- <span data-ttu-id="3897b-109">Puede agregar recursos para nuevas referencias culturales de forma incremental después de implementar una aplicación.</span><span class="sxs-lookup"><span data-stu-id="3897b-109">You can incrementally add resources for new cultures after you have deployed an application.</span></span> <span data-ttu-id="3897b-110">Dado que el desarrollo posterior de los recursos específicos de la referencia cultural puede requerir bastante tiempo, esto permite lanzar primero la aplicación principal y entregar los recursos específicos de la referencia cultural en un momento posterior.</span><span class="sxs-lookup"><span data-stu-id="3897b-110">Because subsequent development of culture-specific resources can require a significant amount of time, this allows you to release your main application first, and deliver culture-specific resources at a later date.</span></span>
- <span data-ttu-id="3897b-111">Puede actualizar y cambiar los ensamblados satélite de una aplicación sin volver a compilarla.</span><span class="sxs-lookup"><span data-stu-id="3897b-111">You can update and change an application's satellite assemblies without recompiling the application.</span></span>
- <span data-ttu-id="3897b-112">Una aplicación solo necesita cargar los ensamblados satélite que contienen los recursos necesarios para una referencia cultural determinada.</span><span class="sxs-lookup"><span data-stu-id="3897b-112">An application needs to load only those satellite assemblies that contain the resources needed for a particular culture.</span></span> <span data-ttu-id="3897b-113">Esto puede reducir considerablemente el uso de recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="3897b-113">This can significantly reduce the use of system resources.</span></span>

 <span data-ttu-id="3897b-114">Aun así, este modelo también tiene inconvenientes:</span><span class="sxs-lookup"><span data-stu-id="3897b-114">However, there are also disadvantages to this model:</span></span>

- <span data-ttu-id="3897b-115">Debe administrar varios conjuntos de recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-115">You must manage multiple sets of resources.</span></span>
- <span data-ttu-id="3897b-116">El costo inicial de probar una aplicación es mayor, ya que se deben someter a prueba varias configuraciones.</span><span class="sxs-lookup"><span data-stu-id="3897b-116">The initial cost of testing an application increases, because you must test several configurations.</span></span> <span data-ttu-id="3897b-117">Tenga en cuenta que, a largo plazo, será más fácil y menos costoso probar una aplicación principal con varios ensamblados satélite que probar y mantener varias versiones internacionales paralelas.</span><span class="sxs-lookup"><span data-stu-id="3897b-117">Note that in the long term it will be easier and less expensive to test one core application with several satellites, than to test and maintain several parallel international versions.</span></span>

## <a name="resource-naming-conventions"></a><span data-ttu-id="3897b-118">Convenciones de nomenclatura de recursos</span><span class="sxs-lookup"><span data-stu-id="3897b-118">Resource naming conventions</span></span>

<span data-ttu-id="3897b-119">Al empaquetar los recursos de la aplicación, debe asignarles un nombre según las convenciones de nomenclatura de recursos que espera Common Language Runtime.</span><span class="sxs-lookup"><span data-stu-id="3897b-119">When you package your application's resources, you must name them using the resource naming conventions that the common language runtime expects.</span></span> <span data-ttu-id="3897b-120">El tiempo de ejecución identifica un recurso por su nombre de referencia cultural.</span><span class="sxs-lookup"><span data-stu-id="3897b-120">The runtime identifies a resource by its culture name.</span></span> <span data-ttu-id="3897b-121">Cada referencia cultural tiene un nombre único, que suele ser una combinación de un nombre de referencia cultural de dos letras en minúsculas asociado a un idioma y, si es necesario, un nombre de referencia cultural secundaria de dos letras en mayúsculas asociado a un país o región.</span><span class="sxs-lookup"><span data-stu-id="3897b-121">Each culture is given a unique name, which is usually a combination of a two-letter, lowercase culture name associated with a language and, if required, a two-letter, uppercase subculture name associated with a country or region.</span></span> <span data-ttu-id="3897b-122">El nombre de la referencia cultural secundaria va después del nombre de la referencia cultural, separado por un guion (-).</span><span class="sxs-lookup"><span data-stu-id="3897b-122">The subculture name follows the culture name, separated by a dash (-).</span></span> <span data-ttu-id="3897b-123">Algunos ejemplos son los siguientes: ja-JP para japonés de Japón, en-US para inglés de Estados Unidos, de-DE para alemán de Alemania o de-AT para alemán de Austria.</span><span class="sxs-lookup"><span data-stu-id="3897b-123">Examples include ja-JP for Japanese as spoken in Japan, en-US for English as spoken in the United States, de-DE for German as spoken in Germany, or de-AT for German as spoken in Austria.</span></span> <span data-ttu-id="3897b-124">Consulte la columna **Etiqueta de idioma** en la [lista de nombres de los idiomas y las regiones compatibles con Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span><span class="sxs-lookup"><span data-stu-id="3897b-124">See the **Language tag** column in the [list of language/region names supported by Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span></span> <span data-ttu-id="3897b-125">Los nombres de las referencias culturales siguen el estándar definido por [BCP 47](https://tools.ietf.org/html/bcp47).</span><span class="sxs-lookup"><span data-stu-id="3897b-125">Culture names follow the standard defined by [BCP 47](https://tools.ietf.org/html/bcp47).</span></span>

> [!NOTE]
> <span data-ttu-id="3897b-126">Existen algunas excepciones relativas a los nombres de referencia cultural de dos letras, como `zh-Hans` en el caso del chino (simplificado).</span><span class="sxs-lookup"><span data-stu-id="3897b-126">There are some exceptions for the two-letter culture names, such as `zh-Hans` for Chinese (Simplified).</span></span>

> [!NOTE]
> <span data-ttu-id="3897b-127">Para más información sobre cómo crear archivos de recursos, vea [Crear archivos de recursos](creating-resource-files-for-desktop-apps.md) y [Crear ensamblados satélite](creating-satellite-assemblies-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="3897b-127">For information about creating resource files, see [Creating Resource Files](creating-resource-files-for-desktop-apps.md) and [Creating Satellite Assemblies](creating-satellite-assemblies-for-desktop-apps.md).</span></span>

<a name="cpconpackagingdeployingresourcesanchor1"></a>

## <a name="the-resource-fallback-process"></a><span data-ttu-id="3897b-128">El proceso de reserva de recursos</span><span class="sxs-lookup"><span data-stu-id="3897b-128">The Resource Fallback Process</span></span>

<span data-ttu-id="3897b-129">El modelo de concentrador y radio para empaquetar e implementar recursos usa un proceso de reserva para buscar los recursos apropiados.</span><span class="sxs-lookup"><span data-stu-id="3897b-129">The hub and spoke model for packaging and deploying resources uses a fallback process to locate appropriate resources.</span></span> <span data-ttu-id="3897b-130">Si una aplicación solicita un recurso localizado que no está disponible, Common Language Runtime busca en la jerarquía de referencias culturales el recurso de reserva apropiado que coincida mejor con la solicitud de la aplicación del usuario y produce una excepción solo en última instancia.</span><span class="sxs-lookup"><span data-stu-id="3897b-130">If an application requests a localized resource  that is unavailable, the common language runtime searches the hierarchy of cultures for an appropriate fallback resource that most closely matches the user's application's request, and throws an exception only as a last resort.</span></span> <span data-ttu-id="3897b-131">El tiempo de ejecución usará el recurso apropiado, si lo encuentra, en cada nivel de la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="3897b-131">At each level of the hierarchy, if an appropriate resource is found, the runtime uses it.</span></span> <span data-ttu-id="3897b-132">Si no se encuentra el recurso, la búsqueda continúa en el siguiente nivel.</span><span class="sxs-lookup"><span data-stu-id="3897b-132">If the resource is not found, the search continues at the next level.</span></span>

<span data-ttu-id="3897b-133">Para mejorar el rendimiento de la búsqueda, aplique el atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> al ensamblado principal y pásele el nombre del idioma neutral que funcionará con el ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-133">To improve lookup performance, apply the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to your main assembly, and pass it the name of the neutral language that will work with your main assembly.</span></span>

### <a name="net-framework-resource-fallback-process"></a><span data-ttu-id="3897b-134">Proceso de reserva de recursos de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="3897b-134">.NET Framework resource fallback process</span></span>

<span data-ttu-id="3897b-135">El proceso de reserva de recursos de .NET Framework conlleva los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="3897b-135">The .NET Framework resource fallback process involves the following steps:</span></span>

> [!TIP]
> <span data-ttu-id="3897b-136">Es posible que pueda usar el elemento de configuración [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) para optimizar el proceso de reserva de recursos y el proceso mediante el cual el tiempo de ejecución sondea los ensamblados de recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-136">You may be able to use the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) configuration element to optimize the resource fallback process and the process by which the runtime probes for resource assemblies.</span></span> <span data-ttu-id="3897b-137">Para obtener más información, vea la sección [Optimizar el proceso de reserva de recursos](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing).</span><span class="sxs-lookup"><span data-stu-id="3897b-137">For more information, see the [Optimizing the Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing) section.</span></span>

1. <span data-ttu-id="3897b-138">El tiempo de ejecución busca primero en la [caché global de ensamblados](../app-domains/gac.md) un ensamblado que coincida con la referencia cultural solicitada para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3897b-138">The runtime first checks the [global assembly cache](../app-domains/gac.md) for an assembly that matches the requested culture for your application.</span></span>

     <span data-ttu-id="3897b-139">La caché global de ensamblados puede almacenar ensamblados de recursos compartidos por varias aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="3897b-139">The global assembly cache can store resource assemblies that are shared by many applications.</span></span> <span data-ttu-id="3897b-140">Esto evita tener que incluir conjuntos de recursos específicos en la estructura de directorios de cada aplicación que se cree.</span><span class="sxs-lookup"><span data-stu-id="3897b-140">This frees you from having to include specific sets of resources in the directory structure of every application you create.</span></span> <span data-ttu-id="3897b-141">Si el tiempo de ejecución encuentra una referencia al ensamblado, busca en el ensamblado el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-141">If the runtime finds a reference to the assembly, it searches the assembly for the requested resource.</span></span> <span data-ttu-id="3897b-142">Si encuentra la entrada en el ensamblado, usará el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-142">If it finds the entry in the assembly, it uses the requested resource.</span></span> <span data-ttu-id="3897b-143">Si no encuentra la entrada, seguirá con la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-143">If it doesn't find the entry, it continues the search.</span></span>

2. <span data-ttu-id="3897b-144">Después, el tiempo de ejecución busca en el directorio del ensamblado actualmente en ejecución un subdirectorio que coincida con la referencia cultural solicitada.</span><span class="sxs-lookup"><span data-stu-id="3897b-144">The runtime next checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="3897b-145">Si lo encuentra, busca en ese subdirectorio un ensamblado satélite válido para la referencia cultural solicitada.</span><span class="sxs-lookup"><span data-stu-id="3897b-145">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture.</span></span> <span data-ttu-id="3897b-146">Luego, el tiempo de ejecución busca en el ensamblado satélite el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-146">The runtime then searches the satellite assembly for the requested resource.</span></span> <span data-ttu-id="3897b-147">Si encuentra el recurso en el ensamblado, lo usará.</span><span class="sxs-lookup"><span data-stu-id="3897b-147">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="3897b-148">Si no encuentra el recurso, seguirá con la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-148">If it doesn't find the resource, it continues the search.</span></span>

3. <span data-ttu-id="3897b-149">Después, el tiempo de ejecución consulta Windows Installer para determinar si el ensamblado satélite se va a instalar a petición.</span><span class="sxs-lookup"><span data-stu-id="3897b-149">The runtime next queries the Windows Installer to determine whether the satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="3897b-150">Si es así, controla la instalación, carga el ensamblado y busca en él el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-150">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="3897b-151">Si encuentra el recurso en el ensamblado, lo usará.</span><span class="sxs-lookup"><span data-stu-id="3897b-151">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="3897b-152">Si no encuentra el recurso, seguirá con la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-152">If it doesn't find the resource, it continues the search.</span></span>

4. <span data-ttu-id="3897b-153">El tiempo de ejecución genera el evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> para indicar que no ha podido encontrar el ensamblado satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-153">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="3897b-154">Si opta por controlar el evento, el controlador de eventos puede devolver una referencia al ensamblado satélite cuyos recursos se usarán para la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-154">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="3897b-155">En caso contrario, el controlador de eventos devuelve `null` y continúa la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-155">Otherwise, the event handler returns `null` and the search continues.</span></span>

5. <span data-ttu-id="3897b-156">Luego, el tiempo de ejecución busca de nuevo en la caché global de ensamblados el ensamblado principal de la referencia cultural solicitada.</span><span class="sxs-lookup"><span data-stu-id="3897b-156">The runtime next searches the global assembly cache again, this time for the parent assembly of the requested culture.</span></span> <span data-ttu-id="3897b-157">Si el ensamblado principal existe en la caché global de ensamblados, el tiempo de ejecución busca en el ensamblado el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-157">If the parent assembly exists in the global assembly cache, the runtime searches the assembly for the requested resource.</span></span>

     <span data-ttu-id="3897b-158">La referencia cultural principal se define como la referencia cultural de reserva adecuada.</span><span class="sxs-lookup"><span data-stu-id="3897b-158">The parent culture is defined as the appropriate fallback culture.</span></span> <span data-ttu-id="3897b-159">Considere los elementos principales como candidatos de reserva, porque es preferible proporcionar cualquier recurso antes que producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="3897b-159">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="3897b-160">Este proceso también permite reutilizar los recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-160">This process also allows you to reuse resources.</span></span> <span data-ttu-id="3897b-161">Debe incluir un recurso determinado en el nivel principal solo si la referencia cultural secundaria no necesita localizar el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-161">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="3897b-162">Por ejemplo, si proporciona ensamblados satélite para `en` (inglés neutro), `en-GB` (inglés del Reino Unido) y `en-US` (inglés de Estados Unidos), el satélite `en` contendrá la terminología común, mientras que los satélites `en-GB` y `en-US` proporcionarán invalidaciones solo para los términos que difieren.</span><span class="sxs-lookup"><span data-stu-id="3897b-162">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite would contain the common terminology, and the `en-GB` and `en-US` satellites could provide overrides for only those terms that differ.</span></span>

6. <span data-ttu-id="3897b-163">Después, el tiempo de ejecución busca en el directorio del ensamblado actualmente en ejecución para ver si contiene un directorio principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-163">The runtime next checks the directory of the currently executing assembly to see if it contains a parent directory.</span></span> <span data-ttu-id="3897b-164">Si existe un directorio principal, el tiempo de ejecución busca en el directorio un ensamblado satélite válido para la referencia cultural principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-164">If a parent directory exists, the runtime searches the directory for a valid satellite assembly for the parent culture.</span></span> <span data-ttu-id="3897b-165">Si encuentra el ensamblado, el tiempo de ejecución busca en el ensamblado el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-165">If it finds the assembly, the runtime searches the assembly for the requested resource.</span></span> <span data-ttu-id="3897b-166">Si encuentra el recurso, lo usará.</span><span class="sxs-lookup"><span data-stu-id="3897b-166">If it finds the resource, it uses it.</span></span> <span data-ttu-id="3897b-167">Si no encuentra el recurso, seguirá con la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-167">If it doesn't find the resource, it continues the search.</span></span>

7. <span data-ttu-id="3897b-168">Después, el tiempo de ejecución consulta Windows Installer para determinar si el ensamblado satélite principal se va a instalar a petición.</span><span class="sxs-lookup"><span data-stu-id="3897b-168">The runtime next queries the Windows Installer to determine whether the parent satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="3897b-169">Si es así, controla la instalación, carga el ensamblado y busca en él el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-169">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="3897b-170">Si encuentra el recurso en el ensamblado, lo usará.</span><span class="sxs-lookup"><span data-stu-id="3897b-170">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="3897b-171">Si no encuentra el recurso, seguirá con la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-171">If it doesn't find the resource, it continues the search.</span></span>

8. <span data-ttu-id="3897b-172">El tiempo de ejecución genera el evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> para indicar que no ha podido encontrar un recurso de reserva apropiado.</span><span class="sxs-lookup"><span data-stu-id="3897b-172">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find an appropriate fallback resource.</span></span> <span data-ttu-id="3897b-173">Si opta por controlar el evento, el controlador de eventos puede devolver una referencia al ensamblado satélite cuyos recursos se usarán para la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-173">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="3897b-174">En caso contrario, el controlador de eventos devuelve `null` y continúa la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-174">Otherwise, the event handler returns `null` and the search continues.</span></span>

9. <span data-ttu-id="3897b-175">Después, el tiempo de ejecución busca ensamblados principales, como en los tres pasos anteriores, en varios niveles posibles.</span><span class="sxs-lookup"><span data-stu-id="3897b-175">The runtime next searches parent assemblies, as in the previous three steps, through many potential levels.</span></span> <span data-ttu-id="3897b-176">Cada referencia cultural tiene un solo elemento principal, que se define mediante la propiedad <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, pero un elemento principal puede tener su propio elemento principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-176">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="3897b-177">La búsqueda de referencias culturales principales se detiene cuando la propiedad <xref:System.Globalization.CultureInfo.Parent%2A> de una referencia cultural devuelve <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>. Para la reserva de recursos, la referencia cultural invariable no se considera una referencia cultural principal ni una referencia cultural que pueda tener recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-177">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>; for resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

10. <span data-ttu-id="3897b-178">Si se ha buscado en la referencia cultural especificada inicialmente y en todos los elementos principales y el recurso sigue sin encontrarse, se usa el recurso de la referencia cultural predeterminada (de reserva).</span><span class="sxs-lookup"><span data-stu-id="3897b-178">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="3897b-179">Normalmente, los recursos de la referencia cultural predeterminada se incluyen en el ensamblado de la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-179">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="3897b-180">Aun así, puede especificar un valor de <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> para la propiedad <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> del atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> para indicar que la ubicación de reserva definitiva para los recursos es un ensamblado satélite, en lugar del ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-180">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property of the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the ultimate fallback location for resources is a satellite assembly, rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3897b-181">El recurso predeterminado es el único recurso que se puede compilar con el ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-181">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="3897b-182">A menos que especifique un ensamblado satélite mediante el atributo <xref:System.Resources.NeutralResourcesLanguageAttribute>, es la reserva definitiva (elemento principal final).</span><span class="sxs-lookup"><span data-stu-id="3897b-182">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="3897b-183">Por lo tanto, se recomienda incluir siempre un conjunto de recursos predeterminado en el ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-183">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="3897b-184">Esto ayuda a evitar que se produzcan excepciones.</span><span class="sxs-lookup"><span data-stu-id="3897b-184">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="3897b-185">Al incluir un archivo de recursos predeterminado, se proporciona una reserva para todos los recursos y se garantiza que al menos un recurso esté siempre presente para el usuario, incluso si no es específico de la referencia cultural.</span><span class="sxs-lookup"><span data-stu-id="3897b-185">By including a default resource, file you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

11. <span data-ttu-id="3897b-186">Por último, si el tiempo de ejecución no encuentra un recurso para una referencia cultural predeterminada (de reserva), se produce una excepción <xref:System.Resources.MissingManifestResourceException> o <xref:System.Resources.MissingSatelliteAssemblyException> para indicar que no se pudo encontrar el recurso.</span><span class="sxs-lookup"><span data-stu-id="3897b-186">Finally, if the runtime doesn't find a resource for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span>

<span data-ttu-id="3897b-187">Por ejemplo, supongamos que la aplicación solicita un recurso localizado para español (México) (referencia cultural `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="3897b-187">For example, suppose the application requests a resource localized for Spanish (Mexico) (the `es-MX` culture).</span></span> <span data-ttu-id="3897b-188">El tiempo de ejecución busca primero en la caché global de ensamblados el ensamblado que coincida con `es-MX`, pero no lo encuentra.</span><span class="sxs-lookup"><span data-stu-id="3897b-188">The runtime first searches the global assembly cache for the assembly that matches `es-MX`, but doesn't find it.</span></span> <span data-ttu-id="3897b-189">Después, el tiempo de ejecución busca un directorio `es-MX` en el directorio del ensamblado actualmente en ejecución.</span><span class="sxs-lookup"><span data-stu-id="3897b-189">The runtime then searches the directory of the currently executing assembly for an `es-MX` directory.</span></span> <span data-ttu-id="3897b-190">Si esto no funciona, el tiempo de ejecución busca de nuevo en la caché global de ensamblados un ensamblado principal que refleje la referencia cultural de reserva adecuada, en este caso, `es` (español).</span><span class="sxs-lookup"><span data-stu-id="3897b-190">Failing that, the runtime searches the global assembly cache again for a parent assembly that reflects the appropriate fallback culture — in this case, `es` (Spanish).</span></span> <span data-ttu-id="3897b-191">Si no se encuentra el ensamblado principal, el tiempo de ejecución busca en todos los posibles niveles de ensamblados principales la referencia cultural `es-MX` hasta que encuentra un recurso correspondiente.</span><span class="sxs-lookup"><span data-stu-id="3897b-191">If the parent assembly is not found, the runtime searches all potential levels of parent assemblies for the `es-MX` culture until it finds a corresponding resource.</span></span> <span data-ttu-id="3897b-192">Si no se encuentra un recurso, el tiempo de ejecución usa el recurso para la referencia cultural predeterminada.</span><span class="sxs-lookup"><span data-stu-id="3897b-192">If a resource isn't found, the runtime uses the resource for the default culture.</span></span>

<a name="Optimizing"></a>

#### <a name="optimizing-the-net-framework-resource-fallback-process"></a><span data-ttu-id="3897b-193">Optimización del proceso de reserva de recursos de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="3897b-193">Optimizing the .NET Framework Resource Fallback Process</span></span>

<span data-ttu-id="3897b-194">En las siguientes condiciones, puede optimizar el proceso por el que el tiempo de ejecución busca recursos en ensamblados satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-194">Under the following conditions, you can optimize the process by which the runtime searches for resources in satellite assemblies</span></span>

- <span data-ttu-id="3897b-195">Los ensamblados satélite se implementan en la misma ubicación que el ensamblado de código.</span><span class="sxs-lookup"><span data-stu-id="3897b-195">Satellite assemblies are deployed in the same location as the code assembly.</span></span> <span data-ttu-id="3897b-196">Si el ensamblado de código está instalado en la [caché global de ensamblados](../app-domains/gac.md), los ensamblados satélite también se instalan en la caché global de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="3897b-196">If the code assembly is installed in the [Global Assembly Cache](../app-domains/gac.md), satellite assemblies are also installed in the global assembly cache.</span></span> <span data-ttu-id="3897b-197">Si el ensamblado de código está instalado en un directorio, los ensamblados satélite se instalan en carpetas específicas de referencias culturales de ese directorio.</span><span class="sxs-lookup"><span data-stu-id="3897b-197">If the code assembly is installed in a directory, satellite assemblies are installed in culture-specific folders of that directory.</span></span>

- <span data-ttu-id="3897b-198">Los ensamblados satélite no se instalan a petición.</span><span class="sxs-lookup"><span data-stu-id="3897b-198">Satellite assemblies are not installed on demand.</span></span>

- <span data-ttu-id="3897b-199">El código de la aplicación no controla el evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3897b-199">Application code does not handle the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

<span data-ttu-id="3897b-200">Para optimizar el sondeo de ensamblados satélite, incluya el elemento [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) y establezca su atributo `enabled` en `true` en el archivo de configuración de la aplicación, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="3897b-200">You optimize the probe for satellite assemblies by including the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element and setting its `enabled` attribute to `true` in the application configuration file, as shown in the following example.</span></span>

```xml
<configuration>
   <runtime>
      <relativeBindForResources enabled="true" />
   </runtime>
</configuration>
```

<span data-ttu-id="3897b-201">El sondeo optimizado de los ensamblados satélite es una característica opcional.</span><span class="sxs-lookup"><span data-stu-id="3897b-201">The optimized probe for satellite assemblies is an opt-in feature.</span></span> <span data-ttu-id="3897b-202">Es decir, el tiempo de ejecución sigue los pasos documentados en [El proceso de reserva de recursos](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1), a menos que el elemento [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) esté presente en el archivo de configuración de la aplicación y su atributo `enabled` esté establecido en `true`.</span><span class="sxs-lookup"><span data-stu-id="3897b-202">That is, the runtime follows the steps documented in [The Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) unless the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element is present in the application's configuration file and its `enabled` attribute is set to `true`.</span></span> <span data-ttu-id="3897b-203">Si este es el caso, el proceso de sondeo de un ensamblado satélite se modifica de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="3897b-203">If this is the case, the process of probing for a satellite assembly is modified as follows:</span></span>

- <span data-ttu-id="3897b-204">El tiempo de ejecución usa la ubicación del ensamblado de código principal para sondear el ensamblado satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-204">The runtime uses the location of the parent code assembly to probe for the satellite assembly.</span></span> <span data-ttu-id="3897b-205">Si el ensamblado principal está instalado en la caché global de ensamblados, el tiempo de ejecución sondea la memoria caché, pero no el directorio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3897b-205">If the parent assembly is installed in the global assembly cache, the runtime probes in the cache but not in the application's directory.</span></span> <span data-ttu-id="3897b-206">Si el ensamblado principal está instalado en un directorio de aplicación, el tiempo de ejecución sondea el directorio de la aplicación, pero no la caché global de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="3897b-206">If the parent assembly is installed in an application directory, the runtime probes in the application directory but not in the global assembly cache.</span></span>

- <span data-ttu-id="3897b-207">El tiempo de ejecución no consulta Windows Installer para la instalación a petición de ensamblados satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-207">The runtime doesn't query the Windows Installer for on-demand installation of satellite assemblies.</span></span>

- <span data-ttu-id="3897b-208">Si se produce un error en el sondeo de un ensamblado de recurso en particular, el tiempo de ejecución no genera el evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3897b-208">If the probe for a particular resource assembly fails, the runtime does not raise the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

### <a name="net-core-resource-fallback-process"></a><span data-ttu-id="3897b-209">Proceso de reserva de recursos de .NET Core</span><span class="sxs-lookup"><span data-stu-id="3897b-209">.NET Core resource fallback process</span></span>

<span data-ttu-id="3897b-210">El proceso de reserva de recursos de .NET Core conlleva los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="3897b-210">The .NET Core resource fallback process involves the following steps:</span></span>

1. <span data-ttu-id="3897b-211">El entorno de ejecución intenta cargar un ensamblado satélite para la referencia cultural solicitada.</span><span class="sxs-lookup"><span data-stu-id="3897b-211">The runtime attempts to load a satellite assembly for the requested culture.</span></span>
     - <span data-ttu-id="3897b-212">Busca en el directorio del ensamblado actualmente en ejecución un directorio que coincida con la referencia cultural solicitada.</span><span class="sxs-lookup"><span data-stu-id="3897b-212">Checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="3897b-213">Si lo encuentra, busca en ese directorio un ensamblado satélite válido para la referencia cultural solicitada y lo carga.</span><span class="sxs-lookup"><span data-stu-id="3897b-213">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture and loads it.</span></span>

       > [!NOTE]
       > <span data-ttu-id="3897b-214">En sistemas operativos con sistemas de archivos que distinguen mayúsculas de minúsculas (es decir, Linux y macOS), la búsqueda del subdirectorio de nombres de referencias culturales distingue mayúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="3897b-214">On operating systems with case-sensitive file systems (that is, Linux and macOS), the culture name subdirectory search is case-sensitive.</span></span> <span data-ttu-id="3897b-215">El nombre del subdirectorio debe coincidir exactamente con las mayúsculas y minúsculas de <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (por ejemplo, `es` o `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="3897b-215">The subdirectory name must exactly match the case of the <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (for example, `es` or `es-MX`).</span></span>

       > [!NOTE]
       > <span data-ttu-id="3897b-216">Si el programador ha derivado un contexto local de ensamblado personalizado de <xref:System.Runtime.Loader.AssemblyLoadContext>, la situación es complicada.</span><span class="sxs-lookup"><span data-stu-id="3897b-216">If the programmer has derived a custom assembly load context from <xref:System.Runtime.Loader.AssemblyLoadContext>, the situation is complicated.</span></span> <span data-ttu-id="3897b-217">Si el ensamblado que se ejecuta se cargó en el contexto personalizado, el entorno de ejecución carga el ensamblado satélite en el contexto personalizado.</span><span class="sxs-lookup"><span data-stu-id="3897b-217">If the executing assembly was loaded into the custom context, the runtime loads the satellite assembly into the custom context.</span></span> <span data-ttu-id="3897b-218">Los detalles quedan fuera del ámbito de este documento.</span><span class="sxs-lookup"><span data-stu-id="3897b-218">The details are out of scope for this document.</span></span> <span data-ttu-id="3897b-219">Consulte <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="3897b-219">See  <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>

     - <span data-ttu-id="3897b-220">Si no se encuentra un ensamblado satélite, <xref:System.Runtime.Loader.AssemblyLoadContext> genera el evento <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> para indicar que no se puede encontrarlo.</span><span class="sxs-lookup"><span data-stu-id="3897b-220">If a satellite assemble has not been found, the <xref:System.Runtime.Loader.AssemblyLoadContext> raises the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="3897b-221">Si opta por controlar el evento, el controlador de eventos puede cargar y devolver una referencia al ensamblado satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-221">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>
     - <span data-ttu-id="3897b-222">Si todavía no se encuentra un ensamblado satélite, AssemblyLoadContext hace que AppDomain desencadene un evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> para indicar que no es posible encontrar el ensamblado satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-222">If a satellite assembly still has not been found, the AssemblyLoadContext causes the AppDomain to trigger an <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="3897b-223">Si opta por controlar el evento, el controlador de eventos puede cargar y devolver una referencia al ensamblado satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-223">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>

2. <span data-ttu-id="3897b-224">Si se encuentra un ensamblado satélite, el entorno de ejecución lo busca para el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-224">If a satellite assembly is found, the runtime searches it for the requested resource.</span></span> <span data-ttu-id="3897b-225">Si encuentra el recurso en el ensamblado, lo usará.</span><span class="sxs-lookup"><span data-stu-id="3897b-225">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="3897b-226">Si no encuentra el recurso, seguirá con la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="3897b-226">If it doesn't find the resource, it continues the search.</span></span>

     > [!NOTE]
     > <span data-ttu-id="3897b-227">Para buscar un recurso dentro del ensamblado satélite, el entorno de ejecución busca el archivo de recursos solicitado por <xref:System.Resources.ResourceManager> para el <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> actual.</span><span class="sxs-lookup"><span data-stu-id="3897b-227">To find a resource within the satellite assembly, the runtime searches for the resource file requested by the <xref:System.Resources.ResourceManager> for the current <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>.</span></span> <span data-ttu-id="3897b-228">Dentro del archivo de recursos, busca el nombre del recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-228">Within the resource file it searches for the requested resource name.</span></span> <span data-ttu-id="3897b-229">Si no se encuentra ninguno, se considera que no se encontró el recurso.</span><span class="sxs-lookup"><span data-stu-id="3897b-229">If either is not found, the resource is treated as not found.</span></span>

3. <span data-ttu-id="3897b-230">A continuación, el entorno de ejecución busca los ensamblados de referencias culturales principales a través de muchos niveles potenciales, y repite cada vez los pasos 1 y 2.</span><span class="sxs-lookup"><span data-stu-id="3897b-230">The runtime next searches the parent culture assemblies through many potential levels, each time repeating steps 1 & 2.</span></span>

     <span data-ttu-id="3897b-231">La referencia cultural principal se define como una referencia cultural de reserva adecuada.</span><span class="sxs-lookup"><span data-stu-id="3897b-231">The parent culture is defined as an appropriate fallback culture.</span></span> <span data-ttu-id="3897b-232">Considere los elementos principales como candidatos de reserva, porque es preferible proporcionar cualquier recurso antes que producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="3897b-232">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="3897b-233">Este proceso también permite reutilizar los recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-233">This process also allows you to reuse resources.</span></span> <span data-ttu-id="3897b-234">Debe incluir un recurso determinado en el nivel principal solo si la referencia cultural secundaria no necesita localizar el recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="3897b-234">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="3897b-235">Por ejemplo, si proporciona ensamblados satélite para `en` (inglés neutro), `en-GB` (inglés del Reino Unido) y `en-US` (inglés de Estados Unidos), el satélite `en` contiene la terminología común, mientras que los satélites `en-GB` y `en-US` proporcionarán invalidaciones solo para los términos que difieren.</span><span class="sxs-lookup"><span data-stu-id="3897b-235">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite contains the common terminology, and the `en-GB` and `en-US` satellites provides overrides for only those terms that differ.</span></span>

     <span data-ttu-id="3897b-236">Cada referencia cultural tiene un solo elemento principal, que se define mediante la propiedad <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, pero un elemento principal puede tener su propio elemento principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-236">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="3897b-237">La búsqueda de las referencias culturales principales se detiene cuando la propiedad <xref:System.Globalization.CultureInfo.Parent%2A> de una referencia cultural devuelve <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3897b-237">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="3897b-238">Para la reserva de recursos, la referencia cultural invariable no se considera como una referencia cultural principal ni como una referencia cultural que puede tener recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-238">For resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

4. <span data-ttu-id="3897b-239">Si se ha buscado en la referencia cultural especificada inicialmente y en todos los elementos principales y el recurso sigue sin encontrarse, se usa el recurso de la referencia cultural predeterminada (de reserva).</span><span class="sxs-lookup"><span data-stu-id="3897b-239">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="3897b-240">Normalmente, los recursos de la referencia cultural predeterminada se incluyen en el ensamblado de la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-240">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="3897b-241">Aun así, puede especificar un valor de <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> para la propiedad <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> para indicar que la ubicación de reserva definitiva para los recursos es un ensamblado satélite, en lugar del ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-241">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property to indicate that the ultimate fallback location for resources is a satellite assembly rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3897b-242">El recurso predeterminado es el único recurso que se puede compilar con el ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-242">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="3897b-243">A menos que especifique un ensamblado satélite mediante el atributo <xref:System.Resources.NeutralResourcesLanguageAttribute>, es la reserva definitiva (elemento principal final).</span><span class="sxs-lookup"><span data-stu-id="3897b-243">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="3897b-244">Por lo tanto, se recomienda incluir siempre un conjunto de recursos predeterminado en el ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="3897b-244">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="3897b-245">Esto ayuda a evitar que se produzcan excepciones.</span><span class="sxs-lookup"><span data-stu-id="3897b-245">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="3897b-246">Al incluir un archivo de recursos predeterminado, se proporciona una reserva para todos los recursos y se garantiza que al menos un recurso esté siempre presente para el usuario, incluso si no es específico de la referencia cultural.</span><span class="sxs-lookup"><span data-stu-id="3897b-246">By including a default resource file, you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

5. <span data-ttu-id="3897b-247">Por último, si el tiempo de ejecución no encuentra un archivo de recursos para una referencia cultural predeterminada (de reserva), se produce una excepción <xref:System.Resources.MissingManifestResourceException> o <xref:System.Resources.MissingSatelliteAssemblyException> para indicar que no se pudo encontrar el recurso.</span><span class="sxs-lookup"><span data-stu-id="3897b-247">Finally, if the runtime doesn't find a resource file for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span> <span data-ttu-id="3897b-248">Si se encuentra el archivo de recursos pero el recurso solicitado no se encuentra, la solicitud devuelve `null`.</span><span class="sxs-lookup"><span data-stu-id="3897b-248">If the resource file is found but the requested resource is not present the request returns `null`.</span></span>

### <a name="ultimate-fallback-to-satellite-assembly"></a><span data-ttu-id="3897b-249">Reserva definitiva en ensamblado satélite</span><span class="sxs-lookup"><span data-stu-id="3897b-249">Ultimate Fallback to Satellite Assembly</span></span>

<span data-ttu-id="3897b-250">Como alternativa, puede quitar recursos del ensamblado principal y especificar que el tiempo de ejecución debe cargar los recursos de reserva definitiva de un ensamblado satélite correspondiente a una referencia cultural específica.</span><span class="sxs-lookup"><span data-stu-id="3897b-250">You can optionally remove resources from the main assembly and specify that the runtime should load the ultimate fallback resources from a satellite assembly that corresponds to a specific culture.</span></span> <span data-ttu-id="3897b-251">Para controlar el proceso de reserva, use el constructor <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> y proporcione un valor para el parámetro <xref:System.Resources.UltimateResourceFallbackLocation> que especifique si el Administrador de recursos debe extraer los recursos de reserva del ensamblado principal o de un ensamblado satélite.</span><span class="sxs-lookup"><span data-stu-id="3897b-251">To control the fallback process, you use the <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> constructor and supply a value for the <xref:System.Resources.UltimateResourceFallbackLocation> parameter that specifies whether Resource Manager should extract the fallback resources from the main assembly or from a satellite assembly.</span></span>

<span data-ttu-id="3897b-252">En el ejemplo de .NET Framework siguiente se usa el atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> para almacenar los recursos de reserva de una aplicación en un ensamblado satélite para el idioma francés (`fr`).</span><span class="sxs-lookup"><span data-stu-id="3897b-252">The following .NET Framework example uses the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to store an application's fallback resources in a satellite assembly for the French (`fr`) language.</span></span> <span data-ttu-id="3897b-253">El ejemplo tiene dos archivos de recursos basados en texto que definen un recurso de cadena única denominado `Greeting`.</span><span class="sxs-lookup"><span data-stu-id="3897b-253">The example has two text-based resource files that define a single string resource named `Greeting`.</span></span> <span data-ttu-id="3897b-254">El primero, resources.fr.txt, contiene un recurso de idioma francés.</span><span class="sxs-lookup"><span data-stu-id="3897b-254">The first, resources.fr.txt, contains a French language resource.</span></span>

```text
Greeting=Bon jour!
```

<span data-ttu-id="3897b-255">El segundo, resources.ru.txt, contiene un recurso de idioma ruso.</span><span class="sxs-lookup"><span data-stu-id="3897b-255">The second, resources,ru.txt, contains a Russian language resource.</span></span>

```text
Greeting=Добрый день
```

<span data-ttu-id="3897b-256">Estos dos archivos se compilan en archivos .resources al ejecutar el [generador de archivos de recursos (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) desde la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="3897b-256">These two files are compiled to .resources files by running the [resource file generator (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) from the command line.</span></span> <span data-ttu-id="3897b-257">Para el recurso de idioma francés, el comando es:</span><span class="sxs-lookup"><span data-stu-id="3897b-257">For the French language resource, the command is:</span></span>

<span data-ttu-id="3897b-258">**resgen.exe resources.fr.txt**</span><span class="sxs-lookup"><span data-stu-id="3897b-258">**resgen.exe resources.fr.txt**</span></span>

<span data-ttu-id="3897b-259">Para el recurso de idioma ruso, el comando es:</span><span class="sxs-lookup"><span data-stu-id="3897b-259">For the Russian language resource, the command is:</span></span>

<span data-ttu-id="3897b-260">**resgen.exe resources.ru.txt**</span><span class="sxs-lookup"><span data-stu-id="3897b-260">**resgen.exe resources.ru.txt**</span></span>

<span data-ttu-id="3897b-261">Los archivos .resources se insertan en bibliotecas de vínculos dinámicos mediante la ejecución de [Assembly Linker (Al.exe)](../tools/al-exe-assembly-linker.md) desde la línea de comandos para el recurso de idioma francés de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="3897b-261">The .resources files are embedded into dynamic link libraries by running [assembly linker (Al.exe)](../tools/al-exe-assembly-linker.md) from the command line for the French language resource as follows:</span></span>

<span data-ttu-id="3897b-262">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="3897b-262">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span></span>

<span data-ttu-id="3897b-263">y para el recurso de idioma ruso de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="3897b-263">and for the Russian language resource as follows:</span></span>

<span data-ttu-id="3897b-264">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="3897b-264">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span></span>

<span data-ttu-id="3897b-265">El código fuente de la aplicación reside en un archivo denominado Example1.cs o Example1.vb.</span><span class="sxs-lookup"><span data-stu-id="3897b-265">The application source code resides in a file named Example1.cs or Example1.vb.</span></span> <span data-ttu-id="3897b-266">Incluye el atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> para indicar que el recurso de aplicación predeterminado se encuentra en el subdirectorio fr.</span><span class="sxs-lookup"><span data-stu-id="3897b-266">It includes the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the default application resource is in the fr subdirectory.</span></span> <span data-ttu-id="3897b-267">Crea una instancia del Administrador de recursos, recupera el valor del recurso `Greeting` y lo muestra en la consola.</span><span class="sxs-lookup"><span data-stu-id="3897b-267">It instantiates the Resource Manager, retrieves the value of the `Greeting` resource, and displays it to the console.</span></span>

[!code-csharp[Conceptual.Resources.Packaging#1](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.resources.packaging/cs/example1.cs#1)]
[!code-vb[Conceptual.Resources.Packaging#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.resources.packaging/vb/example1.vb#1)]

<span data-ttu-id="3897b-268">Después, puede compilar código fuente de C# desde la línea de comandos de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="3897b-268">You can then compile C# source code from the command line as follows:</span></span>

```console
csc Example1.cs
```

<span data-ttu-id="3897b-269">El comando para el compilador de Visual Basic es muy parecido:</span><span class="sxs-lookup"><span data-stu-id="3897b-269">The command for the Visual Basic compiler is very similar:</span></span>

```console
vbc Example1.vb
```

<span data-ttu-id="3897b-270">Dado que no hay ningún recurso insertado en el ensamblado principal, no es necesario compilar con el modificador `/resource`.</span><span class="sxs-lookup"><span data-stu-id="3897b-270">Because there are no resources embedded in the main assembly, you do not have to compile by using the `/resource` switch.</span></span>

<span data-ttu-id="3897b-271">Cuando se ejecute el ejemplo desde un sistema cuyo idioma sea distinto del ruso, se mostrará la salida siguiente:</span><span class="sxs-lookup"><span data-stu-id="3897b-271">When you run the example from a system whose language is anything other than Russian, it displays the following output:</span></span>

```output
Bon jour!
```

## <a name="suggested-packaging-alternative"></a><span data-ttu-id="3897b-272">Alternativa de empaquetado sugerida</span><span class="sxs-lookup"><span data-stu-id="3897b-272">Suggested Packaging Alternative</span></span>

<span data-ttu-id="3897b-273">Las restricciones de tiempo o de presupuesto podrían impedir la creación de un conjunto de recursos para cada una de las referencias culturales secundarias que admite la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3897b-273">Time or budget constraints might prevent you from creating a set of resources for every subculture that your application supports.</span></span> <span data-ttu-id="3897b-274">En su lugar, puede crear un único ensamblado satélite para la referencia cultural principal que todas las referencias culturales secundarias relacionadas puedan usar.</span><span class="sxs-lookup"><span data-stu-id="3897b-274">Instead, you can create a single satellite assembly for a parent culture that all related subcultures can use.</span></span> <span data-ttu-id="3897b-275">Por ejemplo, puede proporcionar un único ensamblado satélite en inglés (en) para que lo recuperen los usuarios que soliciten recursos en inglés específicos de una región y un único ensamblado satélite en alemán (de) para los usuarios que soliciten recursos en alemán específicos de una región.</span><span class="sxs-lookup"><span data-stu-id="3897b-275">For example, you can provide a single English satellite assembly (en) that is retrieved by users who request region-specific English resources, and a single German satellite assembly (de) for users who request region-specific German resources.</span></span> <span data-ttu-id="3897b-276">Por ejemplo, las solicitudes de alemán de Alemania (de-DE), Austria (de-AT) y Suiza (de-CH) recurrirán al ensamblado satélite en alemán (de).</span><span class="sxs-lookup"><span data-stu-id="3897b-276">For example, requests for German as spoken in Germany (de-DE), Austria (de-AT), and Switzerland (de-CH) would fall back to the German satellite assembly (de).</span></span> <span data-ttu-id="3897b-277">Los recursos predeterminados constituyen la reserva final y, por tanto, deben ser los recursos que solicitará la mayoría de los usuarios de la aplicación, por lo que debe elegir cuidadosamente estos recursos.</span><span class="sxs-lookup"><span data-stu-id="3897b-277">The default resources are the final fallback and therefore should be the resources that will be requested by the majority of your application's users, so choose these resources carefully.</span></span> <span data-ttu-id="3897b-278">Este método implementa recursos menos específicos de la referencia cultural, pero puede reducir considerablemente los costos de localización de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3897b-278">This approach deploys resources that are less culturally specific, but can significantly reduce your application's localization costs.</span></span>

## <a name="see-also"></a><span data-ttu-id="3897b-279">Vea también</span><span class="sxs-lookup"><span data-stu-id="3897b-279">See also</span></span>

- [<span data-ttu-id="3897b-280">Recursos de aplicaciones de escritorio</span><span class="sxs-lookup"><span data-stu-id="3897b-280">Resources in Desktop Apps</span></span>](index.md)
- [<span data-ttu-id="3897b-281">Caché global de ensamblados</span><span class="sxs-lookup"><span data-stu-id="3897b-281">Global Assembly Cache</span></span>](../app-domains/gac.md)
- [<span data-ttu-id="3897b-282">Crear archivos de recursos</span><span class="sxs-lookup"><span data-stu-id="3897b-282">Creating Resource Files</span></span>](creating-resource-files-for-desktop-apps.md)
- [<span data-ttu-id="3897b-283">Crear ensamblados satélite</span><span class="sxs-lookup"><span data-stu-id="3897b-283">Creating Satellite Assemblies</span></span>](creating-satellite-assemblies-for-desktop-apps.md)
