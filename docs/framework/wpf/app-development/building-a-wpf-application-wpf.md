---
title: Compilar una aplicación
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WPF application [WPF], building
ms.assetid: a58696fd-bdad-4b55-9759-136dfdf8b91c
ms.openlocfilehash: 00c76dfcdcedc7ceaefaaae785368f8b343457a7
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/24/2020
ms.locfileid: "76744768"
---
# <a name="compile-a-wpf-application"></a><span data-ttu-id="4319c-102">Compilar una aplicación WPF</span><span class="sxs-lookup"><span data-stu-id="4319c-102">Compile a WPF Application</span></span>

<span data-ttu-id="4319c-103">Las aplicaciones Windows Presentation Foundation (WPF) se pueden compilar como .NET Framework ejecutables (. exe), bibliotecas (. dll) o una combinación de ambos tipos de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="4319c-103">Windows Presentation Foundation (WPF) applications can be built as .NET Framework executables (.exe), libraries (.dll), or a combination of both types of assemblies.</span></span> <span data-ttu-id="4319c-104">En este tema se presenta cómo crear aplicaciones de WPF y se describen los pasos clave del proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="4319c-104">This topic introduces how to build WPF applications and describes the key steps in the build process.</span></span>

<a name="Building_a_WPF_Application_using_Command_Line"></a>

## <a name="building-a-wpf-application"></a><span data-ttu-id="4319c-105">Compilar una aplicación de WPF</span><span class="sxs-lookup"><span data-stu-id="4319c-105">Building a WPF Application</span></span>

<span data-ttu-id="4319c-106">Una aplicación WPF se puede compilar de las maneras siguientes:</span><span class="sxs-lookup"><span data-stu-id="4319c-106">A WPF application can be compiled in the following ways:</span></span>

- <span data-ttu-id="4319c-107">Línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="4319c-107">Command-line.</span></span> <span data-ttu-id="4319c-108">La aplicación debe contener solo el código (sin XAML) y un archivo de definición de aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-108">The application must contain only code (no XAML) and an application definition file.</span></span> <span data-ttu-id="4319c-109">Para obtener más información, vea [Compilar la línea de comandos con csc.exe](../../../csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md) o [Compilar desde la línea de comandos (Visual Basic)](../../../visual-basic/reference/command-line-compiler/building-from-the-command-line.md).</span><span class="sxs-lookup"><span data-stu-id="4319c-109">For more information, see [Command-line Building With csc.exe](../../../csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md) or [Building from the Command Line (Visual Basic)](../../../visual-basic/reference/command-line-compiler/building-from-the-command-line.md).</span></span>

- <span data-ttu-id="4319c-110">Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="4319c-110">Microsoft Build Engine (MSBuild).</span></span> <span data-ttu-id="4319c-111">Además del código y los archivos XAML, la aplicación debe contener un archivo de proyecto de MSBuild.</span><span class="sxs-lookup"><span data-stu-id="4319c-111">In addition to the code and XAML files, the application must contain an MSBuild project file.</span></span> <span data-ttu-id="4319c-112">Para obtener más información, vea "MSBuild".</span><span class="sxs-lookup"><span data-stu-id="4319c-112">For more information, see "MSBuild".</span></span>

- <span data-ttu-id="4319c-113">Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4319c-113">Visual Studio.</span></span> <span data-ttu-id="4319c-114">Visual Studio es un entorno de desarrollo integrado que compila las aplicaciones WPF con MSBuild e incluye un diseñador visual para crear la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="4319c-114">Visual Studio is an integrated development environment that compiles WPF applications with MSBuild and includes a visual designer for creating UI.</span></span> <span data-ttu-id="4319c-115">Para obtener más información, vea [escribir y administrar código mediante Visual Studio](/visualstudio/ide/index-writing-code) y [diseñar XAML en Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="4319c-115">For more information, see [Write and manage code using Visual Studio](/visualstudio/ide/index-writing-code) and [Design XAML in Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span></span>

<a name="The_Windows_Presentation_Foundation_Build_Pipeline"></a>

## <a name="wpf-build-pipeline"></a><span data-ttu-id="4319c-116">Canalización de compilación de WPF</span><span class="sxs-lookup"><span data-stu-id="4319c-116">WPF Build Pipeline</span></span>

<span data-ttu-id="4319c-117">Cuando se compila un proyecto de WPF, se invoca la combinación de destinos específicos del lenguaje y específicos de WPF.</span><span class="sxs-lookup"><span data-stu-id="4319c-117">When a WPF project is built, the combination of language-specific and WPF-specific targets are invoked.</span></span> <span data-ttu-id="4319c-118">El proceso de ejecución de estos destinos se denomina canalización de compilación y los pasos principales se muestran en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="4319c-118">The process of executing these targets is called the build pipeline, and the key steps are illustrated by the following figure.</span></span>

<span data-ttu-id="4319c-119">![Proceso de compilación de WPF](./media/wpfbuildsystem-figure1.png "WPFBuildSystem_Figure1")</span><span class="sxs-lookup"><span data-stu-id="4319c-119">![WPF build process](./media/wpfbuildsystem-figure1.png "WPFBuildSystem_Figure1")</span></span>

<a name="Pre_Build_Initializations"></a>

### <a name="pre-build-initializations"></a><span data-ttu-id="4319c-120">Inicializaciones previas a la compilación</span><span class="sxs-lookup"><span data-stu-id="4319c-120">Pre-Build Initializations</span></span>

<span data-ttu-id="4319c-121">Antes de compilar, MSBuild determina la ubicación de herramientas y bibliotecas importantes, incluidas las siguientes:</span><span class="sxs-lookup"><span data-stu-id="4319c-121">Before building, MSBuild determines the location of important tools and libraries, including the following:</span></span>

- <span data-ttu-id="4319c-122">.NET Framework.</span><span class="sxs-lookup"><span data-stu-id="4319c-122">The .NET Framework.</span></span>

- <span data-ttu-id="4319c-123">Directorios de Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="4319c-123">The Windows SDK directories.</span></span>

- <span data-ttu-id="4319c-124">La ubicación de los ensamblados de referencia de WPF.</span><span class="sxs-lookup"><span data-stu-id="4319c-124">The location of WPF reference assemblies.</span></span>

- <span data-ttu-id="4319c-125">La propiedad de las rutas de búsqueda de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="4319c-125">The property for the assembly search paths.</span></span>

<span data-ttu-id="4319c-126">La primera ubicación en la que MSBuild busca ensamblados es el directorio de ensamblados de referencia (%ProgramFiles%\Reference Assemblies\Microsoft\Framework\v3.0\\).</span><span class="sxs-lookup"><span data-stu-id="4319c-126">The first location where MSBuild searches for assemblies is the reference assembly directory (%ProgramFiles%\Reference Assemblies\Microsoft\Framework\v3.0\\).</span></span> <span data-ttu-id="4319c-127">Durante este paso, el proceso de compilación inicializa también las distintas propiedades y grupos de elementos, y efectúa el trabajo de limpieza necesario.</span><span class="sxs-lookup"><span data-stu-id="4319c-127">During this step, the build process also initializes the various properties and item groups and performs any required cleanup work.</span></span>

<a name="Resolving_references"></a>

### <a name="resolving-references"></a><span data-ttu-id="4319c-128">Resolver referencias</span><span class="sxs-lookup"><span data-stu-id="4319c-128">Resolving References</span></span>

<span data-ttu-id="4319c-129">El proceso de compilación busca y enlaza los ensamblados necesarios para generar el proyecto de aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-129">The build process locates and binds the assemblies required to build the application project.</span></span> <span data-ttu-id="4319c-130">Esta lógica se incluye en la tarea `ResolveAssemblyReference`.</span><span class="sxs-lookup"><span data-stu-id="4319c-130">This logic is contained in the `ResolveAssemblyReference` task.</span></span> <span data-ttu-id="4319c-131">Todos los ensamblados declarados como `Reference` en el archivo de proyecto se proporcionan a la tarea junto con información sobre las rutas de búsqueda y los metadatos de los ensamblados que ya están instalados en el sistema.</span><span class="sxs-lookup"><span data-stu-id="4319c-131">All assemblies declared as `Reference` in the project file are provided to the task along with information on the search paths and metadata on assemblies already installed on the system.</span></span> <span data-ttu-id="4319c-132">La tarea busca ensamblados y usa los metadatos del ensamblado instalado para filtrar los ensamblados de WPF principales que no se deben mostrar en los manifiestos de salida.</span><span class="sxs-lookup"><span data-stu-id="4319c-132">The task looks up assemblies and uses the installed assembly's metadata to filter out those core WPF assemblies that need not show up in the output manifests.</span></span> <span data-ttu-id="4319c-133">Esto es necesario para evitar información redundante en los manifiestos de ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="4319c-133">This is done to avoid redundant information in the ClickOnce manifests.</span></span> <span data-ttu-id="4319c-134">Por ejemplo, dado que PresentationFramework. dll se puede considerar representativo de una aplicación compilada en y para WPF, y dado que todos los ensamblados de WPF existen en la misma ubicación en todos los equipos que tienen instalado el .NET Framework, no es necesario incluir todos información sobre todos los ensamblados de referencia de .NET Framework en los manifiestos.</span><span class="sxs-lookup"><span data-stu-id="4319c-134">For example, since PresentationFramework.dll can be considered representative of an application built on and for WPF, and since all WPF assemblies exist at the same location on every machine that has the .NET Framework installed, there's no need to include all information on all .NET Framework reference assemblies in the manifests.</span></span>

<a name="Markup_Compilation___Pass_1"></a>

### <a name="markup-compilationpass-1"></a><span data-ttu-id="4319c-135">Compilación del marcado: Paso 1</span><span class="sxs-lookup"><span data-stu-id="4319c-135">Markup Compilation—Pass 1</span></span>

<span data-ttu-id="4319c-136">En este paso, se analizan y compilan los archivos de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] para que el runtime no dedique tiempo a analizar XML y validar los valores de propiedad.</span><span class="sxs-lookup"><span data-stu-id="4319c-136">In this step, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files are parsed and compiled so that the runtime does not spend time parsing XML and validating property values.</span></span> <span data-ttu-id="4319c-137">El archivo de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] compilado se convierte en un token para que pueda cargarse mucho más rápido que un archivo [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="4319c-137">The compiled [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is pre-tokenized so that, at run time, loading it should be much faster than loading a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span>

<span data-ttu-id="4319c-138">Durante este paso, se realizan las siguientes operaciones para cada archivo de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] que es un elemento de compilación `Page`:</span><span class="sxs-lookup"><span data-stu-id="4319c-138">During this step, the following activities take place for every [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file that is a `Page` build item:</span></span>

1. <span data-ttu-id="4319c-139">El compilador de marcado analiza el archivo [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4319c-139">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is parsed by the markup compiler.</span></span>

2. <span data-ttu-id="4319c-140">Se crea una representación compilada para el [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] y se copia a la carpeta obj\Release.</span><span class="sxs-lookup"><span data-stu-id="4319c-140">A compiled representation is created for that [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and copied to the obj\Release folder.</span></span>

3. <span data-ttu-id="4319c-141">Se crea una representación de CodeDOM de una nueva clase parcial y se copia a la carpeta obj\Release.</span><span class="sxs-lookup"><span data-stu-id="4319c-141">A CodeDOM representation of a new partial class is created and copied to the obj\Release folder.</span></span>

<span data-ttu-id="4319c-142">Además, se genera un archivo de código específico del lenguaje para cada archivo [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4319c-142">In addition, a language-specific code file is generated for every [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span> <span data-ttu-id="4319c-143">Por ejemplo, en el caso de una página Page1. XAML de un proyecto de Visual Basic, se genera un página1. g. VB; en el caso de una página Page1. C# XAML de un proyecto, se genera un Page1.g.cs.</span><span class="sxs-lookup"><span data-stu-id="4319c-143">For example, for a Page1.xaml page in a Visual Basic project, a Page1.g.vb is generated; for a Page1.xaml page in a C# project, a Page1.g.cs is generated.</span></span> <span data-ttu-id="4319c-144">".g" en el nombre de archivo indica que el archivo es código generado que tiene una declaración de clase parcial para el elemento de nivel superior del archivo de marcado (como `Page` o `Window`).</span><span class="sxs-lookup"><span data-stu-id="4319c-144">The ".g" in the file name indicates the file is generated code that has a partial class declaration for the top-level element of the markup file (such as `Page` or `Window`).</span></span> <span data-ttu-id="4319c-145">La clase se declara con el modificador `partial` de C# (`Extends` en Visual Basic) para indicar que existe otra declaración para la clase en otro lugar, normalmente en el archivo de código subyacente Page1.Xaml.cs.</span><span class="sxs-lookup"><span data-stu-id="4319c-145">The class is declared with the `partial` modifier in C# (`Extends` in Visual Basic) to indicate there is another declaration for the class elsewhere, usually in the code-behind file Page1.xaml.cs.</span></span>

<span data-ttu-id="4319c-146">La clase parcial se extiende a partir de la clase base adecuada (como <xref:System.Windows.Controls.Page> de una página) e implementa la interfaz <xref:System.Windows.Markup.IComponentConnector?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4319c-146">The partial class extends from the appropriate base class (such as <xref:System.Windows.Controls.Page> for a page) and implements the <xref:System.Windows.Markup.IComponentConnector?displayProperty=nameWithType> interface.</span></span> <span data-ttu-id="4319c-147">La interfaz <xref:System.Windows.Markup.IComponentConnector> tiene métodos para inicializar un componente y conectar los nombres y eventos en los elementos de su contenido.</span><span class="sxs-lookup"><span data-stu-id="4319c-147">The <xref:System.Windows.Markup.IComponentConnector> interface has methods to initialize a component and connect names and events on elements in its content.</span></span> <span data-ttu-id="4319c-148">Por consiguiente, el archivo de código generado tiene una implementación de métodos como la siguiente:</span><span class="sxs-lookup"><span data-stu-id="4319c-148">Consequently, the generated code file has a method implementation like the following:</span></span>

```csharp
public void InitializeComponent() {
    if (_contentLoaded) {
        return;
    }
    _contentLoaded = true;
    System.Uri resourceLocater =
        new System.Uri(
            "window1.xaml",
            System.UriKind.RelativeOrAbsolute);
    System.Windows.Application.LoadComponent(this, resourceLocater);
}
```

```vb
Public Sub InitializeComponent() _

    If _contentLoaded Then
        Return
    End If

    _contentLoaded = True
    Dim resourceLocater As System.Uri = _
        New System.Uri("mainwindow.xaml", System.UriKind.Relative)

    System.Windows.Application.LoadComponent(Me, resourceLocater)

End Sub
```

<span data-ttu-id="4319c-149">De forma predeterminada, la compilación de marcado se ejecuta en el mismo <xref:System.AppDomain> que el motor de MSBuild.</span><span class="sxs-lookup"><span data-stu-id="4319c-149">By default, markup compilation runs in the same <xref:System.AppDomain> as the MSBuild engine.</span></span> <span data-ttu-id="4319c-150">Esto proporciona una mejora del rendimiento importante.</span><span class="sxs-lookup"><span data-stu-id="4319c-150">This provides significant performance gains.</span></span> <span data-ttu-id="4319c-151">Este comportamiento se puede activar o desactivar alternativamente con la propiedad `AlwaysCompileMarkupFilesInSeparateDomain`.</span><span class="sxs-lookup"><span data-stu-id="4319c-151">This behavior can be toggled with the `AlwaysCompileMarkupFilesInSeparateDomain` property.</span></span> <span data-ttu-id="4319c-152">Esto tiene la ventaja de descargar todos los ensamblados de referencia mediante la descarga de la <xref:System.AppDomain>independiente.</span><span class="sxs-lookup"><span data-stu-id="4319c-152">This has the advantage of unloading all reference assemblies by unloading the separate <xref:System.AppDomain>.</span></span>

<a name="Pass_2_of_Markup_Compilation"></a>

### <a name="markup-compilationpass-2"></a><span data-ttu-id="4319c-153">Compilación del marcado: Paso 2</span><span class="sxs-lookup"><span data-stu-id="4319c-153">Markup Compilation—Pass 2</span></span>

<span data-ttu-id="4319c-154">No todas las páginas [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] se compilan en el paso 1 de la compilación de marcado.</span><span class="sxs-lookup"><span data-stu-id="4319c-154">Not all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages are compiled at during pass 1 of markup compilation.</span></span> <span data-ttu-id="4319c-155">Los archivos [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] que tienen referencias de tipos definidos localmente (referencias a tipos definidos en el código en otro lugar del mismo proyecto) no se compilan en este momento.</span><span class="sxs-lookup"><span data-stu-id="4319c-155">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files that have locally defined type references (references to types defined in code elsewhere in the same project) are exempt from compilation at this time.</span></span> <span data-ttu-id="4319c-156">Esto se debe a que estos tipos definidos localmente solo existen en el código fuente y aún no están generados.</span><span class="sxs-lookup"><span data-stu-id="4319c-156">This is because those locally defined types exist only in source and have not yet been compiled.</span></span> <span data-ttu-id="4319c-157">Para determinar esto, el analizador usa heurística que implica la búsqueda de elementos como `x:Name` en el archivo de marcado.</span><span class="sxs-lookup"><span data-stu-id="4319c-157">In order to determine this, the parser uses heuristics that involve looking for items such as `x:Name` in the markup file.</span></span> <span data-ttu-id="4319c-158">Cuando se encuentra este tipo de instancia, la compilación del archivo de marcado se pospone hasta que se hayan generado los archivos de código y, en ese momento, el segundo paso de la compilación de marcado procesa estos archivos.</span><span class="sxs-lookup"><span data-stu-id="4319c-158">When such an instance is found, that markup file’s compilation is postponed until the code files have been compiled, after which, the second markup compilation pass processes these files.</span></span>

<a name="File_Classification"></a>

### <a name="file-classification"></a><span data-ttu-id="4319c-159">Clasificación de archivos</span><span class="sxs-lookup"><span data-stu-id="4319c-159">File Classification</span></span>

<span data-ttu-id="4319c-160">El proceso de compilación coloca los archivos de salida en grupos de recursos diferentes en función del ensamblado de aplicación en el que se van a incluir.</span><span class="sxs-lookup"><span data-stu-id="4319c-160">The build process puts output files into different resource groups based on which application assembly they will be placed in.</span></span> <span data-ttu-id="4319c-161">En una aplicación no traducida típica, todos los archivos de datos marcados como `Resource` se colocan en el ensamblado principal (ejecutable o biblioteca).</span><span class="sxs-lookup"><span data-stu-id="4319c-161">In a typical nonlocalized application, all data files marked as `Resource` are placed in the main assembly (executable or library).</span></span> <span data-ttu-id="4319c-162">Cuando `UICulture` se establece en el proyecto, todos los archivos [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] compilados y los recursos explícitamente marcados como específicos del lenguaje se colocan en el ensamblado de recursos satélite.</span><span class="sxs-lookup"><span data-stu-id="4319c-162">When `UICulture` is set in the project, all compiled [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files and those resources specifically marked as language-specific are placed in the satellite resource assembly.</span></span> <span data-ttu-id="4319c-163">Además, todos los recursos neutrales en cuanto al idioma se colocan en el ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="4319c-163">Furthermore, all language-neutral resources are placed in the main assembly.</span></span> <span data-ttu-id="4319c-164">Esta determinación se realiza en este paso del proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="4319c-164">In this step of the build process, that determination is made.</span></span>

<span data-ttu-id="4319c-165">Las acciones de compilación de `ApplicationDefinition`, `Page` y `Resource` del archivo de proyecto se pueden incrementar con los metadatos de `Localizable` (los valores permitidos son `true` y `false`), que indican si el archivo es específico del lenguaje o neutral en cuanto a este.</span><span class="sxs-lookup"><span data-stu-id="4319c-165">The `ApplicationDefinition`, `Page`, and `Resource` build actions in the project file can be augmented with the `Localizable` metadata (acceptable values are `true` and `false`), which dictates whether the file is language-specific or language-neutral.</span></span>

<a name="Core_Compilation"></a>

### <a name="core-compilation"></a><span data-ttu-id="4319c-166">Compilación básica</span><span class="sxs-lookup"><span data-stu-id="4319c-166">Core Compilation</span></span>

<span data-ttu-id="4319c-167">El paso básico de compilación implica la compilación de los archivos de código.</span><span class="sxs-lookup"><span data-stu-id="4319c-167">The core compile step involves compilation of code files.</span></span> <span data-ttu-id="4319c-168">Esta compilación está controlada por los archivos de destino específicos del lenguaje Microsoft.CSharp.targets y Microsoft.VisualBasic.targets.</span><span class="sxs-lookup"><span data-stu-id="4319c-168">This is orchestrated by logic in the language-specific targets files Microsoft.CSharp.targets and Microsoft.VisualBasic.targets.</span></span> <span data-ttu-id="4319c-169">Si la heurística ha determinado que basta con un solo paso del compilador de marcado, se genera el ensamblado principal.</span><span class="sxs-lookup"><span data-stu-id="4319c-169">If heuristics have determined that a single pass of the markup compiler is sufficient, then the main assembly is generated.</span></span> <span data-ttu-id="4319c-170">En cambio, si uno o varios archivos [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] del proyecto tienen referencias a tipos definidos localmente, se genera un archivo .dll temporal para que los ensamblados de aplicación finales se puedan crear una vez completado el segundo paso de compilación del marcado.</span><span class="sxs-lookup"><span data-stu-id="4319c-170">However, if one or more [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files in the project have references to locally defined types, then a temporary .dll file is generated so the final application assemblies may be created after the second pass of markup compilation is complete.</span></span>

<a name="Manifest_generation"></a>

### <a name="manifest-generation"></a><span data-ttu-id="4319c-171">Generación de manifiestos</span><span class="sxs-lookup"><span data-stu-id="4319c-171">Manifest Generation</span></span>

<span data-ttu-id="4319c-172">Al final del proceso de compilación, después de que todos los ensamblados de aplicación y los archivos de contenido estén listos, se generan los manifiestos de ClickOnce para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-172">At the end of the build process, after all the application assemblies and content files are ready, the ClickOnce manifests for the application are generated.</span></span>

<span data-ttu-id="4319c-173">El archivo de manifiesto de implementación describe el modelo de implementación: la versión actual, el comportamiento de actualización y la identidad del editor junto con la firma digital.</span><span class="sxs-lookup"><span data-stu-id="4319c-173">The deployment manifest file describes the deployment model: the current version, update behavior, and publisher identity along with digital signature.</span></span> <span data-ttu-id="4319c-174">Se supone que este manifiesto lo crean los administradores que controlan la implementación.</span><span class="sxs-lookup"><span data-stu-id="4319c-174">This manifest is intended to be authored by administrators who handle deployment.</span></span> <span data-ttu-id="4319c-175">La extensión de archivo es. XBAP (para aplicaciones de explorador XAML (XBAP) y. Application para aplicaciones instaladas.</span><span class="sxs-lookup"><span data-stu-id="4319c-175">The file extension is .xbap (for XAML browser applications (XBAPs)) and .application for installed applications.</span></span> <span data-ttu-id="4319c-176">La primera se indica a través de la propiedad `HostInBrowser` del proyecto y, como resultado, el manifiesto identifica la aplicación como hospedada en el explorador.</span><span class="sxs-lookup"><span data-stu-id="4319c-176">The former is dictated by the `HostInBrowser` project property and as a result the manifest identifies the application as browser-hosted.</span></span>

<span data-ttu-id="4319c-177">El manifiesto de aplicación (un archivo .exe.manifest) describe los ensamblados de la aplicación y las bibliotecas dependientes, e incluye los permisos necesarios para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-177">The application manifest (an .exe.manifest file) describes the application assemblies and dependent libraries and lists permissions required by the application.</span></span> <span data-ttu-id="4319c-178">Se supone que este archivo lo crea el desarrollador de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-178">This file is intended to be authored by the application developer.</span></span> <span data-ttu-id="4319c-179">Para iniciar una aplicación ClickOnce, un usuario abre el archivo de manifiesto de implementación de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-179">In order to launch a ClickOnce application, a user opens the application's deployment manifest file.</span></span>

<span data-ttu-id="4319c-180">Estos archivos de manifiesto siempre se crean para XBAP.</span><span class="sxs-lookup"><span data-stu-id="4319c-180">These manifest files are always created for XBAPs.</span></span> <span data-ttu-id="4319c-181">Para las aplicaciones instaladas, no se crean a menos que la propiedad `GenerateManifests` se especifique en el archivo de proyecto con el valor `true`.</span><span class="sxs-lookup"><span data-stu-id="4319c-181">For installed applications, they are not created unless the `GenerateManifests` property is specified in the project file with value `true`.</span></span>

<span data-ttu-id="4319c-182">Las XBAP obtienen dos permisos adicionales por encima de los permisos asignados a las aplicaciones típicas de zona de Internet: <xref:System.Security.Permissions.WebBrowserPermission> y <xref:System.Security.Permissions.MediaPermission>.</span><span class="sxs-lookup"><span data-stu-id="4319c-182">XBAPs get two additional permissions over and above those permissions assigned to typical Internet zone applications: <xref:System.Security.Permissions.WebBrowserPermission> and <xref:System.Security.Permissions.MediaPermission>.</span></span> <span data-ttu-id="4319c-183">El sistema de compilación de WPF declara esos permisos en el manifiesto de aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-183">The WPF build system declares those permissions in the application manifest.</span></span>

<a name="Incremental_Build_Support"></a>

## <a name="incremental-build-support"></a><span data-ttu-id="4319c-184">Compatibilidad con la compilación incremental</span><span class="sxs-lookup"><span data-stu-id="4319c-184">Incremental Build Support</span></span>

<span data-ttu-id="4319c-185">El sistema de compilación de WPF proporciona compatibilidad con las compilaciones incrementales.</span><span class="sxs-lookup"><span data-stu-id="4319c-185">The WPF build system provides support for incremental builds.</span></span> <span data-ttu-id="4319c-186">Es bastante inteligente a la hora de detectar los cambios efectuados en el marcado o el código, y solo detecta los artefactos afectados por el cambio.</span><span class="sxs-lookup"><span data-stu-id="4319c-186">It is fairly intelligent about detecting changes made to markup or code, and it compiles only those artifacts affected by the change.</span></span> <span data-ttu-id="4319c-187">El mecanismo de compilación incremental usa los archivos siguientes:</span><span class="sxs-lookup"><span data-stu-id="4319c-187">The incremental build mechanism uses the following files:</span></span>

- <span data-ttu-id="4319c-188">Un archivo $(*nombreDeEnsamblado*)_MarkupCompiler.Cache para mantener el estado actual del compilador.</span><span class="sxs-lookup"><span data-stu-id="4319c-188">An $(*AssemblyName*)_MarkupCompiler.Cache file to maintain current compiler state.</span></span>

- <span data-ttu-id="4319c-189">Un archivo $(*nombreDeEnsamblado*)_MarkupCompiler.lref para almacenar en caché los archivos [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] con referencias a tipos definidos localmente.</span><span class="sxs-lookup"><span data-stu-id="4319c-189">An $(*AssemblyName*)_MarkupCompiler.lref file to cache the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files with references to locally defined types.</span></span>

<span data-ttu-id="4319c-190">A continuación, se incluye un conjunto de reglas que rigen la compilación incremental:</span><span class="sxs-lookup"><span data-stu-id="4319c-190">The following is a set of rules governing incremental build:</span></span>

- <span data-ttu-id="4319c-191">El archivo es la unidad más pequeña en la que el sistema de compilación detecta un cambio.</span><span class="sxs-lookup"><span data-stu-id="4319c-191">The file is the smallest unit at which the build system detects change.</span></span> <span data-ttu-id="4319c-192">Por tanto, para un archivo de código, el sistema de compilación no puede determinar si se ha cambiado un tipo o se ha agregado código.</span><span class="sxs-lookup"><span data-stu-id="4319c-192">So, for a code file, the build system cannot tell if a type was changed or if code was added.</span></span> <span data-ttu-id="4319c-193">Lo mismo se aplica a los archivos de proyecto.</span><span class="sxs-lookup"><span data-stu-id="4319c-193">The same holds for project files.</span></span>

- <span data-ttu-id="4319c-194">El mecanismo de compilación incremental debe saber que una página [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] define una clase o usa otras clases.</span><span class="sxs-lookup"><span data-stu-id="4319c-194">The incremental build mechanism must be cognizant that a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page either defines a class or uses other classes.</span></span>

- <span data-ttu-id="4319c-195">Si las entradas `Reference` cambian, vuelva a compilar todas las páginas.</span><span class="sxs-lookup"><span data-stu-id="4319c-195">If `Reference` entries change, then recompile all pages.</span></span>

- <span data-ttu-id="4319c-196">Si un archivo de código cambia, vuelva a compilar todas las páginas con referencias de tipos definidos localmente.</span><span class="sxs-lookup"><span data-stu-id="4319c-196">If a code file changes, recompile all pages with locally defined type references.</span></span>

- <span data-ttu-id="4319c-197">Si un archivo [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] cambia:</span><span class="sxs-lookup"><span data-stu-id="4319c-197">If a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file changes:</span></span>

  - <span data-ttu-id="4319c-198">Si [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] se declara como `Page` en el proyecto: si [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] no tiene referencias de tipos definidos localmente, vuelva a compilar ese [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] además de todas las páginas [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] con referencias locales; si [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] tiene referencias locales, vuelva a compilar todas las páginas [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] con referencias locales.</span><span class="sxs-lookup"><span data-stu-id="4319c-198">If [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is declared as `Page` in the project: if the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] does not have locally defined type references, recompile that [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] plus all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references; if the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] has local references, recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references.</span></span>

  - <span data-ttu-id="4319c-199">Si [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] se declara como `ApplicationDefinition` en el proyecto: volver a compilar todas [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] páginas (motivo: cada [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] tiene una referencia a un tipo de <xref:System.Windows.Application> que puede haber cambiado).</span><span class="sxs-lookup"><span data-stu-id="4319c-199">If [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is declared as `ApplicationDefinition` in the project: recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages (reason: each [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] has reference to an <xref:System.Windows.Application> type that may have changed).</span></span>

- <span data-ttu-id="4319c-200">Si el archivo de proyecto declara un archivo de código como definición de aplicación en lugar de un archivo [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="4319c-200">If the project file declares a code file as application definition instead of a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file:</span></span>

  - <span data-ttu-id="4319c-201">Compruebe si el valor de `ApplicationClassName` en el archivo de proyecto ha cambiado (¿hay un nuevo tipo de aplicación?).</span><span class="sxs-lookup"><span data-stu-id="4319c-201">Check if the `ApplicationClassName` value in the project file has changed (is there a new application type?).</span></span> <span data-ttu-id="4319c-202">En ese caso, vuelva a compilar toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-202">If so, recompile the entire application.</span></span>

  - <span data-ttu-id="4319c-203">De lo contrario, vuelva a compilar todas las páginas [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] con referencias locales.</span><span class="sxs-lookup"><span data-stu-id="4319c-203">Otherwise, recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references.</span></span>

- <span data-ttu-id="4319c-204">Si un archivo de proyecto cambia: aplique todas las reglas anteriores y determine lo que tiene que volver a compilar.</span><span class="sxs-lookup"><span data-stu-id="4319c-204">If a project file changes: apply all preceding rules and see what needs to be recompiled.</span></span> <span data-ttu-id="4319c-205">Los cambios en las propiedades siguientes desencadenan una recompilación completa: `AssemblyName`, `IntermediateOutputPath`, `RootNamespace` y `HostInBrowser`.</span><span class="sxs-lookup"><span data-stu-id="4319c-205">Changes to the following properties trigger a complete recompile: `AssemblyName`, `IntermediateOutputPath`, `RootNamespace`, and `HostInBrowser`.</span></span>

<span data-ttu-id="4319c-206">Las situaciones de recompilación posibles son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="4319c-206">The following recompile scenarios are possible:</span></span>

- <span data-ttu-id="4319c-207">Se vuelve a compilar toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4319c-207">The entire application is recompiled.</span></span>

- <span data-ttu-id="4319c-208">Solo se vuelven a compilar los archivos [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] que tienen referencias de tipos definidos localmente.</span><span class="sxs-lookup"><span data-stu-id="4319c-208">Only those [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files that have locally defined type references are recompiled.</span></span>

- <span data-ttu-id="4319c-209">No se vuelve a compilar nada (si no ha cambiado nada en el proyecto).</span><span class="sxs-lookup"><span data-stu-id="4319c-209">Nothing is recompiled (if nothing in the project has changed).</span></span>

## <a name="see-also"></a><span data-ttu-id="4319c-210">Vea también</span><span class="sxs-lookup"><span data-stu-id="4319c-210">See also</span></span>

- [<span data-ttu-id="4319c-211">Implementar una aplicación de WPF</span><span class="sxs-lookup"><span data-stu-id="4319c-211">Deploying a WPF Application</span></span>](deploying-a-wpf-application-wpf.md)
- [<span data-ttu-id="4319c-212">Referencia de MSBuild para WPF</span><span class="sxs-lookup"><span data-stu-id="4319c-212">WPF MSBuild Reference</span></span>](/visualstudio/msbuild/wpf-msbuild-reference)
- [<span data-ttu-id="4319c-213">Identificadores URI de paquete en WPF</span><span class="sxs-lookup"><span data-stu-id="4319c-213">Pack URIs in WPF</span></span>](pack-uris-in-wpf.md)
- [<span data-ttu-id="4319c-214">Archivos de recursos, contenido y datos de aplicaciones de WPF</span><span class="sxs-lookup"><span data-stu-id="4319c-214">WPF Application Resource, Content, and Data Files</span></span>](wpf-application-resource-content-and-data-files.md)
