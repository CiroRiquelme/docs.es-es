---
title: Prácticas recomendadas para escalar el control DataGridView
ms.date: 03/30/2017
helpviewer_keywords:
- DataGridView control [Windows Forms], row sharing
- data grids [Windows Forms], best practices
- DataGridView control [Windows Forms], shared rows
- DataGridView control [Windows Forms], best practices
- best practices [Windows Forms], dataGridView control
- DataGridView control [Windows Forms], scaling
ms.assetid: 8321a8a6-6340-4fd1-b475-fa090b905aaf
ms.openlocfilehash: 63500a79def89510b4bc7a436abc4620a7265a79
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/24/2020
ms.locfileid: "76744126"
---
# <a name="best-practices-for-scaling-the-windows-forms-datagridview-control"></a><span data-ttu-id="9a5c4-102">Procedimientos recomendados para ajustar la escala del control DataGridView en formularios Windows Forms</span><span class="sxs-lookup"><span data-stu-id="9a5c4-102">Best Practices for Scaling the Windows Forms DataGridView Control</span></span>

<span data-ttu-id="9a5c4-103">El control de <xref:System.Windows.Forms.DataGridView> está diseñado para proporcionar la máxima escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-103">The <xref:System.Windows.Forms.DataGridView> control is designed to provide maximum scalability.</span></span> <span data-ttu-id="9a5c4-104">Si necesita mostrar grandes cantidades de datos, debe seguir las instrucciones descritas en este tema para evitar el consumo de grandes cantidades de memoria o la degradación de la capacidad de respuesta de la interfaz de usuario (UI).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-104">If you need to display large amounts of data, you should follow the guidelines described in this topic to avoid consuming large amounts of memory or degrading the responsiveness of the user interface (UI).</span></span> <span data-ttu-id="9a5c4-105">En este tema se describen los siguientes problemas:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-105">This topic discusses the following issues:</span></span>

- <span data-ttu-id="9a5c4-106">Usar estilos de celda eficazmente</span><span class="sxs-lookup"><span data-stu-id="9a5c4-106">Using cell styles efficiently</span></span>

- <span data-ttu-id="9a5c4-107">Uso eficaz de los menús contextuales</span><span class="sxs-lookup"><span data-stu-id="9a5c4-107">Using shortcut menus efficiently</span></span>

- <span data-ttu-id="9a5c4-108">Usar el cambio de tamaño automático eficazmente</span><span class="sxs-lookup"><span data-stu-id="9a5c4-108">Using automatic resizing efficiently</span></span>

- <span data-ttu-id="9a5c4-109">Usar las colecciones de celdas, filas y columnas seleccionadas de forma eficaz</span><span class="sxs-lookup"><span data-stu-id="9a5c4-109">Using the selected cells, rows, and columns collections efficiently</span></span>

- <span data-ttu-id="9a5c4-110">Usar filas compartidas</span><span class="sxs-lookup"><span data-stu-id="9a5c4-110">Using shared rows</span></span>

- <span data-ttu-id="9a5c4-111">Impedir que las filas se conviertan en no compartidas</span><span class="sxs-lookup"><span data-stu-id="9a5c4-111">Preventing rows from becoming unshared</span></span>

<span data-ttu-id="9a5c4-112">Si tiene necesidades de rendimiento especiales, puede implementar el modo virtual y proporcionar sus propias operaciones de administración de datos.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-112">If you have special performance needs, you can implement virtual mode and provide your own data management operations.</span></span> <span data-ttu-id="9a5c4-113">Para obtener más información, vea [modos de presentación de datos en el control DataGridView Windows Forms](data-display-modes-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-113">For more information, see [Data Display Modes in the Windows Forms DataGridView Control](data-display-modes-in-the-windows-forms-datagridview-control.md).</span></span>

## <a name="using-cell-styles-efficiently"></a><span data-ttu-id="9a5c4-114">Usar estilos de celda eficazmente</span><span class="sxs-lookup"><span data-stu-id="9a5c4-114">Using Cell Styles Efficiently</span></span>

<span data-ttu-id="9a5c4-115">Cada celda, fila y columna puede tener su propia información de estilo.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-115">Each cell, row, and column can have its own style information.</span></span> <span data-ttu-id="9a5c4-116">La información de estilo se almacena en objetos de <xref:System.Windows.Forms.DataGridViewCellStyle>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-116">Style information is stored in <xref:System.Windows.Forms.DataGridViewCellStyle> objects.</span></span> <span data-ttu-id="9a5c4-117">Crear objetos de estilo de celda para muchos elementos de <xref:System.Windows.Forms.DataGridView> individuales puede ser ineficaz, especialmente cuando se trabaja con grandes cantidades de datos.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-117">Creating cell style objects for many individual <xref:System.Windows.Forms.DataGridView> elements can be inefficient, especially when working with large amounts of data.</span></span> <span data-ttu-id="9a5c4-118">Para evitar un impacto en el rendimiento, utilice las siguientes directrices:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-118">To avoid a performance impact, use the following guidelines:</span></span>

- <span data-ttu-id="9a5c4-119">Evite establecer propiedades de estilo de celda para objetos individuales de <xref:System.Windows.Forms.DataGridViewCell> o <xref:System.Windows.Forms.DataGridViewRow>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-119">Avoid setting cell style properties for individual <xref:System.Windows.Forms.DataGridViewCell> or <xref:System.Windows.Forms.DataGridViewRow> objects.</span></span> <span data-ttu-id="9a5c4-120">Esto incluye el objeto de fila especificado por la propiedad <xref:System.Windows.Forms.DataGridView.RowTemplate%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-120">This includes the row object specified by the <xref:System.Windows.Forms.DataGridView.RowTemplate%2A> property.</span></span> <span data-ttu-id="9a5c4-121">Cada fila nueva clonada de la plantilla de fila recibirá su propia copia del objeto de estilo de celda de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-121">Each new row that is cloned from the row template will receive its own copy of the template's cell style object.</span></span> <span data-ttu-id="9a5c4-122">Para obtener la máxima escalabilidad, establezca las propiedades de estilo de celda en el nivel de <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-122">For maximum scalability, set cell style properties at the <xref:System.Windows.Forms.DataGridView> level.</span></span> <span data-ttu-id="9a5c4-123">Por ejemplo, establezca la propiedad <xref:System.Windows.Forms.DataGridView.DefaultCellStyle%2A?displayProperty=nameWithType> en lugar de la propiedad <xref:System.Windows.Forms.DataGridViewCell.Style%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-123">For example, set the <xref:System.Windows.Forms.DataGridView.DefaultCellStyle%2A?displayProperty=nameWithType> property rather than the <xref:System.Windows.Forms.DataGridViewCell.Style%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="9a5c4-124">Si algunas celdas requieren un formato que no sea el predeterminado, utilice la misma instancia de <xref:System.Windows.Forms.DataGridViewCellStyle> entre grupos de celdas, filas o columnas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-124">If some cells require formatting other than default formatting, use the same <xref:System.Windows.Forms.DataGridViewCellStyle> instance across groups of cells, rows, or columns.</span></span> <span data-ttu-id="9a5c4-125">Evite establecer directamente las propiedades de tipo <xref:System.Windows.Forms.DataGridViewCellStyle> en celdas, filas y columnas individuales.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-125">Avoid directly setting properties of type <xref:System.Windows.Forms.DataGridViewCellStyle> on individual cells, rows, and columns.</span></span> <span data-ttu-id="9a5c4-126">Para obtener un ejemplo de uso compartido de estilos de celda, vea [Cómo: establecer estilos de celda predeterminados para el control DataGridView Windows Forms](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-126">For an example of cell style sharing, see [How to: Set Default Cell Styles for the Windows Forms DataGridView Control](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span></span> <span data-ttu-id="9a5c4-127">También puede evitar una reducción del rendimiento al establecer los estilos de celda individualmente mediante el control del controlador de eventos de <xref:System.Windows.Forms.DataGridView.CellFormatting>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-127">You can also avoid a performance penalty when setting cell styles individually by handling the <xref:System.Windows.Forms.DataGridView.CellFormatting> event handler.</span></span> <span data-ttu-id="9a5c4-128">Para obtener un ejemplo, vea [Cómo: personalizar el formato de datos en el control DataGridView Windows Forms](how-to-customize-data-formatting-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-128">For an example, see [How to: Customize Data Formatting in the Windows Forms DataGridView Control](how-to-customize-data-formatting-in-the-windows-forms-datagridview-control.md).</span></span>

- <span data-ttu-id="9a5c4-129">Al determinar el estilo de una celda, utilice la propiedad <xref:System.Windows.Forms.DataGridViewCell.InheritedStyle%2A?displayProperty=nameWithType> en lugar de la propiedad <xref:System.Windows.Forms.DataGridViewCell.Style%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-129">When determining a cell's style, use the <xref:System.Windows.Forms.DataGridViewCell.InheritedStyle%2A?displayProperty=nameWithType> property rather than the <xref:System.Windows.Forms.DataGridViewCell.Style%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="9a5c4-130">Al tener acceso a la propiedad <xref:System.Windows.Forms.DataGridViewCell.Style%2A>, se crea una nueva instancia de la clase <xref:System.Windows.Forms.DataGridViewCellStyle> si aún no se ha utilizado la propiedad.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-130">Accessing the <xref:System.Windows.Forms.DataGridViewCell.Style%2A> property creates a new instance of the <xref:System.Windows.Forms.DataGridViewCellStyle> class if the property has not already been used.</span></span> <span data-ttu-id="9a5c4-131">Además, este objeto podría no contener la información de estilo completa de la celda si algunos estilos se heredan de la fila, la columna o el control.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-131">Additionally, this object might not contain the complete style information for the cell if some styles are inherited from the row, column, or control.</span></span> <span data-ttu-id="9a5c4-132">Para obtener más información sobre la herencia del estilo de celda, vea [estilos de celda en el control DataGridView de Windows Forms](cell-styles-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-132">For more information about cell style inheritance, see [Cell Styles in the Windows Forms DataGridView Control](cell-styles-in-the-windows-forms-datagridview-control.md).</span></span>

## <a name="using-shortcut-menus-efficiently"></a><span data-ttu-id="9a5c4-133">Uso eficaz de los menús contextuales</span><span class="sxs-lookup"><span data-stu-id="9a5c4-133">Using Shortcut Menus Efficiently</span></span>

<span data-ttu-id="9a5c4-134">Cada celda, fila y columna puede tener su propio menú contextual.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-134">Each cell, row, and column can have its own shortcut menu.</span></span> <span data-ttu-id="9a5c4-135">Los menús contextuales del control <xref:System.Windows.Forms.DataGridView> se representan mediante controles de <xref:System.Windows.Forms.ContextMenuStrip>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-135">Shortcut menus in the <xref:System.Windows.Forms.DataGridView> control are represented by <xref:System.Windows.Forms.ContextMenuStrip> controls.</span></span> <span data-ttu-id="9a5c4-136">Al igual que con los objetos de estilo de celda, la creación de menús contextuales para muchos elementos de <xref:System.Windows.Forms.DataGridView> individuales afectará negativamente al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-136">Just as with cell style objects, creating shortcut menus for many individual <xref:System.Windows.Forms.DataGridView> elements will negatively impact performance.</span></span> <span data-ttu-id="9a5c4-137">Para evitar esta penalización, utilice las siguientes directrices:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-137">To avoid this penalty, use the following guidelines:</span></span>

- <span data-ttu-id="9a5c4-138">Evite crear menús contextuales para celdas y filas individuales.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-138">Avoid creating shortcut menus for individual cells and rows.</span></span> <span data-ttu-id="9a5c4-139">Esto incluye la plantilla de fila, que se clona junto con el menú contextual cuando se agregan nuevas filas al control.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-139">This includes the row template, which is cloned along with its shortcut menu when new rows are added to the control.</span></span> <span data-ttu-id="9a5c4-140">Para obtener la máxima escalabilidad, use solo la propiedad <xref:System.Windows.Forms.Control.ContextMenuStrip%2A> del control para especificar un solo menú contextual para todo el control.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-140">For maximum scalability, use only the control's <xref:System.Windows.Forms.Control.ContextMenuStrip%2A> property to specify a single shortcut menu for the entire control.</span></span>

- <span data-ttu-id="9a5c4-141">Si necesita varios menús contextuales para varias filas o celdas, controle los eventos <xref:System.Windows.Forms.DataGridView.CellContextMenuStripNeeded> o <xref:System.Windows.Forms.DataGridView.RowContextMenuStripNeeded>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-141">If you require multiple shortcut menus for multiple rows or cells, handle the <xref:System.Windows.Forms.DataGridView.CellContextMenuStripNeeded> or <xref:System.Windows.Forms.DataGridView.RowContextMenuStripNeeded> events.</span></span> <span data-ttu-id="9a5c4-142">Estos eventos le permiten administrar los objetos de menú contextual usted mismo, lo que le permite ajustar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-142">These events let you manage the shortcut menu objects yourself, allowing you to tune performance.</span></span>

## <a name="using-automatic-resizing-efficiently"></a><span data-ttu-id="9a5c4-143">Usar el cambio de tamaño automático eficazmente</span><span class="sxs-lookup"><span data-stu-id="9a5c4-143">Using Automatic Resizing Efficiently</span></span>

<span data-ttu-id="9a5c4-144">Se puede cambiar automáticamente el tamaño de las filas, columnas y encabezados según los cambios de contenido de celda para que todo el contenido de las celdas se muestre sin recortes.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-144">Rows, columns, and headers can be automatically resized as cell content changes so that the entire contents of cells are displayed without clipping.</span></span> <span data-ttu-id="9a5c4-145">Cambiar los modos de cambio de tamaño también puede cambiar el tamaño de filas, columnas y encabezados.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-145">Changing sizing modes can also resize rows, columns, and headers.</span></span> <span data-ttu-id="9a5c4-146">Para determinar el tamaño correcto, el control <xref:System.Windows.Forms.DataGridView> debe examinar el valor de cada celda que debe adaptarse.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-146">To determine the correct size, the <xref:System.Windows.Forms.DataGridView> control must examine the value of each cell that it must accommodate.</span></span> <span data-ttu-id="9a5c4-147">Cuando se trabaja con grandes conjuntos de datos, este análisis puede afectar negativamente al rendimiento del control cuando se produce un cambio de tamaño automático.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-147">When working with large data sets, this analysis can negatively impact the performance of the control when automatic resizing occurs.</span></span> <span data-ttu-id="9a5c4-148">Para evitar penalizaciones de rendimiento, utilice las siguientes directrices:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-148">To avoid performance penalties, use the following guidelines:</span></span>

- <span data-ttu-id="9a5c4-149">Evite usar el ajuste de tamaño automático en un control de <xref:System.Windows.Forms.DataGridView> con un conjunto grande de filas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-149">Avoid using automatic sizing on a <xref:System.Windows.Forms.DataGridView> control with a large set of rows.</span></span> <span data-ttu-id="9a5c4-150">Si utiliza el ajuste automático de tamaño, solo tiene que cambiar el tamaño en función de las filas mostradas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-150">If you do use automatic sizing, only resize based on the displayed rows.</span></span> <span data-ttu-id="9a5c4-151">Use solo las filas mostradas en modo virtual.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-151">Use only the displayed rows in virtual mode as well.</span></span>

  - <span data-ttu-id="9a5c4-152">En el caso de las filas y las columnas, utilice el campo `DisplayedCells` o `DisplayedCellsExceptHeaders` de las enumeraciones <xref:System.Windows.Forms.DataGridViewAutoSizeRowsMode>, <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode>y <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-152">For rows and columns, use the `DisplayedCells` or `DisplayedCellsExceptHeaders` field of the <xref:System.Windows.Forms.DataGridViewAutoSizeRowsMode>, <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode>, and <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode> enumerations.</span></span>

  - <span data-ttu-id="9a5c4-153">En el caso de los encabezados de fila, utilice el campo <xref:System.Windows.Forms.DataGridViewRowHeadersWidthSizeMode.AutoSizeToDisplayedHeaders> o <xref:System.Windows.Forms.DataGridViewRowHeadersWidthSizeMode.AutoSizeToFirstHeader> de la enumeración <xref:System.Windows.Forms.DataGridViewRowHeadersWidthSizeMode>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-153">For row headers, use the <xref:System.Windows.Forms.DataGridViewRowHeadersWidthSizeMode.AutoSizeToDisplayedHeaders> or <xref:System.Windows.Forms.DataGridViewRowHeadersWidthSizeMode.AutoSizeToFirstHeader> field of the <xref:System.Windows.Forms.DataGridViewRowHeadersWidthSizeMode> enumeration.</span></span>

- <span data-ttu-id="9a5c4-154">Para obtener la máxima escalabilidad, desactive el ajuste de tamaño automático y use el cambio de tamaño mediante programación.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-154">For maximum scalability, turn off automatic sizing and use programmatic resizing.</span></span>

<span data-ttu-id="9a5c4-155">Para obtener más información, consulte [Opciones de ajuste de tamaño en el control DataGridView Windows Forms](sizing-options-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-155">For more information, see [Sizing Options in the Windows Forms DataGridView Control](sizing-options-in-the-windows-forms-datagridview-control.md).</span></span>

## <a name="using-the-selected-cells-rows-and-columns-collections-efficiently"></a><span data-ttu-id="9a5c4-156">Usar las colecciones de celdas, filas y columnas seleccionadas de forma eficaz</span><span class="sxs-lookup"><span data-stu-id="9a5c4-156">Using the Selected Cells, Rows, and Columns Collections Efficiently</span></span>

<span data-ttu-id="9a5c4-157">La colección de <xref:System.Windows.Forms.DataGridView.SelectedCells%2A> no funciona de forma eficaz con selecciones grandes.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-157">The <xref:System.Windows.Forms.DataGridView.SelectedCells%2A> collection does not perform efficiently with large selections.</span></span> <span data-ttu-id="9a5c4-158">Las colecciones <xref:System.Windows.Forms.DataGridView.SelectedRows%2A> y <xref:System.Windows.Forms.DataGridView.SelectedColumns%2A> también pueden ser ineficaces, aunque a un menor grado, ya que hay muchas menos filas que las celdas de un control <xref:System.Windows.Forms.DataGridView> típico y muchas menos columnas que filas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-158">The <xref:System.Windows.Forms.DataGridView.SelectedRows%2A> and <xref:System.Windows.Forms.DataGridView.SelectedColumns%2A> collections can also be inefficient, although to a lesser degree because there are many fewer rows than cells in a typical <xref:System.Windows.Forms.DataGridView> control, and many fewer columns than rows.</span></span> <span data-ttu-id="9a5c4-159">Para evitar las penalizaciones de rendimiento al trabajar con estas colecciones, use las siguientes directrices:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-159">To avoid performance penalties when working with these collections, use the following guidelines:</span></span>

- <span data-ttu-id="9a5c4-160">Para determinar si se han seleccionado todas las celdas de la <xref:System.Windows.Forms.DataGridView> antes de tener acceso al contenido de la colección <xref:System.Windows.Forms.DataGridView.SelectedCells%2A>, compruebe el valor devuelto del método <xref:System.Windows.Forms.DataGridView.AreAllCellsSelected%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-160">To determine whether all the cells in the <xref:System.Windows.Forms.DataGridView> have been selected before you access the contents of the <xref:System.Windows.Forms.DataGridView.SelectedCells%2A> collection, check the return value of the <xref:System.Windows.Forms.DataGridView.AreAllCellsSelected%2A> method.</span></span> <span data-ttu-id="9a5c4-161">Sin embargo, tenga en cuenta que este método puede hacer que las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-161">Note, however, that this method can cause rows to become unshared.</span></span> <span data-ttu-id="9a5c4-162">Para obtener más información, vea la próxima sección.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-162">For more information, see the next section.</span></span>

- <span data-ttu-id="9a5c4-163">Evite utilizar la propiedad <xref:System.Collections.ICollection.Count%2A> del <xref:System.Windows.Forms.DataGridViewSelectedCellCollection?displayProperty=nameWithType> para determinar el número de celdas seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-163">Avoid using the <xref:System.Collections.ICollection.Count%2A> property of the <xref:System.Windows.Forms.DataGridViewSelectedCellCollection?displayProperty=nameWithType> to determine the number of selected cells.</span></span> <span data-ttu-id="9a5c4-164">En su lugar, use el método <xref:System.Windows.Forms.DataGridView.GetCellCount%2A?displayProperty=nameWithType> y pase el valor <xref:System.Windows.Forms.DataGridViewElementStates.Selected?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-164">Instead, use the <xref:System.Windows.Forms.DataGridView.GetCellCount%2A?displayProperty=nameWithType> method and pass in the <xref:System.Windows.Forms.DataGridViewElementStates.Selected?displayProperty=nameWithType> value.</span></span> <span data-ttu-id="9a5c4-165">Del mismo modo, use los métodos <xref:System.Windows.Forms.DataGridViewRowCollection.GetRowCount%2A?displayProperty=nameWithType> y <xref:System.Windows.Forms.DataGridViewColumnCollection.GetColumnCount%2A?displayProperty=nameWithType> para determinar el número de elementos seleccionados, en lugar de tener acceso a las colecciones de filas y columnas seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-165">Similarly, use the <xref:System.Windows.Forms.DataGridViewRowCollection.GetRowCount%2A?displayProperty=nameWithType> and <xref:System.Windows.Forms.DataGridViewColumnCollection.GetColumnCount%2A?displayProperty=nameWithType> methods to determine the number of selected elements, rather than accessing the selected row and column collections.</span></span>

- <span data-ttu-id="9a5c4-166">Evite los modos de selección basados en celdas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-166">Avoid cell-based selection modes.</span></span> <span data-ttu-id="9a5c4-167">En su lugar, establezca la propiedad <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> en <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect?displayProperty=nameWithType> o <xref:System.Windows.Forms.DataGridViewSelectionMode.FullColumnSelect?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-167">Instead, set the <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> property to <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect?displayProperty=nameWithType> or <xref:System.Windows.Forms.DataGridViewSelectionMode.FullColumnSelect?displayProperty=nameWithType>.</span></span>

## <a name="using-shared-rows"></a><span data-ttu-id="9a5c4-168">Usar filas compartidas</span><span class="sxs-lookup"><span data-stu-id="9a5c4-168">Using Shared Rows</span></span>

<span data-ttu-id="9a5c4-169">El uso eficaz de la memoria se logra en el control <xref:System.Windows.Forms.DataGridView> a través de filas compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-169">Efficient memory use is achieved in the <xref:System.Windows.Forms.DataGridView> control through shared rows.</span></span> <span data-ttu-id="9a5c4-170">Las filas compartirán tanta información como sea posible en la apariencia y el comportamiento compartiendo las instancias de la clase <xref:System.Windows.Forms.DataGridViewRow>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-170">Rows will share as much information about their appearance and behavior as possible by sharing instances of the <xref:System.Windows.Forms.DataGridViewRow> class.</span></span>

<span data-ttu-id="9a5c4-171">Aunque compartir instancias de fila ahorra memoria, las filas pueden dejar de estar compartidas fácilmente.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-171">While sharing row instances saves memory, rows can easily become unshared.</span></span> <span data-ttu-id="9a5c4-172">Por ejemplo, cada vez que un usuario interactúa directamente con una celda, su fila deja de estar compartida.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-172">For example, whenever a user interacts directly with a cell, its row becomes unshared.</span></span> <span data-ttu-id="9a5c4-173">Dado que esto no se puede evitar, las instrucciones de este tema solo son útiles cuando se trabaja con grandes cantidades de datos y solo cuando los usuarios interactúan con una parte relativamente pequeña de los datos cada vez que se ejecuta el programa.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-173">Because this cannot be avoided, the guidelines in this topic are useful only when working with very large amounts of data and only when users will interact with a relatively small part of the data each time your program is run.</span></span>

<span data-ttu-id="9a5c4-174">No se puede compartir una fila en un control de <xref:System.Windows.Forms.DataGridView> independiente si alguna de sus celdas contiene valores.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-174">A row cannot be shared in an unbound <xref:System.Windows.Forms.DataGridView> control if any of its cells contain values.</span></span> <span data-ttu-id="9a5c4-175">Cuando el control de <xref:System.Windows.Forms.DataGridView> se enlaza a un origen de datos externo o al implementar el modo virtual y proporcionar su propio origen de datos, los valores de celda se almacenan fuera del control en lugar de en los objetos de celda, lo que permite compartir las filas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-175">When the <xref:System.Windows.Forms.DataGridView> control is bound to an external data source or when you implement virtual mode and provide your own data source, the cell values are stored outside the control rather than in cell objects, allowing the rows to be shared.</span></span>

<span data-ttu-id="9a5c4-176">Un objeto Row solo puede compartirse Si el estado de todas sus celdas se puede determinar a partir del estado de la fila y de los Estados de las columnas que contienen las celdas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-176">A row object can only be shared if the state of all its cells can be determined from the state of the row and the states of the columns containing the cells.</span></span> <span data-ttu-id="9a5c4-177">Si cambia el estado de una celda para que ya no se pueda deducir del estado de su fila y columna, no se puede compartir la fila.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-177">If you change the state of a cell so that it can no longer be deduced from the state of its row and column, the row cannot be shared.</span></span>

<span data-ttu-id="9a5c4-178">Por ejemplo, una fila no se puede compartir en ninguna de las situaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-178">For example, a row cannot be shared in any of the following situations:</span></span>

- <span data-ttu-id="9a5c4-179">La fila contiene una sola celda seleccionada que no está en la columna seleccionada.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-179">The row contains a single selected cell that is not in a selected column.</span></span>

- <span data-ttu-id="9a5c4-180">La fila contiene una celda con sus propiedades <xref:System.Windows.Forms.DataGridViewCell.ToolTipText%2A> o <xref:System.Windows.Forms.DataGridViewCell.ContextMenuStrip%2A> establecidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-180">The row contains a cell with its <xref:System.Windows.Forms.DataGridViewCell.ToolTipText%2A> or <xref:System.Windows.Forms.DataGridViewCell.ContextMenuStrip%2A> properties set.</span></span>

- <span data-ttu-id="9a5c4-181">La fila contiene un <xref:System.Windows.Forms.DataGridViewComboBoxCell> con su conjunto de propiedades <xref:System.Windows.Forms.DataGridViewComboBoxCell.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-181">The row contains a <xref:System.Windows.Forms.DataGridViewComboBoxCell> with its <xref:System.Windows.Forms.DataGridViewComboBoxCell.Items%2A> property set.</span></span>

<span data-ttu-id="9a5c4-182">En modo enlazado o en modo virtual, puede proporcionar información sobre herramientas y menús contextuales para celdas individuales mediante el control de los eventos <xref:System.Windows.Forms.DataGridView.CellToolTipTextNeeded> y <xref:System.Windows.Forms.DataGridView.CellContextMenuStripNeeded>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-182">In bound mode or virtual mode, you can provide ToolTips and shortcut menus for individual cells by handling the <xref:System.Windows.Forms.DataGridView.CellToolTipTextNeeded> and <xref:System.Windows.Forms.DataGridView.CellContextMenuStripNeeded> events.</span></span>

<span data-ttu-id="9a5c4-183">El control <xref:System.Windows.Forms.DataGridView> intentará usar automáticamente las filas compartidas cada vez que se agreguen filas a la <xref:System.Windows.Forms.DataGridViewRowCollection>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-183">The <xref:System.Windows.Forms.DataGridView> control will automatically attempt to use shared rows whenever rows are added to the <xref:System.Windows.Forms.DataGridViewRowCollection>.</span></span> <span data-ttu-id="9a5c4-184">Utilice las siguientes directrices para asegurarse de que las filas se comparten:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-184">Use the following guidelines to ensure that rows are shared:</span></span>

- <span data-ttu-id="9a5c4-185">Evite llamar a la sobrecarga `Add(Object[])` del método <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A> y la sobrecarga `Insert(Object[])` del método <xref:System.Windows.Forms.DataGridViewRowCollection.Insert%2A> de la colección <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-185">Avoid calling the `Add(Object[])` overload of the <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A> method and the `Insert(Object[])` overload of the <xref:System.Windows.Forms.DataGridViewRowCollection.Insert%2A> method of the <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType> collection.</span></span> <span data-ttu-id="9a5c4-186">Estas sobrecargas crean automáticamente filas no compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-186">These overloads automatically create unshared rows.</span></span>

- <span data-ttu-id="9a5c4-187">Asegúrese de que la fila especificada en la propiedad <xref:System.Windows.Forms.DataGridView.RowTemplate%2A?displayProperty=nameWithType> se puede compartir en los casos siguientes:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-187">Be sure that the row specified in the <xref:System.Windows.Forms.DataGridView.RowTemplate%2A?displayProperty=nameWithType> property can be shared in the following cases:</span></span>

  - <span data-ttu-id="9a5c4-188">Al llamar a las sobrecargas `Add()` o `Add(Int32)` del método <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A> o la sobrecarga `Insert(Int32,Int32)` del método <xref:System.Windows.Forms.DataGridViewRowCollection.Insert%2A> de la colección <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-188">When calling the `Add()` or `Add(Int32)` overloads of the <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A> method or the `Insert(Int32,Int32)` overload of the <xref:System.Windows.Forms.DataGridViewRowCollection.Insert%2A> method of the <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType> collection.</span></span>

  - <span data-ttu-id="9a5c4-189">Al aumentar el valor de la propiedad <xref:System.Windows.Forms.DataGridView.RowCount%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-189">When increasing the value of the <xref:System.Windows.Forms.DataGridView.RowCount%2A?displayProperty=nameWithType> property.</span></span>

  - <span data-ttu-id="9a5c4-190">Al establecer la propiedad <xref:System.Windows.Forms.DataGridView.DataSource%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-190">When setting the <xref:System.Windows.Forms.DataGridView.DataSource%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="9a5c4-191">Asegúrese de que la fila indicada por el parámetro `indexSource` se puede compartir al llamar a los métodos <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopy%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopies%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.InsertCopy%2A>y <xref:System.Windows.Forms.DataGridViewRowCollection.InsertCopies%2A> de la colección <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-191">Be sure that the row indicated by the `indexSource` parameter can be shared when calling the <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopy%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopies%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.InsertCopy%2A>, and <xref:System.Windows.Forms.DataGridViewRowCollection.InsertCopies%2A> methods of the <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType> collection.</span></span>

- <span data-ttu-id="9a5c4-192">Asegúrese de que se pueden compartir las filas especificadas al llamar a la sobrecarga `Add(DataGridViewRow)` del método <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A>, el método <xref:System.Windows.Forms.DataGridViewRowCollection.AddRange%2A>, la sobrecarga `Insert(Int32,DataGridViewRow)` del método <xref:System.Windows.Forms.DataGridViewRowCollection.Insert%2A> y el método <xref:System.Windows.Forms.DataGridViewRowCollection.InsertRange%2A> de la colección <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-192">Be sure that the specified row or rows can be shared when calling the `Add(DataGridViewRow)` overload of the <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A> method, the <xref:System.Windows.Forms.DataGridViewRowCollection.AddRange%2A> method, the `Insert(Int32,DataGridViewRow)` overload of the <xref:System.Windows.Forms.DataGridViewRowCollection.Insert%2A> method, and the <xref:System.Windows.Forms.DataGridViewRowCollection.InsertRange%2A> method of the <xref:System.Windows.Forms.DataGridView.Rows%2A?displayProperty=nameWithType> collection.</span></span>

<span data-ttu-id="9a5c4-193">Para determinar si una fila está compartida, utilice el método <xref:System.Windows.Forms.DataGridViewRowCollection.SharedRow%2A?displayProperty=nameWithType> para recuperar el objeto Row y, a continuación, Compruebe la propiedad <xref:System.Windows.Forms.DataGridViewBand.Index%2A> del objeto.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-193">To determine whether a row is shared, use the <xref:System.Windows.Forms.DataGridViewRowCollection.SharedRow%2A?displayProperty=nameWithType> method to retrieve the row object, and then check the object's <xref:System.Windows.Forms.DataGridViewBand.Index%2A> property.</span></span> <span data-ttu-id="9a5c4-194">Las filas compartidas siempre tienen un valor de propiedad <xref:System.Windows.Forms.DataGridViewBand.Index%2A> de – 1.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-194">Shared rows always have an <xref:System.Windows.Forms.DataGridViewBand.Index%2A> property value of –1.</span></span>

## <a name="preventing-rows-from-becoming-unshared"></a><span data-ttu-id="9a5c4-195">Impedir que las filas se conviertan en no compartidas</span><span class="sxs-lookup"><span data-stu-id="9a5c4-195">Preventing Rows from Becoming Unshared</span></span>

<span data-ttu-id="9a5c4-196">Las filas compartidas pueden dejar de estar compartidas como resultado del código o de la acción del usuario.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-196">Shared rows can become unshared as a result of code or user action.</span></span> <span data-ttu-id="9a5c4-197">Para evitar un impacto en el rendimiento, debe evitar que las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-197">To avoid a performance impact, you should avoid causing rows to become unshared.</span></span> <span data-ttu-id="9a5c4-198">Durante el desarrollo de la aplicación, puede controlar el evento <xref:System.Windows.Forms.DataGridView.RowUnshared> para determinar cuándo dejan de estar compartidas las filas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-198">During application development, you can handle the <xref:System.Windows.Forms.DataGridView.RowUnshared> event to determine when rows become unshared.</span></span> <span data-ttu-id="9a5c4-199">Esto resulta útil al depurar problemas de uso compartido de filas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-199">This is useful when debugging row-sharing problems.</span></span>

<span data-ttu-id="9a5c4-200">Para evitar que las filas deje de estar compartidas, utilice las siguientes directrices:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-200">To prevent rows from becoming unshared, use the following guidelines:</span></span>

- <span data-ttu-id="9a5c4-201">Evite indizar la colección de <xref:System.Windows.Forms.DataGridView.Rows%2A> o recorrer en iteración con un bucle `foreach`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-201">Avoid indexing the <xref:System.Windows.Forms.DataGridView.Rows%2A> collection or iterating through it with a `foreach` loop.</span></span> <span data-ttu-id="9a5c4-202">Normalmente, no necesitará tener acceso a las filas directamente.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-202">You will not typically need to access rows directly.</span></span> <span data-ttu-id="9a5c4-203"><xref:System.Windows.Forms.DataGridView> métodos que operan en filas toman argumentos de índice de fila en lugar de instancias de fila.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-203"><xref:System.Windows.Forms.DataGridView> methods that operate on rows take row index arguments rather than row instances.</span></span> <span data-ttu-id="9a5c4-204">Además, los controladores de los eventos relacionados con filas reciben objetos de argumento de evento con propiedades de fila que se pueden usar para manipular las filas sin provocar que dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-204">Additionally, handlers for row-related events receive event argument objects with row properties that you can use to manipulate rows without causing them to become unshared.</span></span>

- <span data-ttu-id="9a5c4-205">Si necesita tener acceso a un objeto de fila, use el método <xref:System.Windows.Forms.DataGridViewRowCollection.SharedRow%2A?displayProperty=nameWithType> y pase el índice real de la fila.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-205">If you need to access a row object, use the <xref:System.Windows.Forms.DataGridViewRowCollection.SharedRow%2A?displayProperty=nameWithType> method and pass in the row's actual index.</span></span> <span data-ttu-id="9a5c4-206">Tenga en cuenta, sin embargo, que la modificación de un objeto de fila compartido recuperado a través de este método modificará todas las filas que comparten este objeto.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-206">Note, however, that modifying a shared row object retrieved through this method will modify all the rows that share this object.</span></span> <span data-ttu-id="9a5c4-207">Sin embargo, la fila de los nuevos registros no se comparte con otras filas, por lo que no se verá afectada cuando modifique cualquier otra fila.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-207">The row for new records is not shared with other rows, however, so it will not be affected when you modify any other row.</span></span> <span data-ttu-id="9a5c4-208">Tenga en cuenta también que las distintas filas representadas por una fila compartida pueden tener menús contextuales diferentes.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-208">Note also that different rows represented by a shared row may have different shortcut menus.</span></span> <span data-ttu-id="9a5c4-209">Para recuperar el menú contextual correcto de una instancia de fila compartida, utilice el método <xref:System.Windows.Forms.DataGridViewRow.GetContextMenuStrip%2A> y pase el índice real de la fila.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-209">To retrieve the correct shortcut menu from a shared row instance, use the <xref:System.Windows.Forms.DataGridViewRow.GetContextMenuStrip%2A> method and pass in the row's actual index.</span></span> <span data-ttu-id="9a5c4-210">Si tiene acceso a la propiedad <xref:System.Windows.Forms.DataGridViewRow.ContextMenuStrip%2A> de la fila compartida, utilizará el índice de fila compartido de-1 y no recuperará el menú contextual correcto.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-210">If you access the shared row's <xref:System.Windows.Forms.DataGridViewRow.ContextMenuStrip%2A> property instead, it will use the shared row index of -1 and will not retrieve the correct shortcut menu.</span></span>

- <span data-ttu-id="9a5c4-211">Evite indizar la colección de <xref:System.Windows.Forms.DataGridViewRow.Cells%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-211">Avoid indexing the <xref:System.Windows.Forms.DataGridViewRow.Cells%2A?displayProperty=nameWithType> collection.</span></span> <span data-ttu-id="9a5c4-212">El acceso a una celda directamente hará que su fila primaria deje de estar compartida, creando una instancia de una nueva <xref:System.Windows.Forms.DataGridViewRow>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-212">Accessing a cell directly will cause its parent row to become unshared, instantiating a new <xref:System.Windows.Forms.DataGridViewRow>.</span></span> <span data-ttu-id="9a5c4-213">Los controladores de los eventos relacionados con las celdas reciben objetos de argumento de evento con propiedades de celda que se pueden usar para manipular celdas sin hacer que las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-213">Handlers for cell-related events receive event argument objects with cell properties that you can use to manipulate cells without causing rows to become unshared.</span></span> <span data-ttu-id="9a5c4-214">También puede utilizar la propiedad <xref:System.Windows.Forms.DataGridView.CurrentCellAddress%2A> para recuperar los índices de fila y columna de la celda actual sin tener acceso directamente a la celda.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-214">You can also use the <xref:System.Windows.Forms.DataGridView.CurrentCellAddress%2A> property to retrieve the row and column indexes of the current cell without accessing the cell directly.</span></span>

- <span data-ttu-id="9a5c4-215">Evite los modos de selección basados en celdas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-215">Avoid cell-based selection modes.</span></span> <span data-ttu-id="9a5c4-216">Estos modos hacen que las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-216">These modes cause rows to become unshared.</span></span> <span data-ttu-id="9a5c4-217">En su lugar, establezca la propiedad <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> en <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect?displayProperty=nameWithType> o <xref:System.Windows.Forms.DataGridViewSelectionMode.FullColumnSelect?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-217">Instead, set the <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> property to <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect?displayProperty=nameWithType> or <xref:System.Windows.Forms.DataGridViewSelectionMode.FullColumnSelect?displayProperty=nameWithType>.</span></span>

- <span data-ttu-id="9a5c4-218">No controle los eventos <xref:System.Windows.Forms.DataGridViewRowCollection.CollectionChanged?displayProperty=nameWithType> o <xref:System.Windows.Forms.DataGridView.RowStateChanged?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-218">Do not handle the <xref:System.Windows.Forms.DataGridViewRowCollection.CollectionChanged?displayProperty=nameWithType> or <xref:System.Windows.Forms.DataGridView.RowStateChanged?displayProperty=nameWithType> events.</span></span> <span data-ttu-id="9a5c4-219">Estos eventos hacen que las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-219">These events cause rows to become unshared.</span></span> <span data-ttu-id="9a5c4-220">Además, no llame a los métodos <xref:System.Windows.Forms.DataGridViewRowCollection.OnCollectionChanged%2A?displayProperty=nameWithType> o <xref:System.Windows.Forms.DataGridView.OnRowStateChanged%2A?displayProperty=nameWithType>, que provocan estos eventos.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-220">Also, do not call the <xref:System.Windows.Forms.DataGridViewRowCollection.OnCollectionChanged%2A?displayProperty=nameWithType> or <xref:System.Windows.Forms.DataGridView.OnRowStateChanged%2A?displayProperty=nameWithType> methods, which raise these events.</span></span>

- <span data-ttu-id="9a5c4-221">No tener acceso a la colección de <xref:System.Windows.Forms.DataGridView.SelectedCells%2A?displayProperty=nameWithType> cuando el valor de la propiedad <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> es <xref:System.Windows.Forms.DataGridViewSelectionMode.FullColumnSelect>, <xref:System.Windows.Forms.DataGridViewSelectionMode.ColumnHeaderSelect>, <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect>o <xref:System.Windows.Forms.DataGridViewSelectionMode.RowHeaderSelect>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-221">Do not access the <xref:System.Windows.Forms.DataGridView.SelectedCells%2A?displayProperty=nameWithType> collection when the <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> property value is <xref:System.Windows.Forms.DataGridViewSelectionMode.FullColumnSelect>, <xref:System.Windows.Forms.DataGridViewSelectionMode.ColumnHeaderSelect>, <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect>, or <xref:System.Windows.Forms.DataGridViewSelectionMode.RowHeaderSelect>.</span></span> <span data-ttu-id="9a5c4-222">Esto hace que todas las filas seleccionadas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-222">This causes all selected rows to become unshared.</span></span>

- <span data-ttu-id="9a5c4-223">No llame al método <xref:System.Windows.Forms.DataGridView.AreAllCellsSelected%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-223">Do not call the <xref:System.Windows.Forms.DataGridView.AreAllCellsSelected%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="9a5c4-224">Este método puede hacer que las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-224">This method can cause rows to become unshared.</span></span>

- <span data-ttu-id="9a5c4-225">No llame al método <xref:System.Windows.Forms.DataGridView.SelectAll%2A?displayProperty=nameWithType> cuando se <xref:System.Windows.Forms.DataGridViewSelectionMode.CellSelect>el valor de la propiedad <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-225">Do not call the <xref:System.Windows.Forms.DataGridView.SelectAll%2A?displayProperty=nameWithType> method when the <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> property value is <xref:System.Windows.Forms.DataGridViewSelectionMode.CellSelect>.</span></span> <span data-ttu-id="9a5c4-226">Esto hace que todas las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-226">This causes all rows to become unshared.</span></span>

- <span data-ttu-id="9a5c4-227">No establezca la propiedad <xref:System.Windows.Forms.DataGridViewCell.ReadOnly%2A> o <xref:System.Windows.Forms.DataGridViewCell.Selected%2A> de una celda en `false` cuando la propiedad correspondiente de su columna esté establecida en `true`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-227">Do not set the <xref:System.Windows.Forms.DataGridViewCell.ReadOnly%2A> or <xref:System.Windows.Forms.DataGridViewCell.Selected%2A> property of a cell to `false` when the corresponding property in its column is set to `true`.</span></span> <span data-ttu-id="9a5c4-228">Esto hace que todas las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-228">This causes all rows to become unshared.</span></span>

- <span data-ttu-id="9a5c4-229">No tener acceso a la propiedad <xref:System.Windows.Forms.DataGridViewRowCollection.List%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-229">Do not access the <xref:System.Windows.Forms.DataGridViewRowCollection.List%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="9a5c4-230">Esto hace que todas las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-230">This causes all rows to become unshared.</span></span>

- <span data-ttu-id="9a5c4-231">No llame a la sobrecarga `Sort(IComparer)` del método <xref:System.Windows.Forms.DataGridView.Sort%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-231">Do not call the `Sort(IComparer)` overload of the <xref:System.Windows.Forms.DataGridView.Sort%2A> method.</span></span> <span data-ttu-id="9a5c4-232">La ordenación con un comparador personalizado hace que todas las filas dejen de estar compartidas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-232">Sorting with a custom comparer causes all rows to become unshared.</span></span>

## <a name="see-also"></a><span data-ttu-id="9a5c4-233">Consulte también</span><span class="sxs-lookup"><span data-stu-id="9a5c4-233">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- [<span data-ttu-id="9a5c4-234">Ajuste del rendimiento del control DataGridView en Windows Forms</span><span class="sxs-lookup"><span data-stu-id="9a5c4-234">Performance Tuning in the Windows Forms DataGridView Control</span></span>](performance-tuning-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="9a5c4-235">Modo virtual del control DataGridView de Windows Forms</span><span class="sxs-lookup"><span data-stu-id="9a5c4-235">Virtual Mode in the Windows Forms DataGridView Control</span></span>](virtual-mode-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="9a5c4-236">Modos de presentación de datos en el control DataGridView de Windows Forms</span><span class="sxs-lookup"><span data-stu-id="9a5c4-236">Data Display Modes in the Windows Forms DataGridView Control</span></span>](data-display-modes-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="9a5c4-237">Estilos de celda en el control DataGridView de Windows Forms</span><span class="sxs-lookup"><span data-stu-id="9a5c4-237">Cell Styles in the Windows Forms DataGridView Control</span></span>](cell-styles-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="9a5c4-238">Establecer estilos de celda predeterminados para el control DataGridView de formularios Windows Forms</span><span class="sxs-lookup"><span data-stu-id="9a5c4-238">How to: Set Default Cell Styles for the Windows Forms DataGridView Control</span></span>](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="9a5c4-239">Opciones de ajuste de tamaño en el control DataGridView de formularios Windows Forms</span><span class="sxs-lookup"><span data-stu-id="9a5c4-239">Sizing Options in the Windows Forms DataGridView Control</span></span>](sizing-options-in-the-windows-forms-datagridview-control.md)
