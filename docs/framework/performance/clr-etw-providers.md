---
title: Proveedores ETW de CLR
ms.date: 03/30/2017
helpviewer_keywords:
- ETW, CLR providers
- CLR ETW providers
ms.assetid: 0beafad4-b2c8-47f4-b342-83411d57a51f
ms.openlocfilehash: 33ef7491c2bffeda4ef737ed8f826cdfbfbb119d
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/14/2020
ms.locfileid: "79401008"
---
# <a name="clr-etw-providers"></a><span data-ttu-id="f6f69-102">Proveedores ETW de CLR</span><span class="sxs-lookup"><span data-stu-id="f6f69-102">CLR ETW Providers</span></span>
<span data-ttu-id="f6f69-103">El Common Language Runtime (CLR) tiene dos proveedores: el proveedor de runtime y el proveedor del informe detallado.</span><span class="sxs-lookup"><span data-stu-id="f6f69-103">The common language runtime (CLR) has two providers: the runtime provider and the rundown provider.</span></span>  
  
 <span data-ttu-id="f6f69-104">El proveedor de runtime genera eventos en función de las palabras clave (categorías de eventos) que están habilitadas.</span><span class="sxs-lookup"><span data-stu-id="f6f69-104">The runtime provider raises events, depending on which keywords (categories of events) are enabled.</span></span> <span data-ttu-id="f6f69-105">Por ejemplo, puede recopilar eventos de cargador habilitando la palabra clave `LoaderKeyword`.</span><span class="sxs-lookup"><span data-stu-id="f6f69-105">For example, you can collect loader events by enabling the `LoaderKeyword` keyword.</span></span>  
  
 <span data-ttu-id="f6f69-106">Los eventos de seguimiento de eventos para Windows (ETW) se registran en un archivo que tiene una extensión .etl, que posteriormente se puede procesar posteriormente en archivos de valores separados por comas (.csv) según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="f6f69-106">Event Tracing for Windows (ETW) events are logged into a file that has an .etl extension, which can later be post-processed in comma-separated value (.csv) files as needed.</span></span> <span data-ttu-id="f6f69-107">Para más información sobre cómo convertir el archivo .etl en un archivo .csv, vea [Controlling .NET Framework Logging (Controlar el registro de .NET Framework)](controlling-logging.md).</span><span class="sxs-lookup"><span data-stu-id="f6f69-107">For information about how to convert the .etl file to a .csv file, see [Controlling .NET Framework Logging](controlling-logging.md).</span></span>  
  
## <a name="the-runtime-provider"></a><span data-ttu-id="f6f69-108">El proveedor en tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="f6f69-108">The Runtime Provider</span></span>  
 <span data-ttu-id="f6f69-109">El proveedor en tiempo de ejecución es el principal proveedor ETW de CLR.</span><span class="sxs-lookup"><span data-stu-id="f6f69-109">The runtime provider is the main CLR ETW provider.</span></span>  
  
 <span data-ttu-id="f6f69-110">El GUID del proveedor en tiempo de ejecución de CLR es e13c0d23-ccbc-4e12-931b-d9cc2eee27e4.</span><span class="sxs-lookup"><span data-stu-id="f6f69-110">The CLR runtime provider GUID is e13c0d23-ccbc-4e12-931b-d9cc2eee27e4.</span></span>  
  
 <span data-ttu-id="f6f69-111">Para obtener ejemplos sobre cómo registrar y ver eventos ETW de CLR con las herramientas habituales, vea [Controlling .NET Framework Logging (Controlar el registro de .NET Framework)](controlling-logging.md).</span><span class="sxs-lookup"><span data-stu-id="f6f69-111">For examples of how to log and view CLR ETW events by using commonly available tools, see [Controlling .NET Framework Logging](controlling-logging.md).</span></span>  
  
 <span data-ttu-id="f6f69-112">Además de utilizar las palabras clave como `LoaderKeyword`, puede que sea preciso habilitar palabras clave para registrar eventos que se generen con demasiada frecuencia.</span><span class="sxs-lookup"><span data-stu-id="f6f69-112">In addition to using keywords such as `LoaderKeyword`, you may have to enable keywords for logging events that may be raised too frequently.</span></span> <span data-ttu-id="f6f69-113">Las palabras clave `StartEnumerationKeyword` y `EndEnumerationKeyword` habilitan estos eventos y se resumen en [Palabras clave y niveles ETW de CLR](clr-etw-keywords-and-levels.md).</span><span class="sxs-lookup"><span data-stu-id="f6f69-113">The `StartEnumerationKeyword` and the `EndEnumerationKeyword` keywords enable these events and are summarized in [CLR ETW Keywords and Levels](clr-etw-keywords-and-levels.md).</span></span>  
  
## <a name="the-rundown-provider"></a><span data-ttu-id="f6f69-114">El proveedor de informe detallado</span><span class="sxs-lookup"><span data-stu-id="f6f69-114">The Rundown Provider</span></span>  
 <span data-ttu-id="f6f69-115">El proveedor del informe detallado debe estar activado para algunos usos específicos.</span><span class="sxs-lookup"><span data-stu-id="f6f69-115">The rundown provider must be turned on for certain special-purpose uses.</span></span> <span data-ttu-id="f6f69-116">Sin embargo, para la mayoría de los usuarios, el proveedor de runtime debe bastar.</span><span class="sxs-lookup"><span data-stu-id="f6f69-116">However, for a majority of users, the runtime provider should suffice.</span></span>  
  
 <span data-ttu-id="f6f69-117">El GUID del proveedor de informe detallado de CLR es A669021C-C450-4609-A035-5AF59AF4DF18.</span><span class="sxs-lookup"><span data-stu-id="f6f69-117">The CLR rundown provider GUID is A669021C-C450-4609-A035-5AF59AF4DF18.</span></span>  
  
 <span data-ttu-id="f6f69-118">Normalmente, el registro ETW se habilita antes de iniciar un proceso y el registro se desactiva al salir del proceso.</span><span class="sxs-lookup"><span data-stu-id="f6f69-118">Normally, ETW logging is enabled before a process launches, and the logging is turned off after the process exits.</span></span> <span data-ttu-id="f6f69-119">Sin embargo, si se activa el registro ETW mientras el proceso se está ejecutando, se necesita información adicional sobre el proceso.</span><span class="sxs-lookup"><span data-stu-id="f6f69-119">However, if ETW logging is turned on while the process is executing, additional information is needed about the process.</span></span> <span data-ttu-id="f6f69-120">Por ejemplo, para la resolución de símbolos es preciso registrar eventos de método para los métodos que ya estaban cargados antes de que se activara el registro.</span><span class="sxs-lookup"><span data-stu-id="f6f69-120">For example, for symbol resolution you have to log method events for methods that were already loaded before logging was turned on.</span></span>  
  
 <span data-ttu-id="f6f69-121">Los eventos `DCStart` y `DCEnd` capturan el estado del proceso cuando se inició y detuvo la recolección de datos.</span><span class="sxs-lookup"><span data-stu-id="f6f69-121">The `DCStart` and `DCEnd` events capture the state of the process when data collection was started and stopped.</span></span> <span data-ttu-id="f6f69-122">(Estado hace referencia a la información a un alto nivel, incluidos los métodos que ya estaban compilados just-in-time (JIT) y los ensamblados que se cargaron.) Estos dos eventos pueden proporcionar información sobre lo que ya ha sucedido en el proceso; por ejemplo, qué métodos fueron compilados JIT, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="f6f69-122">(State refers to information at a high level, including the methods that were already just-in-time (JIT) compiled and assemblies that were loaded.) These two events can provide information about what has already happened in the process; for example, which methods were JIT- compiled, and so on.</span></span>  
  
 <span data-ttu-id="f6f69-123">Solo los eventos con `DC`, `DCStart`, `DCEnd` o `DCInit` en sus nombres se provocan con el proveedor de informe detallado.</span><span class="sxs-lookup"><span data-stu-id="f6f69-123">Only the events with `DC`, `DCStart`, `DCEnd`, or `DCInit` in their names are raised under the rundown provider.</span></span> <span data-ttu-id="f6f69-124">Además, estos eventos solo se provocan con el proveedor de informe detallado.</span><span class="sxs-lookup"><span data-stu-id="f6f69-124">Additionally, these events are raised only under the rundown provider.</span></span>  
  
 <span data-ttu-id="f6f69-125">Además de los filtros de palabras clave de eventos, el proveedor de informe detallado también admite las palabras clave `StartRundownKeyword` y `EndRundownKeyword` para proporcionar un filtrado concreto.</span><span class="sxs-lookup"><span data-stu-id="f6f69-125">In addition to the event keyword filters, the rundown provider also supports the `StartRundownKeyword` and `EndRundownKeyword` keywords to provide targeted filtering.</span></span>  
  
### <a name="start-rundown"></a><span data-ttu-id="f6f69-126">Informe detallado de inicio</span><span class="sxs-lookup"><span data-stu-id="f6f69-126">Start Rundown</span></span>  
 <span data-ttu-id="f6f69-127">Se activa un informe detallado de inicio cuando se habilita el registro con el proveedor de informe detallado mediante la palabra clave `StartRundownKeyword`.</span><span class="sxs-lookup"><span data-stu-id="f6f69-127">A start rundown is triggered when logging under the rundown provider is enabled with the `StartRundownKeyword` keyword.</span></span> <span data-ttu-id="f6f69-128">Esto provoca el evento `DCStart` y captura el estado del sistema.</span><span class="sxs-lookup"><span data-stu-id="f6f69-128">This causes the `DCStart` event to be raised, and captures the state of the system.</span></span> <span data-ttu-id="f6f69-129">Antes del inicio de la enumeración, se genera el evento `DCStartInit`.</span><span class="sxs-lookup"><span data-stu-id="f6f69-129">Before the start of the enumeration, the `DCStartInit` event is raised.</span></span> <span data-ttu-id="f6f69-130">Al final de la enumeración, se provoca el evento `DCStartComplete` para notificar al controlador que la recolección de datos finalizó normalmente.</span><span class="sxs-lookup"><span data-stu-id="f6f69-130">At the end of the enumeration, the `DCStartComplete` event is raised to notify the controller that data collection terminated normally.</span></span>  
  
### <a name="end-rundown"></a><span data-ttu-id="f6f69-131">Informe detallado de fin</span><span class="sxs-lookup"><span data-stu-id="f6f69-131">End Rundown</span></span>  
 <span data-ttu-id="f6f69-132">Se activa un informe detallado de fin cuando se habilita el registro con el proveedor de informe detallado mediante la palabra clave `EndRundownKeyword`.</span><span class="sxs-lookup"><span data-stu-id="f6f69-132">An end rundown is triggered when logging under the rundown provider is enabled with the `EndRundownKeyword` keyword.</span></span> <span data-ttu-id="f6f69-133">El informe detallado de fin deja de generar perfiles en un proceso que continúa ejecutándose.</span><span class="sxs-lookup"><span data-stu-id="f6f69-133">End rundown stops profiling on a process that continues to execute.</span></span> <span data-ttu-id="f6f69-134">Los eventos `DCEnd` capturan el estado del sistema al detener la generación de perfiles.</span><span class="sxs-lookup"><span data-stu-id="f6f69-134">The `DCEnd` events capture the state of the system when profiling is stopped.</span></span>  
  
 <span data-ttu-id="f6f69-135">Antes del inicio de la enumeración, se genera el evento `DCEndInit`.</span><span class="sxs-lookup"><span data-stu-id="f6f69-135">Before the start of the enumeration, the `DCEndInit` event is raised.</span></span> <span data-ttu-id="f6f69-136">Al final de la enumeración, se provoca el evento `DCEndComplete` para notificar al consumidor que la recolección de datos finalizó normalmente.</span><span class="sxs-lookup"><span data-stu-id="f6f69-136">At the end of the enumeration, the `DCEndComplete` event is raised to notify the consumer that data collection terminated normally.</span></span> <span data-ttu-id="f6f69-137">El informe detallado de inicio y de fin se utilizan principalmente para la resolución de símbolos administrados.</span><span class="sxs-lookup"><span data-stu-id="f6f69-137">Start rundown and end rundown are primarily used for managed symbol resolution.</span></span> <span data-ttu-id="f6f69-138">El informe detallado de inicio puede proporcionar información de intervalos de dirección para los métodos que ya estaban compilados JIT antes de que se iniciara la sesión de generación de perfiles.</span><span class="sxs-lookup"><span data-stu-id="f6f69-138">Start rundown can provide address range information for methods that were already JIT-compiled before the profiling session was started.</span></span> <span data-ttu-id="f6f69-139">El informe detallado de fin puede proporcionar información sobre intervalos de dirección de todos los métodos que se han compilado JIT cuando la generación de perfiles está a punto de desactivarse.</span><span class="sxs-lookup"><span data-stu-id="f6f69-139">End rundown can provide address range information for all methods that have been JIT-compiled when profiling is about to be turned off.</span></span>  
  
 <span data-ttu-id="f6f69-140">El informe detallado de fin no se produce automáticamente cuando se detiene una sesión de generación de perfiles.</span><span class="sxs-lookup"><span data-stu-id="f6f69-140">End rundown does not happen automatically when a profiling session is stopped.</span></span> <span data-ttu-id="f6f69-141">En su lugar, una herramienta que está intentando realizar una resolución de símbolos administrados tiene que invocar explícitamente una sesión de proveedor de informe detallado de CLR con la palabra clave `EndRundownKeyword` habilitada, justo antes de que se detenga la generación de perfiles.</span><span class="sxs-lookup"><span data-stu-id="f6f69-141">Instead, a tool that is seeking to perform managed symbol resolution has to explicitly invoke a CLR rundown provider session with the `EndRundownKeyword` keyword enabled, just before profiling is stopped.</span></span>  
  
 <span data-ttu-id="f6f69-142">Aunque el informe detallado de inicio o de fin pueden proporcionar ambos información de intervalos de dirección de métodos para la resolución de símbolos administrados, recomendamos utilizar la palabra clave `EndRundownKeyword` (que proporciona eventos `DCEnd`) en lugar de la palabra clave `StartRundownKeyword` (que proporciona eventos `DCStart`).</span><span class="sxs-lookup"><span data-stu-id="f6f69-142">Although either start rundown or end rundown can provide method address range information for managed symbol resolution, we recommend that you use the `EndRundownKeyword` keyword (which supplies `DCEnd` events) instead of the `StartRundownKeyword` keyword (which supplies `DCStart` events).</span></span> <span data-ttu-id="f6f69-143">El uso de `StartRundownKeyword` provoca la ejecución del informe detallado durante la sesión de generación de perfiles, lo que puede alterar el escenario de generación de perfiles.</span><span class="sxs-lookup"><span data-stu-id="f6f69-143">Using `StartRundownKeyword` causes the rundown to happen during the profiling session, which may disturb the profiled scenario.</span></span>  
  
## <a name="etw-data-collection-using-runtime-and-rundown-providers"></a><span data-ttu-id="f6f69-144">Recolección de datos ETW mediante los proveedores en tiempo de ejecución y de informe detallado</span><span class="sxs-lookup"><span data-stu-id="f6f69-144">ETW Data Collection Using Runtime and Rundown Providers</span></span>  
 <span data-ttu-id="f6f69-145">En el siguiente ejemplo se muestra cómo utilizar el proveedor de informe detallado de CLR de una manera que permita la resolución de símbolos de procesos administrados con un impacto mínimo, sin tener en cuenta si los procesos se inician o finalizan dentro o fuera de la ventana de generación de perfiles.</span><span class="sxs-lookup"><span data-stu-id="f6f69-145">The following example demonstrates how to use the CLR rundown provider in a way that allows symbol resolution of managed processes with minimal impact, regardless of whether the processes start or end inside or outside the profiled window.</span></span>  
  
1. <span data-ttu-id="f6f69-146">Active el registro ETW mediante el proveedor en tiempo de ejecución de CLR:</span><span class="sxs-lookup"><span data-stu-id="f6f69-146">Turn on ETW logging by using the CLR runtime provider:</span></span>  
  
    ```console
    xperf -start clr -on e13c0d23-ccbc-4e12-931b-d9cc2eee27e4:0x1CCBD:0x5 -f clr1.etl
    ```  
  
     <span data-ttu-id="f6f69-147">El registro se guardará en el archivo clr1.etl.</span><span class="sxs-lookup"><span data-stu-id="f6f69-147">The log will be saved to the clr1.etl file.</span></span>  
  
2. <span data-ttu-id="f6f69-148">Para detener la generación de perfiles mientras continúa ejecutándose el proceso, inicie el proveedor de informe detallado para capturar los eventos `DCEnd`:</span><span class="sxs-lookup"><span data-stu-id="f6f69-148">To stop profiling while the process continues to execute, start the rundown provider to capture the `DCEnd` events:</span></span>  
  
    ```console
    xperf -start clrRundown -on A669021C-C450-4609-A035-5AF59AF4DF18:0xB8:0x5 -f clr2.etl
    ```  
  
     <span data-ttu-id="f6f69-149">Esto permite a la colección de eventos `DCEnd` iniciar una sesión de informe detallado.</span><span class="sxs-lookup"><span data-stu-id="f6f69-149">This enables the collection of `DCEnd` events to start a rundown session.</span></span> <span data-ttu-id="f6f69-150">Es posible que deba esperar entre 30 y 60 segundos para recopilar todos los eventos.</span><span class="sxs-lookup"><span data-stu-id="f6f69-150">You may need to wait 30 to 60 seconds for all events to be collected.</span></span> <span data-ttu-id="f6f69-151">El registro se guardará en el archivo clr1.et2.</span><span class="sxs-lookup"><span data-stu-id="f6f69-151">The log will be saved to the clr1.et2 file.</span></span>  
  
3. <span data-ttu-id="f6f69-152">Desactive toda la generación de perfiles ETW:</span><span class="sxs-lookup"><span data-stu-id="f6f69-152">Turn off all ETW profiling:</span></span>  
  
    ```console
    xperf -stop clrRundown
    xperf -stop clr  
    ```  
  
4. <span data-ttu-id="f6f69-153">Fusione mediante combinación los perfiles para crear un archivo de registro:</span><span class="sxs-lookup"><span data-stu-id="f6f69-153">Merge the profiles to create one log file:</span></span>  
  
    ```console
    xperf -merge clr1.etl clr2.etl merged.etl  
    ```  
  
     <span data-ttu-id="f6f69-154">El archivo merged.etl contendrá los eventos de las sesiones de los proveedores en tiempo de ejecución y de informe detallado.</span><span class="sxs-lookup"><span data-stu-id="f6f69-154">The merged.etl file will contain the events from the runtime and the rundown provider sessions.</span></span>  
  
 <span data-ttu-id="f6f69-155">Una herramienta puede ejecutar los pasos 2 y 3 (iniciando una sesión de informe detallado y finalizando la generación de perfiles) en lugar de desactivar la generación de perfiles de inmediato cuando un usuario solicita la detención de dicha generación.</span><span class="sxs-lookup"><span data-stu-id="f6f69-155">A tool can execute steps 2 and 3 (starting a rundown session and then terminating profiling) instead of immediately turning off profiling when a user requests profiling to be stopped.</span></span> <span data-ttu-id="f6f69-156">Una herramienta también puede ejecutar el paso 4.</span><span class="sxs-lookup"><span data-stu-id="f6f69-156">A tool can also execute step 4.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f6f69-157">Consulte también</span><span class="sxs-lookup"><span data-stu-id="f6f69-157">See also</span></span>

- [<span data-ttu-id="f6f69-158">Eventos ETW en Common Language Runtime</span><span class="sxs-lookup"><span data-stu-id="f6f69-158">ETW Events in the Common Language Runtime</span></span>](etw-events-in-the-common-language-runtime.md)
