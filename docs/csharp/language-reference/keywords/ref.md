---
title: ref (palabra clave) - Referencia de C#
ms.date: 03/19/2020
f1_keywords:
- ref_CSharpKeyword
- ref
helpviewer_keywords:
- parameters [C#], ref
- ref keyword [C#]
ms.openlocfilehash: d54d932ca96f1966ecc05a532a2468b7e16fac46
ms.sourcegitcommit: f87ad41b8e62622da126aa928f7640108c4eff98
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/07/2020
ms.locfileid: "80805850"
---
# <a name="ref-c-reference"></a><span data-ttu-id="ce908-102">ref (Referencia de C#)</span><span class="sxs-lookup"><span data-stu-id="ce908-102">ref (C# Reference)</span></span>

<span data-ttu-id="ce908-103">La palabra clave `ref` indica un valor que se ha pasado mediante referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-103">The `ref` keyword indicates a value that is passed by reference.</span></span> <span data-ttu-id="ce908-104">Se usa en cuatro contextos diferentes:</span><span class="sxs-lookup"><span data-stu-id="ce908-104">It is used in four different contexts:</span></span>

- <span data-ttu-id="ce908-105">En una firma del método y en una llamada al método, para pasar un argumento a un método mediante referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-105">In a method signature and in a method call, to pass an argument to a method by reference.</span></span> <span data-ttu-id="ce908-106">Para más información, vea [Pasar un argumento mediante referencia](#passing-an-argument-by-reference).</span><span class="sxs-lookup"><span data-stu-id="ce908-106">For more information, see [Passing an argument by reference](#passing-an-argument-by-reference).</span></span>
- <span data-ttu-id="ce908-107">En una firma del método, para devolver un valor al autor de la llamada mediante referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-107">In a method signature, to return a value to the caller by reference.</span></span> <span data-ttu-id="ce908-108">Para obtener más información, consulte [Valores devueltos de referencia](#reference-return-values).</span><span class="sxs-lookup"><span data-stu-id="ce908-108">For more information, see [Reference return values](#reference-return-values).</span></span>
- <span data-ttu-id="ce908-109">En un cuerpo de miembro, para indicar que un valor devuelto de referencia se almacena localmente como una referencia que el autor de la llamada pretende modificar o, en general, que una variable local accede a otro valor por referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-109">In a member body, to indicate that a reference return value is stored locally as a reference that the caller intends to modify or, in general, a local variable accesses another value by reference.</span></span> <span data-ttu-id="ce908-110">Para más información, vea [Variables locales de tipo ref](#ref-locals).</span><span class="sxs-lookup"><span data-stu-id="ce908-110">For more information, see [Ref locals](#ref-locals).</span></span>
- <span data-ttu-id="ce908-111">En una declaración `struct` para declarar `ref struct` o `readonly ref struct`.</span><span class="sxs-lookup"><span data-stu-id="ce908-111">In a `struct` declaration to declare a `ref struct` or a `readonly ref struct`.</span></span> <span data-ttu-id="ce908-112">Para más información, vea [Tipo de estructura de referencia](#ref-struct-types).</span><span class="sxs-lookup"><span data-stu-id="ce908-112">For more information, see [ref struct types](#ref-struct-types).</span></span>

## <a name="passing-an-argument-by-reference"></a><span data-ttu-id="ce908-113">Pasar un argumento mediante referencia</span><span class="sxs-lookup"><span data-stu-id="ce908-113">Passing an argument by reference</span></span>

<span data-ttu-id="ce908-114">Cuando se usa en una lista de parámetros del método, la palabra clave `ref` indica que un argumento se ha pasado mediante referencia, no por valor.</span><span class="sxs-lookup"><span data-stu-id="ce908-114">When used in a method's parameter list, the `ref` keyword indicates that an argument is passed by reference, not by value.</span></span> <span data-ttu-id="ce908-115">La palabra clave `ref` hace que el parámetro formal sea un alias para el argumento, que debe ser una variable.</span><span class="sxs-lookup"><span data-stu-id="ce908-115">The `ref` keyword makes the formal parameter an alias for the argument, which must be a variable.</span></span> <span data-ttu-id="ce908-116">En otras palabras, cualquier operación en el parámetro se realiza en el argumento.</span><span class="sxs-lookup"><span data-stu-id="ce908-116">In other words, any operation on the parameter is made on the argument.</span></span> <span data-ttu-id="ce908-117">Por ejemplo, si el autor de la llamada pasa una expresión de variable local o una expresión de acceso de elemento de matriz, y el método llamado reemplaza el objeto al que hace referencia el parámetro ref, entonces la variable local del autor de la llamada o el elemento de matriz hacen ahora referencia al nuevo objeto cuando el método devuelve resultados.</span><span class="sxs-lookup"><span data-stu-id="ce908-117">For example, if the caller passes a local variable expression or an array element access expression, and the called method replaces the object to which the ref parameter refers, then the caller's local variable or the array element now refers to the new object when the method returns.</span></span>

> [!NOTE]
> <span data-ttu-id="ce908-118">No confunda el concepto de pasar por referencia con el concepto de tipos de referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-118">Do not confuse the concept of passing by reference with the concept of reference types.</span></span> <span data-ttu-id="ce908-119">Estos dos conceptos no son lo mismo.</span><span class="sxs-lookup"><span data-stu-id="ce908-119">The two concepts are not the same.</span></span> <span data-ttu-id="ce908-120">Un parámetro de método puede ser modificado por `ref` independientemente de si se trata de un tipo de valor o de un tipo de referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-120">A method parameter can be modified by `ref` regardless of whether it is a value type or a reference type.</span></span> <span data-ttu-id="ce908-121">No hay ninguna conversión boxing de un tipo de valor cuando se pasa por referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-121">There is no boxing of a value type when it is passed by reference.</span></span>  

<span data-ttu-id="ce908-122">Para usar un parámetro `ref`, la definición de método y el método de llamada deben utilizar explícitamente la palabra clave `ref`, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="ce908-122">To use a `ref` parameter, both the method definition and the calling method must explicitly use the `ref` keyword, as shown in the following example.</span></span>  

[!code-csharp-interactive[csrefKeywordsMethodParams#6](~/samples/snippets/csharp/language-reference/keywords/in-ref-out-modifier/RefParameterModifier.cs#1)]

<span data-ttu-id="ce908-123">Un argumento que se pasa a un parámetro `ref` o `in` debe inicializarse antes de pasarlo.</span><span class="sxs-lookup"><span data-stu-id="ce908-123">An argument that is passed to a `ref` or `in` parameter must be initialized before it is passed.</span></span> <span data-ttu-id="ce908-124">En esto difiere de los parámetros [out](out-parameter-modifier.md), cuyos argumentos no tienen que inicializarse explícitamente antes de pasarlos.</span><span class="sxs-lookup"><span data-stu-id="ce908-124">This differs from [out](out-parameter-modifier.md) parameters, whose arguments do not have to be explicitly initialized before they are passed.</span></span>

<span data-ttu-id="ce908-125">Los miembros de una clase no pueden tener signaturas que se diferencien solo por `ref`, `in` o `out`.</span><span class="sxs-lookup"><span data-stu-id="ce908-125">Members of a class can't have signatures that differ only by `ref`, `in`, or `out`.</span></span> <span data-ttu-id="ce908-126">Si la única diferencia entre dos miembros de un tipo es que uno de ellos tiene un parámetro `ref` y el otro tiene un parámetro `out` o `in`, se produce un error de compilador.</span><span class="sxs-lookup"><span data-stu-id="ce908-126">A compiler error occurs if the only difference between two members of a type is that one of them has a `ref` parameter and the other has an `out`, or `in` parameter.</span></span> <span data-ttu-id="ce908-127">El código siguiente, por ejemplo, no se compila.</span><span class="sxs-lookup"><span data-stu-id="ce908-127">The following code, for example, doesn't compile.</span></span>  

```csharp
class CS0663_Example
{
    // Compiler error CS0663: "Cannot define overloaded
    // methods that differ only on ref and out".
    public void SampleMethod(out int i) { }
    public void SampleMethod(ref int i) { }
}
```

<span data-ttu-id="ce908-128">En cambio, los métodos pueden sobrecargarse cuando un método tiene un parámetro `ref`, `in` o `out` y el otro tiene un parámetro de valor, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="ce908-128">However, methods can be overloaded when one method has a `ref`, `in`, or `out` parameter and the other has a value parameter, as shown in the following example.</span></span>
  
[!code-csharp[csrefKeywordsMethodParams#6](~/samples/snippets/csharp/language-reference/keywords/in-ref-out-modifier/RefParameterModifier.cs#2)]
  
 <span data-ttu-id="ce908-129">En otras situaciones que requieran firma coincidente, como ocultar o reemplazar, `in`, `ref` y `out` forman parte de la signatura y no coinciden entre sí.</span><span class="sxs-lookup"><span data-stu-id="ce908-129">In other situations that require signature matching, such as hiding or overriding, `in`, `ref`, and `out` are part of the signature and don't match each other.</span></span>  
  
 <span data-ttu-id="ce908-130">Las propiedades no son variables.</span><span class="sxs-lookup"><span data-stu-id="ce908-130">Properties are not variables.</span></span> <span data-ttu-id="ce908-131">Son métodos y no se pueden pasar a parámetros `ref`.</span><span class="sxs-lookup"><span data-stu-id="ce908-131">They are methods, and cannot be passed to `ref` parameters.</span></span>  
  
 <span data-ttu-id="ce908-132">Las palabras clave `ref`, `in` y `out` no pueden usarse para estos tipos de métodos:</span><span class="sxs-lookup"><span data-stu-id="ce908-132">You can't use the `ref`, `in`, and `out` keywords for the following kinds of methods:</span></span>  
  
- <span data-ttu-id="ce908-133">Métodos asincrónicos, que se definen mediante el uso del modificador [async](async.md).</span><span class="sxs-lookup"><span data-stu-id="ce908-133">Async methods, which you define by using the [async](async.md) modifier.</span></span>  
- <span data-ttu-id="ce908-134">Métodos de iterador, que incluyen una instrucción [yield return](yield.md) o `yield break`.</span><span class="sxs-lookup"><span data-stu-id="ce908-134">Iterator methods, which include a [yield return](yield.md) or `yield break` statement.</span></span>

<span data-ttu-id="ce908-135">Además, los [métodos de extensión](../../programming-guide/classes-and-structs/extension-methods.md) tienen las restricciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="ce908-135">In addition, [extension methods](../../programming-guide/classes-and-structs/extension-methods.md) have the following restrictions:</span></span>

- <span data-ttu-id="ce908-136">No se puede usar la palabra clave `out` en el primer argumento de un método de extensión.</span><span class="sxs-lookup"><span data-stu-id="ce908-136">The `out` keyword cannot be used on the first argument of an extension method.</span></span>
- <span data-ttu-id="ce908-137">No se puede usar la palabra clave `ref` en el primer argumento de un método de extensión cuando el argumento no es un struct ni un tipo genérico no restringido a ser un struct.</span><span class="sxs-lookup"><span data-stu-id="ce908-137">The `ref` keyword cannot be used on the first argument of an extension method when the argument is not a struct, or a generic type not constrained to be a struct.</span></span>
- <span data-ttu-id="ce908-138">No se puede usar la palabra clave `in` a menos que el primer argumento sea un struct.</span><span class="sxs-lookup"><span data-stu-id="ce908-138">The `in` keyword cannot be used unless the first argument is a struct.</span></span> <span data-ttu-id="ce908-139">No se puede usar la palabra clave `in` en ningún tipo genérico, incluso cuando está restringido a ser un struct.</span><span class="sxs-lookup"><span data-stu-id="ce908-139">The `in` keyword cannot be used on any generic type, even when constrained to be a struct.</span></span>

## <a name="passing-an-argument-by-reference-an-example"></a><span data-ttu-id="ce908-140">Paso de un argumento mediante referencia: Un ejemplo</span><span class="sxs-lookup"><span data-stu-id="ce908-140">Passing an argument by reference: An example</span></span>

<span data-ttu-id="ce908-141">En los ejemplos anteriores se pasan tipos de valor mediante referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-141">The previous examples pass value types by reference.</span></span> <span data-ttu-id="ce908-142">También se puede usar la palabra clave `ref` para pasar tipos de referencia mediante referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-142">You can also use the `ref` keyword to pass reference types by reference.</span></span> <span data-ttu-id="ce908-143">Pasar un tipo de referencia por referencia permite que el método llamado pueda reemplazar el objeto al que hace referencia el parámetro de referencia en el autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="ce908-143">Passing a reference type by reference enables the called method to replace the object to which the reference parameter refers in the caller.</span></span> <span data-ttu-id="ce908-144">La ubicación de almacenamiento del objeto se pasa al método como el valor del parámetro de referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-144">The storage location of the object is passed to the method as the value of the reference parameter.</span></span> <span data-ttu-id="ce908-145">Si cambia el valor de la ubicación de almacenamiento del parámetro (para que apunte a un nuevo objeto), también debe cambiar la ubicación de almacenamiento a la que se refiere el autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="ce908-145">If you change the value in the storage location of the parameter (to point to a new object), you also change the storage location to which the caller refers.</span></span> <span data-ttu-id="ce908-146">En el ejemplo siguiente se pasa una instancia de un tipo de referencia como un parámetro `ref`.</span><span class="sxs-lookup"><span data-stu-id="ce908-146">The following example passes an instance of a reference type as a `ref` parameter.</span></span>
  
[!code-csharp[csrefKeywordsMethodParams#6](~/samples/snippets/csharp/language-reference/keywords/in-ref-out-modifier/RefParameterModifier.cs#3)]

<span data-ttu-id="ce908-147">Para obtener más información sobre cómo pasar tipos de referencia por valor y por referencia, vea [Pasar parámetros Reference-Type ](../../programming-guide/classes-and-structs/passing-reference-type-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="ce908-147">For more information about how to pass reference types by value and by reference, see [Passing Reference-Type Parameters](../../programming-guide/classes-and-structs/passing-reference-type-parameters.md).</span></span>
  
## <a name="reference-return-values"></a><span data-ttu-id="ce908-148">Valores devueltos de referencia</span><span class="sxs-lookup"><span data-stu-id="ce908-148">Reference return values</span></span>

<span data-ttu-id="ce908-149">Los valores devueltos de referencia (o valores devueltos de tipo ref) son valores que devuelve un método mediante referencia al autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="ce908-149">Reference return values (or ref returns) are values that a method returns by reference to the caller.</span></span> <span data-ttu-id="ce908-150">Es decir, el autor de la llamada puede modificar el valor devuelto por un método, y ese cambio se refleja en el estado del objeto que contiene el método.</span><span class="sxs-lookup"><span data-stu-id="ce908-150">That is, the caller can modify the value returned by a method, and that change is reflected in the state of the object that contains the method.</span></span>

<span data-ttu-id="ce908-151">Un valor devuelto de referencia se define mediante la palabra clave `ref`:</span><span class="sxs-lookup"><span data-stu-id="ce908-151">A reference return value is defined by using the `ref` keyword:</span></span>

- <span data-ttu-id="ce908-152">En la firma del método.</span><span class="sxs-lookup"><span data-stu-id="ce908-152">In the method signature.</span></span> <span data-ttu-id="ce908-153">Por ejemplo, en la firma de método siguiente se indica que el método `GetCurrentPrice` devuelve un valor <xref:System.Decimal> por referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-153">For example, the following method signature indicates that the `GetCurrentPrice` method returns a <xref:System.Decimal> value by reference.</span></span>

```csharp
public ref decimal GetCurrentPrice()
```

- <span data-ttu-id="ce908-154">Entre el token `return` y la variable devuelta en una instrucción `return` en el método.</span><span class="sxs-lookup"><span data-stu-id="ce908-154">Between the `return` token and the variable returned in a `return` statement in the method.</span></span> <span data-ttu-id="ce908-155">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="ce908-155">For example:</span></span>

```csharp
return ref DecimalArray[0];
```

<span data-ttu-id="ce908-156">Para que el autor de la llamada modifique el estado del objeto, el valor devuelto de referencia debe almacenarse en una variable que se defina explícitamente como una [variable local de tipo ref](#ref-locals).</span><span class="sxs-lookup"><span data-stu-id="ce908-156">In order for the caller to modify the object's state, the reference return value must be stored to a variable that is explicitly defined as a [ref local](#ref-locals).</span></span>

<span data-ttu-id="ce908-157">El método llamado también puede declarar el valor devuelto como `ref readonly` para devolver el valor por referencia y exigir que el código de llamada no pueda modificar el valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="ce908-157">The called method may also declare the return value as `ref readonly` to return the value by reference, and enforce that the calling code cannot modify the returned value.</span></span> <span data-ttu-id="ce908-158">El método de llamada puede evitar copiar el valor devuelto mediante el almacenamiento del valor en una variable de tipo [ref readonly](#ref-readonly-locals).</span><span class="sxs-lookup"><span data-stu-id="ce908-158">The calling method can avoid copying the returned valued by storing the value in a local [ref readonly](#ref-readonly-locals) variable.</span></span>

<span data-ttu-id="ce908-159">Para obtener un ejemplo, vea [Un ejemplo de valores devueltos y variables locales de tipo ref](#a-ref-returns-and-ref-locals-example).</span><span class="sxs-lookup"><span data-stu-id="ce908-159">For an example, see [A ref returns and ref locals example](#a-ref-returns-and-ref-locals-example).</span></span>

## <a name="ref-locals"></a><span data-ttu-id="ce908-160">Variables locales de tipo ref</span><span class="sxs-lookup"><span data-stu-id="ce908-160">Ref locals</span></span>

<span data-ttu-id="ce908-161">Una variable local de tipo ref se usa para hacer referencia a valores devueltos con `return ref`.</span><span class="sxs-lookup"><span data-stu-id="ce908-161">A ref local variable is used to refer to values returned using `return ref`.</span></span> <span data-ttu-id="ce908-162">Una variable local de tipo ref no se puede inicializar en un valor devuelto de tipo no ref.</span><span class="sxs-lookup"><span data-stu-id="ce908-162">A ref local variable cannot be initialized to a non-ref return value.</span></span> <span data-ttu-id="ce908-163">Es decir, el lado derecho de la inicialización debe ser una referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-163">In other words, the right-hand side of the initialization must be a reference.</span></span> <span data-ttu-id="ce908-164">Cualquier modificación en el valor de la variable local de tipo ref se refleja en el estado del objeto cuyo método ha devuelto el valor mediante referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-164">Any modifications to the value of the ref local are reflected in the state of the object whose method returned the value by reference.</span></span>

<span data-ttu-id="ce908-165">Defina una variable local de tipo ref mediante la palabra clave `ref` antes de la declaración de variable, así como inmediatamente antes de la llamada al método que devuelve el valor mediante referencia.</span><span class="sxs-lookup"><span data-stu-id="ce908-165">You define a ref local by using the `ref` keyword before the variable declaration, as well as immediately before the call to the method that returns the value by reference.</span></span>

<span data-ttu-id="ce908-166">Por ejemplo, en la siguiente instrucción se define un valor de variable local de tipo ref que se devuelve mediante un método denominado `GetEstimatedValue`:</span><span class="sxs-lookup"><span data-stu-id="ce908-166">For example, the following statement defines a ref local value that is returned by a method named `GetEstimatedValue`:</span></span>

```csharp
ref decimal estValue = ref Building.GetEstimatedValue();
```

<span data-ttu-id="ce908-167">Puede acceder a un valor por referencia de la misma manera.</span><span class="sxs-lookup"><span data-stu-id="ce908-167">You can access a value by reference in the same way.</span></span> <span data-ttu-id="ce908-168">En algunos casos, acceder a un valor por referencia aumenta el rendimiento, ya que evita una operación de copia potencialmente cara.</span><span class="sxs-lookup"><span data-stu-id="ce908-168">In some cases, accessing a value by reference increases performance by avoiding a potentially expensive copy operation.</span></span> <span data-ttu-id="ce908-169">Por ejemplo, en la instrucción siguiente se muestra cómo es posible definir un valor local de referencia que se usa para hacer referencia a un valor.</span><span class="sxs-lookup"><span data-stu-id="ce908-169">For example, the following statement shows how one can define a ref local value that is used to reference a value.</span></span>

```csharp
ref VeryLargeStruct reflocal = ref veryLargeStruct;
```

<span data-ttu-id="ce908-170">En ambos ejemplos la palabra clave `ref` debe usarse en ambos lugares. De lo contrario, el compilador genera el error CS8172, "No se puede inicializar una variable por referencia con un valor".</span><span class="sxs-lookup"><span data-stu-id="ce908-170">In both examples the `ref` keyword must be used in both places, or the compiler generates error CS8172, "Cannot initialize a by-reference variable with a value."</span></span>

<span data-ttu-id="ce908-171">A partir C# 7.3, la variable de iteración de la instrucción `foreach` puede ser una variable ref local o ref readonly local.</span><span class="sxs-lookup"><span data-stu-id="ce908-171">Beginning with C# 7.3, the iteration variable of the `foreach` statement can be ref local or ref readonly local variable.</span></span> <span data-ttu-id="ce908-172">Para más información, vea el artículo sobre la [instrucción foreach](foreach-in.md).</span><span class="sxs-lookup"><span data-stu-id="ce908-172">For more information, see the [foreach statement](foreach-in.md) article.</span></span>

<span data-ttu-id="ce908-173">A partir C# 7.3, las variables locales de tipo ref o locales de tipo ref readonly se pueden reasignar con el [operador de asignación ref](../operators/assignment-operator.md#ref-assignment-operator).</span><span class="sxs-lookup"><span data-stu-id="ce908-173">Also beginning with C# 7.3, you can reassign a ref local or ref readonly local variable with the [ref assignment operator](../operators/assignment-operator.md#ref-assignment-operator).</span></span>

## <a name="ref-readonly-locals"></a><span data-ttu-id="ce908-174">Variables locales de tipo ref readonly</span><span class="sxs-lookup"><span data-stu-id="ce908-174">Ref readonly locals</span></span>

<span data-ttu-id="ce908-175">Una variable local de tipo ref readonly se usa para hacer referencia a los valores devueltos por el método o la propiedad que tiene `ref readonly` en su firma y utiliza `return ref`.</span><span class="sxs-lookup"><span data-stu-id="ce908-175">A ref readonly local is used to refer to values returned by the method or property that has `ref readonly` in its signature and uses `return ref`.</span></span> <span data-ttu-id="ce908-176">Una variable `ref readonly` combina las propiedades de una `ref` variable local con una variable `readonly`: es un alias para el almacenamiento al que se asigna y no se puede modificar.</span><span class="sxs-lookup"><span data-stu-id="ce908-176">A `ref readonly` variable combines the properties of a `ref` local variable with a `readonly` variable: it is an alias to the storage it's assigned to, and it cannot be modified.</span></span>

## <a name="a-ref-returns-and-ref-locals-example"></a><span data-ttu-id="ce908-177">Un ejemplo de valores devueltos y variables locales de tipo ref</span><span class="sxs-lookup"><span data-stu-id="ce908-177">A ref returns and ref locals example</span></span>

<span data-ttu-id="ce908-178">En el ejemplo siguiente se define una clase `Book` que tiene dos campos <xref:System.String>, `Title` y `Author`.</span><span class="sxs-lookup"><span data-stu-id="ce908-178">The following example defines a `Book` class that has two <xref:System.String> fields, `Title` and `Author`.</span></span> <span data-ttu-id="ce908-179">También define una clase `BookCollection` que incluye una matriz privada de objetos `Book`.</span><span class="sxs-lookup"><span data-stu-id="ce908-179">It also defines a `BookCollection` class that includes a private array of `Book` objects.</span></span> <span data-ttu-id="ce908-180">Los objetos book individuales se devuelven mediante referencia llamando a su método `GetBookByTitle`.</span><span class="sxs-lookup"><span data-stu-id="ce908-180">Individual book objects are returned by reference by calling its `GetBookByTitle` method.</span></span>

[!code-csharp[csrefKeywordsMethodParams#6](~/samples/snippets/csharp/language-reference/keywords/in-ref-out-modifier/RefParameterModifier.cs#4)]

<span data-ttu-id="ce908-181">Cuando el autor de la llamada almacena el valor devuelto mediante el método `GetBookByTitle` como una variable local de tipo ref, los cambios que el autor de la llamada realiza en el valor devuelto se reflejan en el objeto `BookCollection`, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="ce908-181">When the caller stores the value returned by the `GetBookByTitle` method as a ref local, changes that the caller makes to the return value are reflected in the `BookCollection` object, as the following example shows.</span></span>

[!code-csharp[csrefKeywordsMethodParams#6](~/samples/snippets/csharp/language-reference/keywords/in-ref-out-modifier/RefParameterModifier.cs#5)]

## <a name="ref-struct-types"></a><span data-ttu-id="ce908-182">Tipos de estructura de referencia</span><span class="sxs-lookup"><span data-stu-id="ce908-182">Ref struct types</span></span>

<span data-ttu-id="ce908-183">La incorporación del modificador `ref` a una declaración `struct` define que las instancias de ese tipo se deben asignar a la pila.</span><span class="sxs-lookup"><span data-stu-id="ce908-183">Adding the `ref` modifier to a `struct` declaration defines that instances of that type must be stack allocated.</span></span> <span data-ttu-id="ce908-184">En otras palabras, las instancias de estos tipos no se pueden crear nunca en el montón como un miembro de otra clase.</span><span class="sxs-lookup"><span data-stu-id="ce908-184">In other words, instances of these types can never be created on the heap as a member of another class.</span></span> <span data-ttu-id="ce908-185">La principal motivación para esta característica era <xref:System.Span%601> y las estructuras relacionadas.</span><span class="sxs-lookup"><span data-stu-id="ce908-185">The primary motivation for this feature was <xref:System.Span%601> and related structures.</span></span>

<span data-ttu-id="ce908-186">El objetivo de mantener un tipo `ref struct` como una variable asignada a la pila presenta varias reglas que el compilador exige para todos los tipos `ref struct`.</span><span class="sxs-lookup"><span data-stu-id="ce908-186">The goal of keeping a `ref struct` type as a stack-allocated variable introduces several rules that the compiler enforces for all `ref struct` types.</span></span>

- <span data-ttu-id="ce908-187">No puede encerrar un valor de `ref struct`.</span><span class="sxs-lookup"><span data-stu-id="ce908-187">You can't box a `ref struct`.</span></span> <span data-ttu-id="ce908-188">No puede asignar un tipo `ref struct` a una variable de tipo `object`, `dynamic` o cualquier tipo de interfaz.</span><span class="sxs-lookup"><span data-stu-id="ce908-188">You cannot assign a `ref struct` type to a variable of type `object`, `dynamic`, or any interface type.</span></span>
- <span data-ttu-id="ce908-189">Los tipos `ref struct` no pueden implementar interfaces.</span><span class="sxs-lookup"><span data-stu-id="ce908-189">`ref struct` types cannot implement interfaces.</span></span>
- <span data-ttu-id="ce908-190">No se puede declarar `ref struct` como miembro de campo de una clase o una estructura normal.</span><span class="sxs-lookup"><span data-stu-id="ce908-190">You can't declare a `ref struct` as a field member of a class or a normal struct.</span></span> <span data-ttu-id="ce908-191">Esto incluye la declaración de una propiedad implementada automáticamente, lo que crea un campo de respaldo generado por el compilador.</span><span class="sxs-lookup"><span data-stu-id="ce908-191">This includes declaring an auto-implemented property, which creates a compiler-generated backing field.</span></span>
- <span data-ttu-id="ce908-192">No puede declarar variables locales que sean tipos `ref struct` en métodos asincrónicos.</span><span class="sxs-lookup"><span data-stu-id="ce908-192">You cannot declare local variables that are `ref struct` types in async methods.</span></span> <span data-ttu-id="ce908-193">Puede declararlas en los métodos sincrónicos que devuelven tipos similares a <xref:System.Threading.Tasks.Task>, <xref:System.Threading.Tasks.Task%601> o `Task`.</span><span class="sxs-lookup"><span data-stu-id="ce908-193">You can declare them in synchronous methods that return <xref:System.Threading.Tasks.Task>, <xref:System.Threading.Tasks.Task%601>, or `Task`-like types.</span></span>
- <span data-ttu-id="ce908-194">No puede declarar las variables locales de `ref struct` en iteradores.</span><span class="sxs-lookup"><span data-stu-id="ce908-194">You cannot declare `ref struct` local variables in iterators.</span></span>
- <span data-ttu-id="ce908-195">No puede capturar variables `ref struct` en expresiones lambda o funciones locales.</span><span class="sxs-lookup"><span data-stu-id="ce908-195">You cannot capture `ref struct` variables in lambda expressions or local functions.</span></span>

<span data-ttu-id="ce908-196">Estas restricciones aseguran que no se usará por error un valor `ref struct` de manera que pueda promoverlo al montón administrado.</span><span class="sxs-lookup"><span data-stu-id="ce908-196">These restrictions ensure you don't accidentally use a `ref struct` in a manner that could promote it to the managed heap.</span></span>

<span data-ttu-id="ce908-197">Puede combinar modificadores para declarar una estructura como `readonly ref`.</span><span class="sxs-lookup"><span data-stu-id="ce908-197">You can combine modifiers to declare a struct as `readonly ref`.</span></span> <span data-ttu-id="ce908-198">`readonly ref struct` combina las ventajas y las restricciones de las declaraciones `ref struct` y `readonly struct`.</span><span class="sxs-lookup"><span data-stu-id="ce908-198">A `readonly ref struct` combines the benefits and restrictions of `ref struct` and `readonly struct` declarations.</span></span>

## <a name="c-language-specification"></a><span data-ttu-id="ce908-199">Especificación del lenguaje C#</span><span class="sxs-lookup"><span data-stu-id="ce908-199">C# language specification</span></span>

[!INCLUDE[CSharplangspec](~/includes/csharplangspec-md.md)]  
  
## <a name="see-also"></a><span data-ttu-id="ce908-200">Vea también</span><span class="sxs-lookup"><span data-stu-id="ce908-200">See also</span></span>

- [<span data-ttu-id="ce908-201">Escritura de código seguro y eficaz</span><span class="sxs-lookup"><span data-stu-id="ce908-201">Write safe efficient code</span></span>](../../write-safe-efficient-code.md)
- [<span data-ttu-id="ce908-202">Devoluciones y variables locales ref</span><span class="sxs-lookup"><span data-stu-id="ce908-202">Ref returns and ref locals</span></span>](../../programming-guide/classes-and-structs/ref-returns.md)
- [<span data-ttu-id="ce908-203">Expresión condicional ref</span><span class="sxs-lookup"><span data-stu-id="ce908-203">Conditional ref expression</span></span>](../operators/conditional-operator.md#conditional-ref-expression)
- [<span data-ttu-id="ce908-204">Pasar parámetros</span><span class="sxs-lookup"><span data-stu-id="ce908-204">Passing Parameters</span></span>](../../programming-guide/classes-and-structs/passing-parameters.md)
- [<span data-ttu-id="ce908-205">Parámetros de métodos</span><span class="sxs-lookup"><span data-stu-id="ce908-205">Method Parameters</span></span>](method-parameters.md)
- [<span data-ttu-id="ce908-206">Referencia de C#</span><span class="sxs-lookup"><span data-stu-id="ce908-206">C# Reference</span></span>](../index.md)
- [<span data-ttu-id="ce908-207">Guía de programación de C#</span><span class="sxs-lookup"><span data-stu-id="ce908-207">C# Programming Guide</span></span>](../../programming-guide/index.md)
- [<span data-ttu-id="ce908-208">Palabras clave de C#</span><span class="sxs-lookup"><span data-stu-id="ce908-208">C# Keywords</span></span>](index.md)
