---
title: Divulgación de información
ms.date: 03/30/2017
ms.assetid: 4064c89f-afa6-444a-aa7e-807ef072131c
ms.openlocfilehash: 0bcf1aa04d7ba7477a6c3f1559a77bbda1f974af
ms.sourcegitcommit: 09b4090b78f52fd09b0e430cd4b26576f1fdf96e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/17/2020
ms.locfileid: "76211954"
---
# <a name="information-disclosure"></a><span data-ttu-id="a77a2-102">Divulgación de información</span><span class="sxs-lookup"><span data-stu-id="a77a2-102">Information Disclosure</span></span>

<span data-ttu-id="a77a2-103">La divulgación de información permite a un atacante ganar valiosa información sobre un sistema.</span><span class="sxs-lookup"><span data-stu-id="a77a2-103">Information disclosure enables an attacker to gain valuable information about a system.</span></span> <span data-ttu-id="a77a2-104">Por consiguiente, siempre considere qué información divulga y si un usuario malintencionado puede utilizarla.</span><span class="sxs-lookup"><span data-stu-id="a77a2-104">Therefore, always consider what information you are revealing and whether it can be used by a malicious user.</span></span> <span data-ttu-id="a77a2-105">A continuación se muestra una lista de los posibles ataques de divulgación de información y proporciona métodos paliativos para cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="a77a2-105">The following lists possible information disclosure attacks and provides mitigations for each.</span></span>

## <a name="message-security-and-http"></a><span data-ttu-id="a77a2-106">Seguridad de mensajes y HTTP</span><span class="sxs-lookup"><span data-stu-id="a77a2-106">Message Security and HTTP</span></span>

<span data-ttu-id="a77a2-107">Si utiliza la seguridad del nivel de mensaje sobre una capa de transporte HTTP, sea consciente de que la seguridad del nivel de mensaje no protege los encabezados HTTP.</span><span class="sxs-lookup"><span data-stu-id="a77a2-107">If you are using message-level security over an HTTP transport layer, be aware that message-level security does not protect HTTP headers.</span></span> <span data-ttu-id="a77a2-108">La única manera de proteger los encabezados HTTP consiste en utilizar transporte HTTPS en lugar de HTTP.</span><span class="sxs-lookup"><span data-stu-id="a77a2-108">The only way to protect HTTP headers is to use HTTPS transport instead of HTTP.</span></span> <span data-ttu-id="a77a2-109">El transporte HTTPS hace que se cifre el mensaje completo, incluidos los encabezados HTTP, mediante el protocolo Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="a77a2-109">HTTPS transport causes the entire message, including the HTTP headers, to be encrypted using the Secure Sockets Layer (SSL) protocol.</span></span>

## <a name="policy-information"></a><span data-ttu-id="a77a2-110">Información de directiva</span><span class="sxs-lookup"><span data-stu-id="a77a2-110">Policy Information</span></span>

<span data-ttu-id="a77a2-111">Es importante proteger la directiva, sobre todo en escenarios de federación donde confidenciales requisitos de tokens emitidos o información sobre el emisor del token se exponen en la directiva.</span><span class="sxs-lookup"><span data-stu-id="a77a2-111">Keeping policy secure is important, especially in federation scenarios where sensitive issued-token requirements or token-issuer information is exposed in policy.</span></span> <span data-ttu-id="a77a2-112">En estos casos, la recomendación es proteger el punto de conexión de la directiva del servicio federado para evitar que los atacantes obtengan información sobre el servicio, como el tipo de demandas que colocar en el token emitido o redirigir a los clientes a emisores de tokens malintencionados.</span><span class="sxs-lookup"><span data-stu-id="a77a2-112">In these cases, the recommendation is to secure the federated service's policy endpoint to prevent attackers from obtaining information about the service, such as the type of claims to put in the issued token, or redirecting clients to malicious token issuers.</span></span> <span data-ttu-id="a77a2-113">Por ejemplo, un atacante podría detectar pares de nombre de usuario/contraseña reconfigurando la cadena de confianza federada para finalizar en un emisor que ejecutó un ataque de tipo “man-in-the-middle”.</span><span class="sxs-lookup"><span data-stu-id="a77a2-113">For example, an attacker could discover user name/password pairs by reconfiguring the federated trust chain to terminate in an issuer that executed a man-in-the-middle attack.</span></span> <span data-ttu-id="a77a2-114">También se recomienda que los clientes federados que obtienen sus enlaces a través de la recuperación de directivas comprueben que confían en los emisores en la cadena de confianza federada obtenida.</span><span class="sxs-lookup"><span data-stu-id="a77a2-114">It is also recommended that federated clients who obtain their bindings through policy retrieval verify that they trust the issuers in the obtained federated trust chain.</span></span> <span data-ttu-id="a77a2-115">Para obtener más información sobre los escenarios de Federación, vea [Federación](../../../../docs/framework/wcf/feature-details/federation.md).</span><span class="sxs-lookup"><span data-stu-id="a77a2-115">For more information about federation scenarios, see [Federation](../../../../docs/framework/wcf/feature-details/federation.md).</span></span>

## <a name="memory-dumps-can-reveal-claim-information"></a><span data-ttu-id="a77a2-116">Los volcados de memoria pueden revelar información de la demanda</span><span class="sxs-lookup"><span data-stu-id="a77a2-116">Memory Dumps Can Reveal Claim Information</span></span>

<span data-ttu-id="a77a2-117">Cuando se produce un error en una aplicación, los archivos de registro, como los generados por Dr. Watson, puede contener información de la demanda.</span><span class="sxs-lookup"><span data-stu-id="a77a2-117">When an application fails, log files, such as those produced by Dr. Watson, can contain the claim information.</span></span> <span data-ttu-id="a77a2-118">Esta información no se debería exportar a otras entidades, como equipos de compatibilidad; de lo contrario, se exporta también la información de la demanda que contiene los datos privados.</span><span class="sxs-lookup"><span data-stu-id="a77a2-118">This information should not be exported to other entities, such as support teams; otherwise, the claim information that contains private data is also exported.</span></span> <span data-ttu-id="a77a2-119">Esto se puede paliar si no se envían los archivos de registro a entidades desconocidas.</span><span class="sxs-lookup"><span data-stu-id="a77a2-119">You can mitigate this by not sending the log files to unknown entities.</span></span>

## <a name="endpoint-addresses"></a><span data-ttu-id="a77a2-120">Direcciones de extremo</span><span class="sxs-lookup"><span data-stu-id="a77a2-120">Endpoint Addresses</span></span>

<span data-ttu-id="a77a2-121">Una dirección de punto de conexión contiene la información necesaria para comunicarse con un punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="a77a2-121">An endpoint address contains the information needed to communicate with an endpoint.</span></span> <span data-ttu-id="a77a2-122">La seguridad de SOAP debe incluir la dirección completa en los mensajes de negociación de seguridad que se intercambian para negociar una clave simétrica entre un cliente y un servidor.</span><span class="sxs-lookup"><span data-stu-id="a77a2-122">SOAP security must include the address in full in the security negotiation messages that are exchanged in order to negotiate a symmetric key between a client and a server.</span></span> <span data-ttu-id="a77a2-123">Dado que la negociación de seguridad es un proceso previo al arranque, los encabezados de dirección no se pueden cifrar durante este proceso.</span><span class="sxs-lookup"><span data-stu-id="a77a2-123">Because security negotiation is a bootstrap process, the address headers cannot be encrypted during this process.</span></span> <span data-ttu-id="a77a2-124">Por consiguiente, la dirección no debería contener datos confidenciales; de lo contrario, conduce a ataques de divulgación de la información.</span><span class="sxs-lookup"><span data-stu-id="a77a2-124">Therefore, the address should not contain any confidential data; otherwise, it leads to information disclosure attacks.</span></span>

## <a name="certificates-transferred-unencrypted"></a><span data-ttu-id="a77a2-125">Certificados transferidos sin cifrar</span><span class="sxs-lookup"><span data-stu-id="a77a2-125">Certificates Transferred Unencrypted</span></span>

<span data-ttu-id="a77a2-126">Al utilizar un certificado X.509 para autenticar un cliente, el certificado se transfiere de manera abierta, dentro del encabezado SOAP.</span><span class="sxs-lookup"><span data-stu-id="a77a2-126">When you use an X.509 certificate to authenticate a client, the certificate is transferred in the clear, inside the SOAP header.</span></span> <span data-ttu-id="a77a2-127">Considere esto como una divulgación potencial de la información de identificación personal (PII).</span><span class="sxs-lookup"><span data-stu-id="a77a2-127">Be aware of this as a potential personally identifiable information (PII) disclosure.</span></span> <span data-ttu-id="a77a2-128">Éste no es un problema para el modo `TransportWithMessageCredential`, donde se cifra el mensaje completo con seguridad de nivel de transporte.</span><span class="sxs-lookup"><span data-stu-id="a77a2-128">This is not an issue for `TransportWithMessageCredential` mode, where the entire message is encrypted with transport-level security.</span></span>

## <a name="service-references"></a><span data-ttu-id="a77a2-129">Referencias del servicio</span><span class="sxs-lookup"><span data-stu-id="a77a2-129">Service References</span></span>

<span data-ttu-id="a77a2-130">Una referencia de servicio es una referencia a otro servicio.</span><span class="sxs-lookup"><span data-stu-id="a77a2-130">A service reference is a reference to another service.</span></span> <span data-ttu-id="a77a2-131">Por ejemplo, un servicio puede pasar una referencia de servicio a un cliente en el curso de una operación.</span><span class="sxs-lookup"><span data-stu-id="a77a2-131">For example, a service may pass a service reference to a client in the course of an operation.</span></span> <span data-ttu-id="a77a2-132">La referencia de servicio también se usa con un *Comprobador de identidad de confianza*, un componente interno que garantiza la identidad de la entidad de seguridad de destino antes de revelar información como datos de aplicación o credenciales al destino.</span><span class="sxs-lookup"><span data-stu-id="a77a2-132">The service reference is also used with a *trust identity verifier*, an internal component that ensures the identity of the target principal before disclosing information such as application data or credentials to the target.</span></span> <span data-ttu-id="a77a2-133">Si la identidad de confianza remota no se puede comprobar o es incorrecta, el remitente debería garantizar que no se divulgó ningún dato que se podría poner en peligro a la aplicación o el usuario.</span><span class="sxs-lookup"><span data-stu-id="a77a2-133">If the remote trust identity cannot be verified or is incorrect, the sender should ensure that no data was disclosed that could compromise itself, the application, or the user.</span></span>

<span data-ttu-id="a77a2-134">Entre las mitigaciones se encuentran las siguientes:</span><span class="sxs-lookup"><span data-stu-id="a77a2-134">Mitigations include the following:</span></span>

- <span data-ttu-id="a77a2-135">Se supone que las referencias de servicio son de confianza.</span><span class="sxs-lookup"><span data-stu-id="a77a2-135">Service references are assumed to be trustworthy.</span></span> <span data-ttu-id="a77a2-136">Tenga cuidado al transferir instancias de referencias de servicio para asegurarse de que no se han manipulado.</span><span class="sxs-lookup"><span data-stu-id="a77a2-136">Take care whenever transferring service reference instances to ensure that they have not been tampered with.</span></span>

- <span data-ttu-id="a77a2-137">Algunas aplicaciones pueden mostrar una experiencia de usuario que permite el establecimiento interactivo de confianza según los datos de la referencia de servicio y los datos de confianza demostrados por el host remoto.</span><span class="sxs-lookup"><span data-stu-id="a77a2-137">Some applications can present a user experience that allows interactive establishment of trust based on data in the service reference and trust data proven by the remote host.</span></span> <span data-ttu-id="a77a2-138">WCF proporciona puntos de extensibilidad para este tipo de instalaciones, pero el usuario debe implementarlas.</span><span class="sxs-lookup"><span data-stu-id="a77a2-138">WCF provides extensibility points for such a facility, but the user must implemented them.</span></span>

## <a name="ntlm"></a><span data-ttu-id="a77a2-139">NTLM</span><span class="sxs-lookup"><span data-stu-id="a77a2-139">NTLM</span></span>

<span data-ttu-id="a77a2-140">De manera predeterminada, en el entorno de dominio de Windows, la autenticación de Windows utiliza el protocolo Kerberos para autenticar y autorizar a los usuarios.</span><span class="sxs-lookup"><span data-stu-id="a77a2-140">By default, in the Windows domain environment, Windows authentication uses the Kerberos protocol to authenticate and authorize users.</span></span> <span data-ttu-id="a77a2-141">Si el protocolo Kerberos no se puede utilizar por alguna razón, NT LAN Manager (NTLM) se utiliza a modo de reserva.</span><span class="sxs-lookup"><span data-stu-id="a77a2-141">If the Kerberos protocol cannot be used for some reason, NT LAN Manager (NTLM) is used as a fallback.</span></span> <span data-ttu-id="a77a2-142">Este comportamiento se puede deshabilitar estableciendo la propiedad <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> en `false`.</span><span class="sxs-lookup"><span data-stu-id="a77a2-142">You can disable this behavior by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`.</span></span> <span data-ttu-id="a77a2-143">Entre los problemas que se deben tener en cuenta al permitir NTLM se incluyen:</span><span class="sxs-lookup"><span data-stu-id="a77a2-143">Issues to be aware of when allowing NTLM include:</span></span>

- <span data-ttu-id="a77a2-144">NTLM expone el nombre de usuario del cliente.</span><span class="sxs-lookup"><span data-stu-id="a77a2-144">NTLM exposes the client user name.</span></span> <span data-ttu-id="a77a2-145">Si es necesario mantener el nombre de usuario  forma confidencial, establezca la propiedad `AllowNTLM` del enlace en `false`.</span><span class="sxs-lookup"><span data-stu-id="a77a2-145">If the user name needs to be kept confidential, then set the `AllowNTLM` property on the binding to `false`.</span></span>

- <span data-ttu-id="a77a2-146">NTLM no proporciona autenticación de servidor.</span><span class="sxs-lookup"><span data-stu-id="a77a2-146">NTLM does not provide server authentication.</span></span> <span data-ttu-id="a77a2-147">Por consiguiente, el cliente no puede asegurar que se esté comunicando con el servicio adecuado al utilizar NTLM como protocolo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a77a2-147">Therefore, the client cannot ensure that it is communicating with the right service when you use NTLM as an authentication protocol.</span></span>

### <a name="specifying-client-credentials-or-invalid-identity-forces-ntlm-usage"></a><span data-ttu-id="a77a2-148">Especificar credenciales de cliente o una identidad no válida fuerza el uso de NTLM</span><span class="sxs-lookup"><span data-stu-id="a77a2-148">Specifying Client Credentials or Invalid Identity Forces NTLM Usage</span></span>

<span data-ttu-id="a77a2-149">Al crear un cliente, especificar las credenciales del cliente sin un nombre de dominio o especificar una identidad de servidor no válida, hace que NTLM sea utilizado en lugar del protocolo Kerberos (si la propiedad `AllowNtlm` está establecida en `true`).</span><span class="sxs-lookup"><span data-stu-id="a77a2-149">When creating a client, specifying client credentials without a domain name, or specifying an invalid server identity, causes NTLM to be used instead of the Kerberos protocol (if the `AllowNtlm` property is set to `true`).</span></span> <span data-ttu-id="a77a2-150">Dado que NTLM no hace la autenticación de servidor, se puede divulgar información de manera potencial.</span><span class="sxs-lookup"><span data-stu-id="a77a2-150">Because  NTLM does not do server authentication, information can potentially be disclosed.</span></span>

<span data-ttu-id="a77a2-151">Por ejemplo, es posible especificar credenciales de cliente de Windows sin un nombre de dominio, tal y como se C# muestra en el siguiente código Visual.</span><span class="sxs-lookup"><span data-stu-id="a77a2-151">For example, it is possible to specify Windows client credentials without a domain name, as shown in the following Visual C# code.</span></span>

```csharp
MyChannelFactory.Credentials.Windows.ClientCredential = new System.Net.NetworkCredential("username", "password");
```

<span data-ttu-id="a77a2-152">El código no especifica un nombre de dominio y, por consiguiente, se utilizará NTLM.</span><span class="sxs-lookup"><span data-stu-id="a77a2-152">The code does not specify a domain name, and therefore NTLM will be used.</span></span>

<span data-ttu-id="a77a2-153">Si se especifica el dominio, pero se especifica un nombre principal de servicio no válido mediante la característica de identidad de punto de conexión, se usará NTLM.</span><span class="sxs-lookup"><span data-stu-id="a77a2-153">If the domain is specified, but an invalid service principal name is specified using the endpoint identity feature, then NTLM is used.</span></span> <span data-ttu-id="a77a2-154">Para obtener más información sobre cómo se especifica la identidad del punto de conexión, consulte [identidad del servicio y autenticación](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="a77a2-154">For more information about how endpoint identity is specified, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="a77a2-155">Vea también</span><span class="sxs-lookup"><span data-stu-id="a77a2-155">See also</span></span>

- [<span data-ttu-id="a77a2-156">Consideraciones de seguridad</span><span class="sxs-lookup"><span data-stu-id="a77a2-156">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)
- [<span data-ttu-id="a77a2-157">Elevación de privilegios</span><span class="sxs-lookup"><span data-stu-id="a77a2-157">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)
- [<span data-ttu-id="a77a2-158">Denegación de servicio</span><span class="sxs-lookup"><span data-stu-id="a77a2-158">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)
- [<span data-ttu-id="a77a2-159">Manipulación</span><span class="sxs-lookup"><span data-stu-id="a77a2-159">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)
- [<span data-ttu-id="a77a2-160">Escenarios no admitidos</span><span class="sxs-lookup"><span data-stu-id="a77a2-160">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
- [<span data-ttu-id="a77a2-161">Ataques por repetición</span><span class="sxs-lookup"><span data-stu-id="a77a2-161">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
