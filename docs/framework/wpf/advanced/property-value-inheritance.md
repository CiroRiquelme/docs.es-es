---
title: Herencia de valores de propiedad
ms.date: 03/30/2017
helpviewer_keywords:
- inheritance [WPF], property values
- value inheritance [WPF]
- properties [WPF], value inheritance
ms.assetid: d7c338f9-f2bf-48ed-832c-7be58ac390e4
ms.openlocfilehash: b63f307d9edffd14315d383d8e06419fa141aee1
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187188"
---
# <a name="property-value-inheritance"></a><span data-ttu-id="59fcb-102">Herencia de valores de propiedad</span><span class="sxs-lookup"><span data-stu-id="59fcb-102">Property Value Inheritance</span></span>
<span data-ttu-id="59fcb-103">La herencia de valores de propiedad es una característica del sistema de propiedades de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="59fcb-103">Property value inheritance is a feature of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system.</span></span> <span data-ttu-id="59fcb-104">La herencia de valores de propiedad permite que los elementos secundarios de un árbol de elementos obtengan el valor de una propiedad determinada de los elementos principales y que hereden ese valor tal como se estableció en cualquier otro lugar del elemento principal más cercano.</span><span class="sxs-lookup"><span data-stu-id="59fcb-104">Property value inheritance enables child elements in a tree of elements to obtain the value of a particular property from parent elements, inheriting that value as it was set anywhere in the nearest parent element.</span></span> <span data-ttu-id="59fcb-105">Es posible que el elemento principal también haya obtenido su valor a través de la herencia de valores de propiedad, por lo que el sistema se repite potencialmente hasta la raíz de la página.</span><span class="sxs-lookup"><span data-stu-id="59fcb-105">The parent element might also have obtained its value through property value inheritance, so the system potentially recurses all the way to the page root.</span></span> <span data-ttu-id="59fcb-106">La herencia de valores de propiedad no es el comportamiento del sistema de propiedades predeterminado: es necesario establecer una propiedad con un valor de metadatos concreto para que inicie la herencia de valores de propiedad en elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="59fcb-106">Property value inheritance is not the default property system behavior; a property must be established with a particular metadata setting in order to cause that property to initiate property value inheritance on child elements.</span></span>  

<a name="Property_Value_Inheritance_is_Containment_Inheritance"></a>
## <a name="property-value-inheritance-is-containment-inheritance"></a><span data-ttu-id="59fcb-107">La herencia de valores de propiedad es la herencia de contención</span><span class="sxs-lookup"><span data-stu-id="59fcb-107">Property Value Inheritance Is Containment Inheritance</span></span>  
 <span data-ttu-id="59fcb-108">"Herencia" como término aquí no es exactamente el mismo concepto que la herencia en el contexto de programación orientada a objetos generales y tipos, donde las clases derivadas heredan las definiciones de miembros de sus clases base.</span><span class="sxs-lookup"><span data-stu-id="59fcb-108">"Inheritance" as a term here is not quite the same concept as inheritance in the context of types and general object-oriented programming, where derived classes inherit member definitions from their base classes.</span></span> <span data-ttu-id="59fcb-109">Ese significado de herencia también está activo en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: las propiedades definidas en varias clases base se exponen como atributos para clases [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] derivadas cuando se usan como elementos y se exponen como miembros para código.</span><span class="sxs-lookup"><span data-stu-id="59fcb-109">That meaning of inheritance is also active in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: properties defined in various base classes are exposed as attributes for derived [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] classes when used as elements, and exposed as members for code.</span></span> <span data-ttu-id="59fcb-110">La herencia de valores de propiedad trata especialmente acerca de cómo los valores de propiedad se pueden heredar de un elemento a otro basándose en las relaciones entre elementos primarios y secundarios de un árbol de elementos.</span><span class="sxs-lookup"><span data-stu-id="59fcb-110">Property value inheritance is particularly about how property values can inherit from one element to another on the basis of the parent-child relationships within a tree of elements.</span></span> <span data-ttu-id="59fcb-111">Este árbol de elementos es visible directamente al anidar elementos dentro de otros elementos cuando se definen aplicaciones en el marcado [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="59fcb-111">That tree of elements is most directly visible when nesting elements inside other elements as you define applications in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] markup.</span></span> <span data-ttu-id="59fcb-112">Los árboles de objetos también pueden crearse mediante programación si se agregan objetos a colecciones designadas de otros objetos. La herencia de valores de propiedad funciona del mismo modo en el árbol terminado en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="59fcb-112">Trees of objects can also be created programmatically by adding objects to designated collections of other objects, and property value inheritance works the same way in the finished tree at run time.</span></span>  
  
<a name="Practical_Applications_of_Property_Value_Inheritance"></a>
## <a name="practical-applications-of-property-value-inheritance"></a><span data-ttu-id="59fcb-113">Aplicaciones prácticas de la herencia de valores de propiedad</span><span class="sxs-lookup"><span data-stu-id="59fcb-113">Practical Applications of Property Value Inheritance</span></span>  
 <span data-ttu-id="59fcb-114">Las [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] API incluyen varias propiedades que tienen habilitada la herencia de propiedades.</span><span class="sxs-lookup"><span data-stu-id="59fcb-114">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs include several properties that have property inheritance enabled.</span></span> <span data-ttu-id="59fcb-115">Normalmente, el escenario en estos casos es que implican una propiedad donde es apropiado que se establezca la propiedad una sola vez por página, pero donde esa propiedad también es un miembro de una de las clases de elementos base y, por tanto, también existirá en la mayoría de los elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="59fcb-115">Typically, the scenario for these is that they involve a property where it is appropriate that the property be set only once per page, but where that property is also a member of one of the base element classes and thus would also exist on most of the child elements.</span></span> <span data-ttu-id="59fcb-116">Por ejemplo, <xref:System.Windows.FrameworkElement.FlowDirection%2A> la propiedad controla qué dirección fluyó el contenido debe presentarse y organizarse en la página.</span><span class="sxs-lookup"><span data-stu-id="59fcb-116">For example, the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property controls which direction flowed content should be presented and arranged on the page.</span></span> <span data-ttu-id="59fcb-117">Normalmente, quiere que el concepto de flujo de texto se controle de forma coherente en todos los elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="59fcb-117">Typically, you want the text flow concept to be handled consistently throughout all child elements.</span></span> <span data-ttu-id="59fcb-118">Si el usuario o una acción del entorno restableciera la dirección de flujo por alguna razón en algún nivel del árbol de elementos, normalmente, debería restablecerse en todo el árbol.</span><span class="sxs-lookup"><span data-stu-id="59fcb-118">If flow direction were for some reason reset in some level of the element tree by user or environment action, it should typically be reset throughout.</span></span> <span data-ttu-id="59fcb-119">Cuando <xref:System.Windows.FrameworkElement.FlowDirection%2A> se hace que la propiedad herede, el valor solo debe establecerse o restablecerse una vez en el nivel del árbol de elementos que abarca las necesidades de presentación de cada página de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="59fcb-119">When the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property is made to inherit, the value need only be set or reset once at the level in the element tree that encompasses the presentation needs of each page in the application.</span></span> <span data-ttu-id="59fcb-120">Incluso el valor predeterminado inicial se heredará de esta manera.</span><span class="sxs-lookup"><span data-stu-id="59fcb-120">Even the initial default value will inherit in this way.</span></span> <span data-ttu-id="59fcb-121">El modelo de herencia de valor de propiedad aún permite que elementos individuales restablezcan el valor para los pocos casos en los que tener una combinación de direcciones de flujo es deliberado.</span><span class="sxs-lookup"><span data-stu-id="59fcb-121">The property value inheritance model still enables individual elements to reset the value for the rare cases where having a mix of flow directions is intentional.</span></span>  
  
<a name="Making_a_Custom_Property_Inheritable"></a>
## <a name="making-a-custom-property-inheritable"></a><span data-ttu-id="59fcb-122">Hacer heredable una propiedad personalizada</span><span class="sxs-lookup"><span data-stu-id="59fcb-122">Making a Custom Property Inheritable</span></span>  
 <span data-ttu-id="59fcb-123">Al cambiar los metadatos de una propiedad personalizada, también puede hacer que sus propias propiedades personalizadas sean heredables.</span><span class="sxs-lookup"><span data-stu-id="59fcb-123">By changing a custom property's metadata, you can also make your own custom properties inheritable.</span></span> <span data-ttu-id="59fcb-124">Sin embargo, tenga en cuenta que designar una propiedad como heredable tiene algunas consideraciones de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="59fcb-124">Note, however, that designating a property as inheritable does have some performance considerations.</span></span> <span data-ttu-id="59fcb-125">En casos donde esa propiedad no tiene ningún valor local establecido o ningún valor obtenido a través de estilos, plantillas o enlaces de datos, una propiedad heredable proporciona sus valores de propiedad asignados a todos los elementos secundarios del árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="59fcb-125">In cases where that property does not have an established local value, or a value obtained through styles, templates, or data binding, an inheritable property provides its assigned property values to all child elements in the logical tree.</span></span>  
  
 <span data-ttu-id="59fcb-126">Para que una propiedad participe en la herencia de valores, cree una propiedad asociada personalizada, tal como se describe en [Registrar una propiedad asociada](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="59fcb-126">To make a property participate in value inheritance, create a custom attached property, as described in [Register an Attached Property](how-to-register-an-attached-property.md).</span></span> <span data-ttu-id="59fcb-127">Registre la propiedad<xref:System.Windows.FrameworkPropertyMetadata>con metadatos ( ) y especifique la opción "Inherits" en la configuración de opciones dentro de esos metadatos.</span><span class="sxs-lookup"><span data-stu-id="59fcb-127">Register the property with metadata (<xref:System.Windows.FrameworkPropertyMetadata>) and specify the "Inherits" option in the options settings within that metadata.</span></span> <span data-ttu-id="59fcb-128">Asegúrese también de que la propiedad tenga un valor predeterminado establecido, porque ahora se heredará ese valor.</span><span class="sxs-lookup"><span data-stu-id="59fcb-128">Also make sure that the property has an established default value, because that value will now inherit.</span></span> <span data-ttu-id="59fcb-129">Aunque registró la propiedad como asociada, es posible que también quiera crear una propiedad "wrapper" para obtener o establecer acceso al tipo de propietario, del mismo modo que para una propiedad de dependencia "nonattached".</span><span class="sxs-lookup"><span data-stu-id="59fcb-129">Although you registered the property as attached, you might also want to create a property "wrapper" for get/set access on the owner type, just as you would for an "nonattached" dependency property.</span></span> <span data-ttu-id="59fcb-130">Después de hacerlo, la propiedad heredable se puede establecer mediante el contenedor de propiedades directas en el tipo <xref:System.Windows.DependencyObject>de propietario o tipos derivados, o se puede establecer mediante la sintaxis de propiedad adjunta en cualquier archivo .</span><span class="sxs-lookup"><span data-stu-id="59fcb-130">After doing so, the inheritable property can either be set by using the direct property wrapper on the owner type or derived types, or it can be set by using the attached property syntax on any <xref:System.Windows.DependencyObject>.</span></span>  
  
 <span data-ttu-id="59fcb-131">Las propiedades adjuntas son conceptualmente similares a las propiedades globales; puede comprobar el valor <xref:System.Windows.DependencyObject> en cualquier y obtener un resultado válido.</span><span class="sxs-lookup"><span data-stu-id="59fcb-131">Attached properties are conceptually similar to global properties; you can check for the value on any <xref:System.Windows.DependencyObject> and get a valid result.</span></span> <span data-ttu-id="59fcb-132">El escenario típico de las propiedades adjuntas es establecer valores de propiedad en elementos secundarios y ese escenario es más eficaz<xref:System.Windows.DependencyObject>si la propiedad en cuestión es una propiedad adjunta que siempre está implícitamente presente como una propiedad adjunta en cada elemento ( ) en el árbol.</span><span class="sxs-lookup"><span data-stu-id="59fcb-132">The typical scenario for attached properties is to set property values on child elements, and that scenario is more effective if the property in question is an attached property that is always implicitly present as an attached property on each element (<xref:System.Windows.DependencyObject>) in the tree.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="59fcb-133">Aunque puede parecer que la herencia de valores de propiedad funciona para las propiedades de dependencia que no son asociadas, el comportamiento de la herencia para una propiedad no asociada a través de algunos límites de elementos en el árbol de tiempo de ejecución es indefinido.</span><span class="sxs-lookup"><span data-stu-id="59fcb-133">Although property value inheritance might appear to work for nonattached dependency properties, the inheritance behavior for a nonattached property through certain element boundaries in the run-time tree is undefined.</span></span> <span data-ttu-id="59fcb-134">Utilícelo <xref:System.Windows.DependencyProperty.RegisterAttached%2A> siempre para registrar <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> las propiedades donde especifique en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="59fcb-134">Always use <xref:System.Windows.DependencyProperty.RegisterAttached%2A> to register properties where you specify <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> in the metadata.</span></span>  
  
<a name="InheritanceContext"></a>
## <a name="inheriting-property-values-across-tree-boundaries"></a><span data-ttu-id="59fcb-135">Heredar valores de propiedad entre límites de árbol</span><span class="sxs-lookup"><span data-stu-id="59fcb-135">Inheriting Property Values Across Tree Boundaries</span></span>  
 <span data-ttu-id="59fcb-136">La herencia de propiedades funciona al recorrer un árbol de elementos.</span><span class="sxs-lookup"><span data-stu-id="59fcb-136">Property inheritance works by traversing a tree of elements.</span></span> <span data-ttu-id="59fcb-137">Este árbol suele ser paralelo al árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="59fcb-137">This tree is often parallel to the logical tree.</span></span> <span data-ttu-id="59fcb-138">Sin embargo, siempre que se incluye un WPFWPF objeto de <xref:System.Windows.Media.Brush>nivel principal en el marcado que define un árbol de elementos, como un , se ha creado un árbol lógico discontinuo.</span><span class="sxs-lookup"><span data-stu-id="59fcb-138">However, whenever you include a WPF core-level object in the markup that defines an element tree, such as a <xref:System.Windows.Media.Brush>, you have created a discontinuous logical tree.</span></span> <span data-ttu-id="59fcb-139">Un árbol lógico verdadero no se <xref:System.Windows.Media.Brush>extiende conceptualmente a través de la , porque el árbol lógico es un concepto de nivel de marco wpfWPF.</span><span class="sxs-lookup"><span data-stu-id="59fcb-139">A true logical tree does not conceptually extend through the <xref:System.Windows.Media.Brush>, because the logical tree is a WPF framework-level concept.</span></span> <span data-ttu-id="59fcb-140">Puede ver esto reflejado en los resultados <xref:System.Windows.LogicalTreeHelper>cuando se utilizan los métodos de .</span><span class="sxs-lookup"><span data-stu-id="59fcb-140">You can see this reflected in the results when using the methods of <xref:System.Windows.LogicalTreeHelper>.</span></span> <span data-ttu-id="59fcb-141">Sin embargo, la herencia de valores de propiedad puede salvar esta brecha en el árbol lógico y todavía puede pasar valores heredados, <xref:System.Windows.Controls.Frame>siempre y cuando la propiedad heredable se haya registrado como una propiedad adjunta y no se encuentre ningún límite de bloqueo de herencia deliberado (como un ).</span><span class="sxs-lookup"><span data-stu-id="59fcb-141">However, property value inheritance can bridge this gap in the logical tree and can still pass inherited values through, so long as the inheritable property was registered as an attached property and no deliberate inheritance-blocking boundary (such as a <xref:System.Windows.Controls.Frame>) is encountered.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="59fcb-142">Consulte también</span><span class="sxs-lookup"><span data-stu-id="59fcb-142">See also</span></span>

- [<span data-ttu-id="59fcb-143">Metadatos de las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="59fcb-143">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="59fcb-144">Información general sobre propiedades asociadas</span><span class="sxs-lookup"><span data-stu-id="59fcb-144">Attached Properties Overview</span></span>](attached-properties-overview.md)
- [<span data-ttu-id="59fcb-145">Precedencia del valor de la propiedad de dependencia</span><span class="sxs-lookup"><span data-stu-id="59fcb-145">Dependency Property Value Precedence</span></span>](dependency-property-value-precedence.md)
