---
title: REST y gRPC
description: Obtenga información sobre gRPC, su rol en aplicaciones nativas de la nube y cómo difiere de HTTP REST
author: robvet
ms.date: 09/08/2019
ms.openlocfilehash: f5725106b251a7e62ef74ea36a63c663e5db36de
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/28/2020
ms.locfileid: "76781067"
---
# <a name="rest-and-grpc"></a><span data-ttu-id="00bf8-103">REST y gRPC</span><span class="sxs-lookup"><span data-stu-id="00bf8-103">REST and gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="00bf8-104">Hasta ahora en este libro nos hemos centrado en la comunicación [basada en REST](https://docs.microsoft.com/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="00bf8-104">So far in this book, we’ve focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="00bf8-105">REST es un estilo arquitectónico que promueve la interoperabilidad entre sistemas de equipos distribuidos.</span><span class="sxs-lookup"><span data-stu-id="00bf8-105">REST is an architectural style that promotes interoperability between distributed computer systems.</span></span> <span data-ttu-id="00bf8-106">Usa un modelo de solicitud/respuesta en el que cada respuesta del servidor se refiere a una solicitud del cliente.</span><span class="sxs-lookup"><span data-stu-id="00bf8-106">It uses a request/response model where every response from the server is to a request from the client.</span></span> <span data-ttu-id="00bf8-107">Aunque es muy popular, REST no es una opción perfecta para cada problema.</span><span class="sxs-lookup"><span data-stu-id="00bf8-107">While widely popular, REST isn't a perfect fit for every problem.</span></span> <span data-ttu-id="00bf8-108">Una tecnología de comunicación más reciente, titulada gRPC, se obtiene rápidamente y se convierte en el mundo nativo de la nube.</span><span class="sxs-lookup"><span data-stu-id="00bf8-108">A newer communication technology, entitled gRPC, is rapidly gaining popularity and making its way into the cloud-native world.</span></span>

## <a name="grpc"></a><span data-ttu-id="00bf8-109">gRPC</span><span class="sxs-lookup"><span data-stu-id="00bf8-109">gRPC</span></span>

<span data-ttu-id="00bf8-110">gRPC es una comunicación de código abierto que se origina en Google.</span><span class="sxs-lookup"><span data-stu-id="00bf8-110">gRPC is an open-source communication that originates from Google.</span></span> <span data-ttu-id="00bf8-111">Se basa en el modelo de [llamada a procedimiento remoto (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) , popular en informática distribuida.</span><span class="sxs-lookup"><span data-stu-id="00bf8-111">It's built upon the [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) model, popular in distributed computing.</span></span> <span data-ttu-id="00bf8-112">Después de este modelo, un programa cliente local expone un método en proceso para ejecutar una operación.</span><span class="sxs-lookup"><span data-stu-id="00bf8-112">Following this model, a local client program exposes an in-process method to execute an operation.</span></span> <span data-ttu-id="00bf8-113">En segundo plano, esa llamada se invoca en un microservicio fuera de proceso a través de una red distribuida.</span><span class="sxs-lookup"><span data-stu-id="00bf8-113">Behind the scenes, that call is invoked on an out-of-process microservice across a distributed network.</span></span> <span data-ttu-id="00bf8-114">El desarrollador codifica la operación como una llamada a procedimiento local.</span><span class="sxs-lookup"><span data-stu-id="00bf8-114">The developer codes the operation as a local procedure call.</span></span> <span data-ttu-id="00bf8-115">La plataforma subyacente abstrae la comunicación de red punto a punto, la serialización y la ejecución.</span><span class="sxs-lookup"><span data-stu-id="00bf8-115">The underlying platform abstracts the point-to-point networking communication, serialization, and execution.</span></span>

<span data-ttu-id="00bf8-116">gRPC es un marco de RPC moderno que es ligero y de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="00bf8-116">gRPC is a modern RPC framework that is lightweight and highly performant.</span></span> <span data-ttu-id="00bf8-117">Utiliza HTTP/2 para su Protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="00bf8-117">It uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="00bf8-118">Aunque es compatible con HTTP 1,1, las características de HTTP/2 tienen muchas capacidades avanzadas:</span><span class="sxs-lookup"><span data-stu-id="00bf8-118">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="00bf8-119">Aunque HTTP 1,1 envía datos como texto sin cifrar, HTTP/2 es un protocolo binario.</span><span class="sxs-lookup"><span data-stu-id="00bf8-119">While HTTP 1.1 sends data as clear text, HTTP/2 is a binary protocol.</span></span> <span data-ttu-id="00bf8-120">Analiza los datos más rápidamente con menos memoria, reduce la latencia de red con las mejoras relacionadas con la velocidad y administra los recursos de red de forma más eficaz.</span><span class="sxs-lookup"><span data-stu-id="00bf8-120">It parses data faster using less memory, reduces network latency with the related improvements to speed, and manages network resources more efficiently.</span></span>
- <span data-ttu-id="00bf8-121">Aunque HTTP 1,1 está limitado a procesar una solicitud/respuesta de ida y vuelta a la vez, HTTP/2 admite la multiplexación o varias solicitudes paralelas a través de la misma conexión.</span><span class="sxs-lookup"><span data-stu-id="00bf8-121">While HTTP 1.1 is limited to processing one round-trip request/response at a time, HTTP/2 supports multiplexing, or multiple parallel requests over the same connection.</span></span>
- <span data-ttu-id="00bf8-122">HTTP/2 admite la comunicación dúplex completo o bidireccional, donde tanto el cliente como el servidor pueden comunicarse al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="00bf8-122">HTTP/2 supports full-duplex, or bidirectional communication, where both client and server can communicate at the same time.</span></span> <span data-ttu-id="00bf8-123">El cliente puede cargar datos de solicitud al mismo tiempo que el servidor envía datos de respuesta.</span><span class="sxs-lookup"><span data-stu-id="00bf8-123">The client can be uploading request data at the same time the server is sending back response data.</span></span>
- <span data-ttu-id="00bf8-124">El streaming está integrado en HTTP/2, lo que significa que las solicitudes y respuestas pueden transmitir de forma asincrónica conjuntos de datos grandes.</span><span class="sxs-lookup"><span data-stu-id="00bf8-124">Streaming is built into HTTP/2 meaning that both requests and responses can asynchronously stream large data sets.</span></span>
- <span data-ttu-id="00bf8-125">La combinación de gRPC y HTTP/2 aumenta considerablemente el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="00bf8-125">Combining gRPC and HTTP/2, performance dramatically increases.</span></span> <span data-ttu-id="00bf8-126">En el lenguaje de [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) , el rendimiento de gRPC cumple y supera la velocidad y eficacia de los [enlaces de NetTCP](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span><span class="sxs-lookup"><span data-stu-id="00bf8-126">In [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance meets and exceeds the speed and efficiency of [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="00bf8-127">Sin embargo, a diferencia de NetTCP, gRPC no está restringido a los lenguajes de Microsoft como C# o Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="00bf8-127">However, unlike NetTCP, gRPC isn't constrained to Microsoft languages such as C# or Visual Basic.</span></span>

<span data-ttu-id="00bf8-128">gRPC se admite en las plataformas más populares, como Java C#,, Golang y NodeJS.</span><span class="sxs-lookup"><span data-stu-id="00bf8-128">gRPC is supported across most popular platforms, including Java, C#, Golang, and NodeJS.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="00bf8-129">Búferes de protocolo</span><span class="sxs-lookup"><span data-stu-id="00bf8-129">Protocol Buffers</span></span>

<span data-ttu-id="00bf8-130">gRPC adopta otra tecnología de código abierto denominada [búferes de protocolo](https://developers.google.com/protocol-buffers/docs/overview) o mensajes protobuf para enviar y recibir datos.</span><span class="sxs-lookup"><span data-stu-id="00bf8-130">gRPC embraces another open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview) or Protobuf messages to send and receive data.</span></span> <span data-ttu-id="00bf8-131">De forma similar a un [contrato de datos de WCF](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), protobuf serializa los datos estructurados de lectura y escritura de los sistemas.</span><span class="sxs-lookup"><span data-stu-id="00bf8-131">Similar to a [WCF Data Contract](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), Protobuf serializes structured data for systems to read and write.</span></span> <span data-ttu-id="00bf8-132">Reduce la sobrecarga en la que incurren en formatos de lenguaje natural, como XML o JSON.</span><span class="sxs-lookup"><span data-stu-id="00bf8-132">It reduces the overhead that human-readable formats like XML or JSON incur.</span></span>

<span data-ttu-id="00bf8-133">Muchas técnicas de serialización de objetos reflejan en la estructura de objetos de datos en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="00bf8-133">Many object serialization techniques reflect across the structure of data objects at run-time.</span></span> <span data-ttu-id="00bf8-134">Protobuf requiere que defina la estructura por adelantado con un lenguaje independiente de la plataforma (lenguaje de búfer de protocolo).</span><span class="sxs-lookup"><span data-stu-id="00bf8-134">Protobuf requires you to define the structure up front with a platform-agnostic language (Protocol Buffer Language).</span></span> <span data-ttu-id="00bf8-135">Cada definición se almacena en un archivo ". proto".</span><span class="sxs-lookup"><span data-stu-id="00bf8-135">Each definition is stored in a ".proto" file.</span></span> <span data-ttu-id="00bf8-136">Después, mediante el compilador protobuf, "Proton", se genera código de cliente y servidor para cualquiera de las plataformas admitidas.</span><span class="sxs-lookup"><span data-stu-id="00bf8-136">Then using Protobuf compiler, "Proton," you generate client and server code for any of the supported platforms.</span></span> <span data-ttu-id="00bf8-137">El código generado está optimizado para la serialización o deserialización rápida de los datos.</span><span class="sxs-lookup"><span data-stu-id="00bf8-137">The generated code is optimized for fast serialization/deserialization of data.</span></span> <span data-ttu-id="00bf8-138">En tiempo de ejecución, cada mensaje se encapsula en el contrato de servicios fuertemente tipado y se serializa en una representación protobuf estándar.</span><span class="sxs-lookup"><span data-stu-id="00bf8-138">At runtime, each message is wrapped in the strongly-typed service contract and serialized in a standard Protobuf representation.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="00bf8-139">compatibilidad con gRPC en .NET</span><span class="sxs-lookup"><span data-stu-id="00bf8-139">gRPC support in .NET</span></span>

<span data-ttu-id="00bf8-140">El marco de Microsoft .NET Core 3,0 incluye herramientas y compatibilidad nativa con gRPC.</span><span class="sxs-lookup"><span data-stu-id="00bf8-140">The Microsoft .NET Core framework 3.0 includes tooling and native support for gRPC.</span></span> <span data-ttu-id="00bf8-141">En la figura 4-20 se muestra la plantilla de Visual Studio 2019 que scaffolding un proyecto de esqueleto de gRPC para un servicio de gRPC.</span><span class="sxs-lookup"><span data-stu-id="00bf8-141">Figure 4-20 shows the Visual Studio 2019 template that scaffolds a gRPC skeleton project for a gRPC service.</span></span> <span data-ttu-id="00bf8-142">Tenga en cuenta que .NET Core es compatible con las plataformas Windows, Linux y macOS.</span><span class="sxs-lookup"><span data-stu-id="00bf8-142">Note how .NET Core supports the Windows, Linux, and macOS platforms.</span></span>

![Compatibilidad con gRPC en Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="00bf8-144">**Figura 4-20**.</span><span class="sxs-lookup"><span data-stu-id="00bf8-144">**Figure 4-20**.</span></span> <span data-ttu-id="00bf8-145">compatibilidad con gRPC en Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="00bf8-145">gRPC support in Visual Studio 2019</span></span>

<span data-ttu-id="00bf8-146">.NET Core 3,0 integra ininterrumpidamente gRPC en su marco, incluido el enrutamiento del punto de conexión, la compatibilidad de IoC integrada y el registro.</span><span class="sxs-lookup"><span data-stu-id="00bf8-146">.NET Core 3.0 seamlessly integrates gRPC into its framework, including endpoint routing, built-in IoC support, and logging.</span></span> <span data-ttu-id="00bf8-147">El servidor Web Kestrel de código abierto es totalmente compatible con las conexiones HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="00bf8-147">The open-source Kestrel web server fully supports HTTP/2 connections.</span></span>

<span data-ttu-id="00bf8-148">En la figura 4-21 se muestra la estructura de un servicio gRPC en Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="00bf8-148">Figure 4-21 shows structure of a gRPC service in Visual Studio 2019.</span></span> <span data-ttu-id="00bf8-149">Tenga en cuenta que la estructura de carpetas incluye carpetas para los archivos proto y el código de servicio.</span><span class="sxs-lookup"><span data-stu-id="00bf8-149">Note how the folder structure includes folders for the proto files and service code.</span></span>

![proyecto gRPC en Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="00bf8-151">**Figura 4-21**.</span><span class="sxs-lookup"><span data-stu-id="00bf8-151">**Figure 4-21**.</span></span> <span data-ttu-id="00bf8-152">proyecto gRPC en Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="00bf8-152">gRPC project in Visual Studio 2019</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="00bf8-153">Uso de gRPC</span><span class="sxs-lookup"><span data-stu-id="00bf8-153">gRPC Usage</span></span>

<span data-ttu-id="00bf8-154">gRPC es adecuado para los escenarios siguientes:</span><span class="sxs-lookup"><span data-stu-id="00bf8-154">gRPC is well suited for the following scenarios:</span></span>

- <span data-ttu-id="00bf8-155">Baja latencia y comunicación de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="00bf8-155">Low latency and high throughput communication.</span></span> <span data-ttu-id="00bf8-156">gRPC es ideal para microservicios ligeros en los que la eficacia es crítica.</span><span class="sxs-lookup"><span data-stu-id="00bf8-156">gRPC is great for lightweight microservices where efficiency is critical.</span></span>
- <span data-ttu-id="00bf8-157">Comunicación en tiempo real punto a punto.</span><span class="sxs-lookup"><span data-stu-id="00bf8-157">Point-to-point real-time communication.</span></span> <span data-ttu-id="00bf8-158">gRPC tiene una excelente compatibilidad para el streaming bidireccional.</span><span class="sxs-lookup"><span data-stu-id="00bf8-158">gRPC has excellent support for bi-directional streaming.</span></span> <span data-ttu-id="00bf8-159">gRPC Services puede enviar mensajes en tiempo real sin sondeos.</span><span class="sxs-lookup"><span data-stu-id="00bf8-159">gRPC services can push messages in real time without polling.</span></span>
- <span data-ttu-id="00bf8-160">Entornos de Polyglot: las herramientas de gRPC admiten los lenguajes de desarrollo más populares, lo que lo convierte en una buena opción para entornos de varios idiomas.</span><span class="sxs-lookup"><span data-stu-id="00bf8-160">Polyglot environments – gRPC tooling supports most popular development languages, making it a good choice for multi-language environments.</span></span>
- <span data-ttu-id="00bf8-161">Entornos con restricción de red: los mensajes gRPC se serializan con protobuf, un formato de mensaje ligero.</span><span class="sxs-lookup"><span data-stu-id="00bf8-161">Network constrained environments – gRPC messages are serialized with Protobuf, a lightweight message format.</span></span> <span data-ttu-id="00bf8-162">Un mensaje de gRPC siempre es más pequeño que un mensaje JSON equivalente.</span><span class="sxs-lookup"><span data-stu-id="00bf8-162">A gRPC message is always smaller than an equivalent JSON message.</span></span>

<span data-ttu-id="00bf8-163">En el momento de redactar este libro, la mayoría de los exploradores tienen compatibilidad limitada para gRPC.</span><span class="sxs-lookup"><span data-stu-id="00bf8-163">At the time of writing of this book, most browsers have limited support for gRPC.</span></span> <span data-ttu-id="00bf8-164">gRPC usa intensamente características HTTP/2 y ningún explorador proporciona el nivel de control requerido a través de solicitudes web para admitir un cliente de gRPC.</span><span class="sxs-lookup"><span data-stu-id="00bf8-164">gRPC heavily uses HTTP/2 features and no browser provides the level of control required over web requests to support a gRPC client.</span></span> <span data-ttu-id="00bf8-165">gRPC se usa normalmente para microservicios internos para la comunicación de microservicios.</span><span class="sxs-lookup"><span data-stu-id="00bf8-165">gRPC is typically used for internal microservice to microservice communication.</span></span> <span data-ttu-id="00bf8-166">En la figura 4-22 se muestra un patrón de uso sencillo pero común.</span><span class="sxs-lookup"><span data-stu-id="00bf8-166">Figure 4-22 shows a simple, but common usage pattern.</span></span>

![Patrones de uso de gRPC](./media/grpc-usage.png)

<span data-ttu-id="00bf8-168">**Figura 4-22**.</span><span class="sxs-lookup"><span data-stu-id="00bf8-168">**Figure 4-22**.</span></span> <span data-ttu-id="00bf8-169">patrones de uso de gRPC</span><span class="sxs-lookup"><span data-stu-id="00bf8-169">gRPC usage patterns</span></span>

<span data-ttu-id="00bf8-170">Tenga en cuenta en la figura anterior cómo se invoca el tráfico front-end con HTTP mientras que el microservicio de back-end a microservicio usa gRPC.</span><span class="sxs-lookup"><span data-stu-id="00bf8-170">Note in the previous figure how front-end traffic is invoked with HTTP while back-end microservice to microservice uses gRPC.</span></span>

<span data-ttu-id="00bf8-171">En el futuro, gRPC podría desempeñar un papel importante en Dethroning la dominante de REST para sistemas nativos en la nube.</span><span class="sxs-lookup"><span data-stu-id="00bf8-171">Looking ahead, gRPC could play a major role in dethroning the dominance of REST for cloud-native systems.</span></span> <span data-ttu-id="00bf8-172">Los beneficios de rendimiento y la facilidad de desarrollo son demasiado buenos para pasarlos.</span><span class="sxs-lookup"><span data-stu-id="00bf8-172">The performance benefits and ease of development are too good to pass up.</span></span> <span data-ttu-id="00bf8-173">Sin embargo, no hay ningún error, el resto permanecerá en un período de tiempo prolongado.</span><span class="sxs-lookup"><span data-stu-id="00bf8-173">However, make no mistake, REST will still be around for a long time.</span></span> <span data-ttu-id="00bf8-174">Sigue siendo Excel para las API expuestas públicamente y por motivos de compatibilidad con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="00bf8-174">It still excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="00bf8-175">[Anterior](service-to-service-communication.md)
>[Siguiente](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="00bf8-175">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
