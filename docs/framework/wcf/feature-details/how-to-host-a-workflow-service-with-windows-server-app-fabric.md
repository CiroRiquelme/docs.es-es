---
title: 'Cómo: Hospedar un servicio de flujo de trabajo con Windows Server App Fabric'
ms.date: 03/30/2017
ms.assetid: 83b62cce-5fc2-4c6d-b27c-5742ba3bac73
ms.openlocfilehash: ecc7a954b2d88cdbcf934cc836e9ad6e3ef7ed52
ms.sourcegitcommit: c01c18755bb7b0f82c7232314ccf7955ea7834db
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/15/2020
ms.locfileid: "75964759"
---
# <a name="how-to-host-a-workflow-service-with-windows-server-app-fabric"></a><span data-ttu-id="810f4-102">Cómo: Hospedar un servicio de flujo de trabajo con Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="810f4-102">How to: Host a Workflow Service with Windows Server App Fabric</span></span>

<span data-ttu-id="810f4-103">Hospedar servicios de flujo de trabajo en App Fabric es parecido al hospedaje en IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="810f4-103">Hosting workflow services in App Fabric is similar to hosting under IIS/WAS.</span></span> <span data-ttu-id="810f4-104">Las herramientas que proporciona App Fabric para implementar, supervisar y administrar los servicios de flujo de trabajo son la única diferencia.</span><span class="sxs-lookup"><span data-stu-id="810f4-104">The only difference is the tools App Fabric provides for deploying, monitoring, and managing workflow services.</span></span> <span data-ttu-id="810f4-105">En este tema se usa el servicio de flujo de trabajo creado en el [servicio de flujo de trabajo de ejecución prolongada](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span><span class="sxs-lookup"><span data-stu-id="810f4-105">This topic uses the workflow service created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span></span> <span data-ttu-id="810f4-106">que le guiará por el proceso de creación de un servicio de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="810f4-106">That topic will walk you through creating a workflow service.</span></span> <span data-ttu-id="810f4-107">En este tema se explicará cómo hospedar el servicio de flujo de trabajo usando App Fabric.</span><span class="sxs-lookup"><span data-stu-id="810f4-107">This topic will explain how to host the workflow service using App Fabric.</span></span> <span data-ttu-id="810f4-108">Para obtener más información sobre Windows Server App fabric, consulte la [documentación de Windows Server App fabric](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-108">For more information about Windows Server App Fabric, see [Windows Server App Fabric Documentation](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span></span> <span data-ttu-id="810f4-109">Antes de completar los pasos siguientes asegúrese de que tiene instalado Windows Server App Fabric.</span><span class="sxs-lookup"><span data-stu-id="810f4-109">Before completing the steps below make sure you have Windows Server App Fabric installed.</span></span>  <span data-ttu-id="810f4-110">Para ello, abra Internet Information Services (inetmgr. exe), haga clic en el nombre del servidor en la vista **conexiones** , haga clic en sitios y, a continuación, haga clic en **sitio web predeterminado**.</span><span class="sxs-lookup"><span data-stu-id="810f4-110">To do this open up Internet Information Services (inetmgr.exe), click your server name in the **Connections** view, click Sites, and click **Default Web Site**.</span></span> <span data-ttu-id="810f4-111">En el lado derecho de la pantalla debería ver una sección denominada **App fabric**.</span><span class="sxs-lookup"><span data-stu-id="810f4-111">In the right-hand side of the screen you should see a section called **App Fabric**.</span></span> <span data-ttu-id="810f4-112">Si no ve esta sección (estará en la parte superior del panel derecho), no tiene App Fabric instalado.</span><span class="sxs-lookup"><span data-stu-id="810f4-112">If you don’t see this section (it will be on the top of the right-hand pane) you do not have App Fabric installed.</span></span> <span data-ttu-id="810f4-113">Para obtener más información sobre cómo instalar Windows Server App fabric, consulte [instalación de Windows Server App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-113">For more information about installing Windows Server App Fabric see [Installing Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10)).</span></span>  
  
### <a name="creating-a-simple-workflow-service"></a><span data-ttu-id="810f4-114">Crear un servicio de flujo de trabajo simple</span><span class="sxs-lookup"><span data-stu-id="810f4-114">Creating a Simple Workflow Service</span></span>  
  
1. <span data-ttu-id="810f4-115">Abra Visual Studio 2012 y cargue la solución OrderProcessing que creó en el tema [creación de un servicio de flujo de trabajo de ejecución prolongada](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) .</span><span class="sxs-lookup"><span data-stu-id="810f4-115">Open Visual Studio 2012 and load the OrderProcessing solution you created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) topic.</span></span>  
  
2. <span data-ttu-id="810f4-116">Haga clic con el botón derecho en el proyecto **OrderService** y seleccione **propiedades** y seleccione la pestaña **Web** .</span><span class="sxs-lookup"><span data-stu-id="810f4-116">Right click the **OrderService** project and select **Properties** and select the **Web** tab.</span></span>  
  
3. <span data-ttu-id="810f4-117">En la sección **acción de inicio** de la página de propiedades, seleccione **página específica** y escriba Service1. xamlx en el cuadro de edición.</span><span class="sxs-lookup"><span data-stu-id="810f4-117">In the **Start Action** section of the property page select **Specific Page** and type Service1.xamlx in the edit box.</span></span>  
  
4. <span data-ttu-id="810f4-118">En la sección **servidores** de la página de propiedades, seleccione **usar servidor Web de IIS local** y escriba la siguiente dirección URL: `http://localhost/OrderService`.</span><span class="sxs-lookup"><span data-stu-id="810f4-118">In the **Servers** section of the property page select **Use Local IIS Web Server** and type in the following URL: `http://localhost/OrderService`.</span></span>  
  
5. <span data-ttu-id="810f4-119">Haga clic en el botón **Crear directorio virtual** .</span><span class="sxs-lookup"><span data-stu-id="810f4-119">Click the **Create Virtual Directory** button.</span></span> <span data-ttu-id="810f4-120">De esta forma, se creará un nuevo directorio virtual y se configurará el proyecto para copiar los archivos necesarios en el directorio virtual cuando se compile el proyecto.</span><span class="sxs-lookup"><span data-stu-id="810f4-120">This will create a new virtual directory and set up the project to copy the needed files to the virtual directory when the project is built.</span></span>  <span data-ttu-id="810f4-121">O bien, podría copiar manualmente los archivos .xamlx y web.config, así como las DLL necesarias en el directorio virtual.</span><span class="sxs-lookup"><span data-stu-id="810f4-121">Alternatively you could manually copy the .xamlx, the web.config, and any needed DLLs to the virtual directory.</span></span>  
  
### <a name="configuring-a-workflow-service-hosted-in-windows-server-app-fabric"></a><span data-ttu-id="810f4-122">Configurar un servicio de flujo de trabajo hospedado en Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="810f4-122">Configuring a Workflow Service Hosted in Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="810f4-123">Abra el Administrador de Internet Information Services (inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="810f4-123">Open Internet Information Services Manager (inetmgr.exe).</span></span>  
  
2. <span data-ttu-id="810f4-124">Navegue hasta el directorio virtual OrderService en el panel **conexiones** .</span><span class="sxs-lookup"><span data-stu-id="810f4-124">Navigate to the OrderService virtual directory in the **Connections** pane.</span></span>  
  
3. <span data-ttu-id="810f4-125">Haga clic con el botón derecho en OrderService y seleccione **administrar servicios WCF y WF**, **configurar.** ...</span><span class="sxs-lookup"><span data-stu-id="810f4-125">Right click OrderService and select **Manage WCF and WF Services**, **Configure…**.</span></span> <span data-ttu-id="810f4-126">Se muestra el cuadro **de diálogo Configurar WCF y WF para la aplicación** .</span><span class="sxs-lookup"><span data-stu-id="810f4-126">The **Configure WCF and WF for Application** dialog box is displayed.</span></span>  
  
4. <span data-ttu-id="810f4-127">Seleccione la pestaña **General** para mostrar información general sobre la aplicación, tal como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-127">Select the **General** tab to display general information about the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="810f4-128">![Pestaña General del cuadro de diálogo de configuración de App fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-general")</span><span class="sxs-lookup"><span data-stu-id="810f4-128">![General tab of the App Fabric Configuration dialog](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-General")</span></span>  
  
5. <span data-ttu-id="810f4-129">Seleccione la pestaña **supervisión** . Esto muestra varios valores de supervisión, tal como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-129">Select the **Monitoring** tab. This shows various monitoring settings as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="810f4-130">![Pestaña supervisión de la configuración de App fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration: supervisión")</span><span class="sxs-lookup"><span data-stu-id="810f4-130">![App Fabric Configuration Monitoring tab](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-Monitoring")</span></span>  
  
     <span data-ttu-id="810f4-131">Para más información sobre cómo configurar la supervisión del servicio de flujo de trabajo en App fabric, consulte [configuración de la supervisión con App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677384(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-131">For more information about configuring workflow service monitoring in App Fabric see [Configuring monitoring with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677384(v=azure.10)).</span></span>  
  
6. <span data-ttu-id="810f4-132">Seleccione la pestaña **persistencia del flujo de trabajo** . Esto le permite configurar la aplicación para que use el proveedor de persistencia predeterminado de App fabric, tal como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-132">Select the **Workflow Persistence** tab. This allows you to configure your application to use App Fabric’s default persistence provider as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="810f4-133">![Persistencia de configuración &#45; de App fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration: persistencia")</span><span class="sxs-lookup"><span data-stu-id="810f4-133">![App Fabric Configuration &#45; Persistence](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-Persistence")</span></span>  
  
     <span data-ttu-id="810f4-134">Para obtener más información sobre la configuración de la persistencia del flujo de trabajo en Windows Server App fabric, consulte [configuración de la persistencia del flujo de trabajo en App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677353(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-134">For more information about configuring workflow persistence in Windows Server App Fabric see [Configuring Workflow Persistence in App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677353(v=azure.10)).</span></span>  
  
7. <span data-ttu-id="810f4-135">Seleccione la pestaña **Administración de host de flujo de trabajo** . Esto le permite especificar Cuándo se deben descargar y conservar las instancias de servicio de flujo de trabajo inactivas, tal y como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-135">Select the **Workflow Host Management** tab. This allows you to specify when idle workflow service instances should be unloaded and persisted as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="810f4-136">![Configuración de App fabric administración de host de flujo de trabajo](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "Administración de AppFabricConfiguration")</span><span class="sxs-lookup"><span data-stu-id="810f4-136">![App Fabric Configuration  Workflow Host Management](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-Management")</span></span>  
  
     <span data-ttu-id="810f4-137">Para más información sobre la configuración de administración de host de flujo de trabajo, consulte [configuración de administración de host de flujo de trabajo en App fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383424(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-137">For more information about workflow host management configuration see [Configuring Workflow Host Management in App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383424(v=azure.10)).</span></span>  
  
8. <span data-ttu-id="810f4-138">Seleccione la pestaña **Inicio automático** . Esto le permite especificar la configuración de inicio automático para los servicios de flujo de trabajo en la aplicación, tal como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-138">Select the **Auto-Start** tab. This allows you to specify auto-start settings for the workflow services in the application as shown in the following screenshot.</span></span>  
  
     ![Captura de pantalla que muestra la&#45;configuración de inicio automático de App fabric.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-auto-start-configuration.gif)  
  
     <span data-ttu-id="810f4-140">Para más información sobre cómo configurar el inicio automático, consulte [configuración del inicio automático con App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-140">For more information about configuring Auto-Start see [Configuring Auto-Start with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span></span>  
  
9. <span data-ttu-id="810f4-141">Seleccione la pestaña **limitación** . Esto le permite configurar los valores de limitación para el servicio de flujo de trabajo, tal como se muestra en la siguiente captura de pantalla.</span><span class="sxs-lookup"><span data-stu-id="810f4-141">Select the **Throttling** tab. This allows you to configure throttling settings for the workflow service as shown in the following screenshot.</span></span>  
  
     ![Captura de pantalla que muestra la configuración de limitación de App fabric.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-throttling-configuration.gif)  
  
     <span data-ttu-id="810f4-143">Para más información sobre la configuración de la limitación, consulte [configuración de la limitación con App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-143">For more information about configuring throttling see [Configuring Throttling with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span></span>  
  
10. <span data-ttu-id="810f4-144">Seleccione la pestaña **seguridad** . Esto le permite configurar opciones de seguridad para la aplicación, tal como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-144">Select the **Security** tab. This allows you to configure security settings for the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="810f4-145">![Configuración de seguridad de App fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-seguridad")</span><span class="sxs-lookup"><span data-stu-id="810f4-145">![App Fabric Security Configuration](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-Security")</span></span>  
  
     <span data-ttu-id="810f4-146">Para obtener más información sobre la configuración de la seguridad con Windows Server App fabric, consulte [configuración de la seguridad con App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677278(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="810f4-146">For more information about configuring security with Windows Server App Fabric see [Configuring Security with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677278(v=azure.10)).</span></span>  
  
### <a name="using-windows-server-app-fabric"></a><span data-ttu-id="810f4-147">Usar Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="810f4-147">Using Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="810f4-148">Compile la solución para copiar los archivos necesarios en el directorio virtual.</span><span class="sxs-lookup"><span data-stu-id="810f4-148">Build the solution to copy the necessary files to the virtual directory.</span></span>  
  
2. <span data-ttu-id="810f4-149">Haga clic con el botón derecho en el proyecto OrderClient y seleccione **depurar**, **Iniciar nueva instancia** para iniciar la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="810f4-149">Right click the OrderClient project and select **Debug**, **Start New Instance** to launch the client application.</span></span>  
  
3. <span data-ttu-id="810f4-150">El cliente se ejecutará y Visual Studio mostrará un cuadro de diálogo **adjuntar ADVERTENCIA de seguridad** , haga clic en el botón **no adjuntar** .</span><span class="sxs-lookup"><span data-stu-id="810f4-150">The client will run and Visual Studio will display an **Attach Security Warning** dialog box, click the **Don’t Attach** button.</span></span> <span data-ttu-id="810f4-151">De esta forma, se indica a Visual Studio que no se adjunte al proceso IIS para la depuración.</span><span class="sxs-lookup"><span data-stu-id="810f4-151">This tells Visual Studio to not attach to the IIS process for debugging.</span></span>  
  
4. <span data-ttu-id="810f4-152">La aplicación cliente inmediatamente llamará al servicio de flujo de trabajo y, a continuación, esperará.</span><span class="sxs-lookup"><span data-stu-id="810f4-152">The client application will immediately call the Workflow service and then wait.</span></span> <span data-ttu-id="810f4-153">El servicio de flujo de trabajo se quedará inactivo y se conservará.</span><span class="sxs-lookup"><span data-stu-id="810f4-153">The workflow service will go idle and be persisted.</span></span> <span data-ttu-id="810f4-154">Puede comprobarlo si inicia Internet Information Services (inetmgr.exe), navega a OrderService en el panel Conexiones y lo selecciona.</span><span class="sxs-lookup"><span data-stu-id="810f4-154">You can verify this by starting Internet Information Services (inetmgr.exe), navigating to the OrderService in the Connections pane and selecting it.</span></span> <span data-ttu-id="810f4-155">A continuación, haga clic en el icono Panel de AppFabric del panel derecho.</span><span class="sxs-lookup"><span data-stu-id="810f4-155">Next, click the App Fabric Dashboard icon in the right-hand pane.</span></span> <span data-ttu-id="810f4-156">En instancias de WF persistentes verá que hay una instancia de servicio de flujo de trabajo persistente, tal como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-156">Under Persisted WF Instances you will see there is one persisted workflow service instance as shown in the following screenshot.</span></span>  
  
     ![Captura de pantalla que muestra el panel de App fabric.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-dashboard.gif)  
  
     <span data-ttu-id="810f4-158">El **historial de instancias de WF** muestra información sobre el servicio de flujo de trabajo, como el número de activaciones de servicio de flujo de trabajo, el número de finalizaciones de instancias de servicio de flujo de trabajo y el número de instancias de flujo de trabajo con errores.</span><span class="sxs-lookup"><span data-stu-id="810f4-158">The **WF Instance History** lists information about the workflow service such as the number of workflow service activations, the number of workflow service instance completions, and the number of workflow instances with failures.</span></span> <span data-ttu-id="810f4-159">En instancias activas o inactivas, se mostrará un vínculo; al hacer clic en el vínculo se mostrará más información sobre las instancias de flujo de trabajo inactivas como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="810f4-159">Under Active or Idle instances a link will be displayed, clicking on the link will display more information about the idle workflow instances as shown in the following screenshot.</span></span>  
  
     ![Captura de pantalla que muestra los detalles de la instancia de flujo de trabajo persistente.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/persisted-workflow-instance-detail.gif)  
  
     <span data-ttu-id="810f4-161">Para obtener más información sobre las características de Windows Server App fabric y cómo usarlas, vea [características de hospedaje de Windows Server App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="810f4-161">For more information about Windows Server App Fabric features and how to use them see [Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="810f4-162">Vea también</span><span class="sxs-lookup"><span data-stu-id="810f4-162">See also</span></span>

- [<span data-ttu-id="810f4-163">Creación de un servicio de flujo de trabajo de larga ejecución</span><span class="sxs-lookup"><span data-stu-id="810f4-163">Creating a Long-running Workflow Service</span></span>](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md)
- <span data-ttu-id="810f4-164">[Características de hospedaje de Windows Server AppFabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="810f4-164">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
- <span data-ttu-id="810f4-165">[Instalación de Windows Server App fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="810f4-165">[Installing Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10))</span></span>
- <span data-ttu-id="810f4-166">[Documentación de Windows Server App fabric](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="810f4-166">[Windows Server App Fabric Documentation](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10))</span></span>
