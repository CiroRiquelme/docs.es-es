---
title: Información general sobre objetos Freezable
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Freezable objects [WPF], description
- unfreezing Freezable objects [WPF]
- classes [WPF], Freezable
ms.assetid: 89c71692-4f43-4057-b611-67c6a8a863a2
ms.openlocfilehash: b1887afd19407898d8de1d92252e29778899fb89
ms.sourcegitcommit: 011314e0c8eb4cf4a11d92078f58176c8c3efd2d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/09/2020
ms.locfileid: "77095195"
---
# <a name="freezable-objects-overview"></a><span data-ttu-id="fae93-102">Información general sobre objetos Freezable</span><span class="sxs-lookup"><span data-stu-id="fae93-102">Freezable Objects Overview</span></span>

<span data-ttu-id="fae93-103">En este tema se describe cómo usar y crear de forma eficaz objetos <xref:System.Windows.Freezable>, que proporcionan características especiales que pueden ayudar a mejorar el rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fae93-103">This topic describes how to effectively use and create <xref:System.Windows.Freezable> objects, which provide special features that can help improve application performance.</span></span> <span data-ttu-id="fae93-104">Los ejemplos de objetos Freezable incluyen pinceles, lápices, transformaciones, geometrías y animaciones.</span><span class="sxs-lookup"><span data-stu-id="fae93-104">Examples of freezable objects include brushes, pens, transformations, geometries, and animations.</span></span>

<a name="whatisafreezable"></a>

## <a name="what-is-a-freezable"></a><span data-ttu-id="fae93-105">¿Qué es un elemento Freezable?</span><span class="sxs-lookup"><span data-stu-id="fae93-105">What Is a Freezable?</span></span>

<span data-ttu-id="fae93-106">Un <xref:System.Windows.Freezable> es un tipo especial de objeto que tiene dos Estados: inmovilizado e inmovilizado.</span><span class="sxs-lookup"><span data-stu-id="fae93-106">A <xref:System.Windows.Freezable> is a special type of object that has two states: unfrozen and frozen.</span></span> <span data-ttu-id="fae93-107">Cuando se inmoviliza, un <xref:System.Windows.Freezable> parece comportarse como cualquier otro objeto.</span><span class="sxs-lookup"><span data-stu-id="fae93-107">When unfrozen, a <xref:System.Windows.Freezable> appears to behave like any other object.</span></span> <span data-ttu-id="fae93-108">Cuando se inmoviliza, ya no se puede modificar un <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="fae93-108">When frozen, a <xref:System.Windows.Freezable> can no longer be modified.</span></span>

<span data-ttu-id="fae93-109">Un <xref:System.Windows.Freezable> proporciona un evento <xref:System.Windows.Freezable.Changed> para notificar a los observadores de cualquier modificación del objeto.</span><span class="sxs-lookup"><span data-stu-id="fae93-109">A <xref:System.Windows.Freezable> provides a <xref:System.Windows.Freezable.Changed> event to notify observers of any modifications to the object.</span></span> <span data-ttu-id="fae93-110">La inmovilización de un <xref:System.Windows.Freezable> puede mejorar su rendimiento, ya que ya no es necesario dedicar recursos a las notificaciones de cambio.</span><span class="sxs-lookup"><span data-stu-id="fae93-110">Freezing a <xref:System.Windows.Freezable> can improve its performance, because it no longer needs to spend resources on change notifications.</span></span> <span data-ttu-id="fae93-111">Un <xref:System.Windows.Freezable> inmovilizado también puede compartirse entre subprocesos, mientras que un <xref:System.Windows.Freezable> inmovilizado no puede.</span><span class="sxs-lookup"><span data-stu-id="fae93-111">A frozen <xref:System.Windows.Freezable> can also be shared across threads, while an unfrozen <xref:System.Windows.Freezable> cannot.</span></span>

<span data-ttu-id="fae93-112">Aunque la clase <xref:System.Windows.Freezable> tiene muchas aplicaciones, la mayoría de los objetos <xref:System.Windows.Freezable> de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] están relacionados con el subsistema de gráficos.</span><span class="sxs-lookup"><span data-stu-id="fae93-112">Although the <xref:System.Windows.Freezable> class has many applications, most <xref:System.Windows.Freezable> objects in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] are related to the graphics sub-system.</span></span>

<span data-ttu-id="fae93-113">La clase <xref:System.Windows.Freezable> facilita el uso de determinados objetos del sistema de gráficos y puede ayudar a mejorar el rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fae93-113">The <xref:System.Windows.Freezable> class makes it easier to use certain graphics system objects and can help improve application performance.</span></span> <span data-ttu-id="fae93-114">Algunos ejemplos de tipos que heredan de <xref:System.Windows.Freezable> incluyen las clases <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>y <xref:System.Windows.Media.Geometry>.</span><span class="sxs-lookup"><span data-stu-id="fae93-114">Examples of types that inherit from <xref:System.Windows.Freezable> include the <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>, and <xref:System.Windows.Media.Geometry> classes.</span></span> <span data-ttu-id="fae93-115">Dado que contienen recursos no administrados, el sistema debe supervisar estos objetos para modificarlos y, a continuación, actualizar sus recursos no administrados correspondientes cuando se produce un cambio en el objeto original.</span><span class="sxs-lookup"><span data-stu-id="fae93-115">Because they contain unmanaged resources, the system must monitor these objects for modifications, and then update their corresponding unmanaged resources when there is a change to the original object.</span></span> <span data-ttu-id="fae93-116">Incluso si no modifica realmente un objeto del sistema de gráficos, el sistema debe seguir gastando algunos de sus recursos supervisando el objeto, en caso de que lo cambie.</span><span class="sxs-lookup"><span data-stu-id="fae93-116">Even if you don't actually modify a graphics system object, the system must still spend some of its resources monitoring the object, in case you do change it.</span></span>

<span data-ttu-id="fae93-117">Por ejemplo, supongamos que crea un pincel de <xref:System.Windows.Media.SolidColorBrush> y lo usa para pintar el fondo de un botón.</span><span class="sxs-lookup"><span data-stu-id="fae93-117">For example, suppose you create a <xref:System.Windows.Media.SolidColorBrush> brush and use it to paint the background of a button.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart1)]
[!code-vb[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart1)]

<span data-ttu-id="fae93-118">Cuando se representa el botón, el subsistema de gráficos [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] usa la información proporcionada para pintar un grupo de píxeles para crear el aspecto de un botón.</span><span class="sxs-lookup"><span data-stu-id="fae93-118">When the button is rendered, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] graphics sub-system uses the information you provided to paint a group of pixels to create the appearance of a button.</span></span> <span data-ttu-id="fae93-119">Aunque se ha usado un pincel de color sólido para describir cómo se debe pintar el botón, el pincel de color sólido no realiza realmente el dibujo.</span><span class="sxs-lookup"><span data-stu-id="fae93-119">Although you used a solid color brush to describe how the button should be painted, your solid color brush doesn't actually do the painting.</span></span> <span data-ttu-id="fae93-120">El sistema de gráficos genera objetos de bajo nivel rápidos para el botón y el pincel, y son los objetos que realmente aparecen en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="fae93-120">The graphics system generates fast, low-level objects for the button and the brush, and it is those objects that actually appear on the screen.</span></span>

<span data-ttu-id="fae93-121">Si tuviera que modificar el pincel, se tendrían que volver a generar los objetos de bajo nivel.</span><span class="sxs-lookup"><span data-stu-id="fae93-121">If you were to modify the brush, those low-level objects would have to be regenerated.</span></span> <span data-ttu-id="fae93-122">La clase Freezable es lo que proporciona a un pincel la capacidad de buscar sus objetos generados de bajo nivel correspondientes y actualizarlos cuando cambia.</span><span class="sxs-lookup"><span data-stu-id="fae93-122">The freezable class is what gives a brush the ability to find its corresponding generated, low-level objects and to update them when it changes.</span></span> <span data-ttu-id="fae93-123">Cuando esta capacidad está habilitada, se dice que el pincel está "inmovilizado".</span><span class="sxs-lookup"><span data-stu-id="fae93-123">When this ability is enabled, the brush is said to be "unfrozen."</span></span>

<span data-ttu-id="fae93-124">Un método <xref:System.Windows.Freezable.Freeze%2A> de Freezable permite deshabilitar esta capacidad de auto-actualización.</span><span class="sxs-lookup"><span data-stu-id="fae93-124">A freezable's <xref:System.Windows.Freezable.Freeze%2A> method enables you to disable this self-updating ability.</span></span> <span data-ttu-id="fae93-125">Puede usar este método para convertir el pincel en "inmovilizado" o no modificable.</span><span class="sxs-lookup"><span data-stu-id="fae93-125">You can use this method to make the brush become "frozen," or unmodifiable.</span></span>

> [!NOTE]
> <span data-ttu-id="fae93-126">No todos los objetos Freezable se pueden inmovilizar.</span><span class="sxs-lookup"><span data-stu-id="fae93-126">Not every Freezable object can be frozen.</span></span> <span data-ttu-id="fae93-127">Para evitar que se inicie una <xref:System.InvalidOperationException>, compruebe el valor de la propiedad <xref:System.Windows.Freezable.CanFreeze%2A> del objeto Freezable para determinar si se puede inmovilizar antes de intentar inmovilizarlo.</span><span class="sxs-lookup"><span data-stu-id="fae93-127">To avoid throwing an <xref:System.InvalidOperationException>, check the value of the Freezable object's <xref:System.Windows.Freezable.CanFreeze%2A> property to determine whether it can be frozen before attempting to freeze it.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart2)]
[!code-vb[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart2)]

<span data-ttu-id="fae93-128">Cuando ya no necesite modificar un Freezable, inmovilizarlo proporciona ventajas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="fae93-128">When you no longer need to modify a freezable, freezing it provides performance benefits.</span></span> <span data-ttu-id="fae93-129">Si fuera a inmovilizar el pincel en este ejemplo, el sistema de gráficos ya no necesitaría supervisarlo en busca de cambios.</span><span class="sxs-lookup"><span data-stu-id="fae93-129">If you were to freeze the brush in this example, the graphics system would no longer need to monitor it for changes.</span></span> <span data-ttu-id="fae93-130">El sistema de gráficos también puede crear otras optimizaciones, porque sabe que el pincel no cambiará.</span><span class="sxs-lookup"><span data-stu-id="fae93-130">The graphics system can also make other optimizations, because it knows the brush won't change.</span></span>

> [!NOTE]
> <span data-ttu-id="fae93-131">Para mayor comodidad, los objetos Freezable permanecen inmovilizados a menos que se inmovilizan explícitamente.</span><span class="sxs-lookup"><span data-stu-id="fae93-131">For convenience, freezable objects remain unfrozen unless you explicitly freeze them.</span></span>

<a name="frozenfreezables"></a>

## <a name="using-freezables"></a><span data-ttu-id="fae93-132">Usar elementos inmovilizables</span><span class="sxs-lookup"><span data-stu-id="fae93-132">Using Freezables</span></span>

<span data-ttu-id="fae93-133">El uso de un objeto Freezable inmovilizado es como usar cualquier otro tipo de objeto.</span><span class="sxs-lookup"><span data-stu-id="fae93-133">Using an unfrozen freezable is like using any other type of object.</span></span> <span data-ttu-id="fae93-134">En el ejemplo siguiente, el color de un <xref:System.Windows.Media.SolidColorBrush> se cambia de amarillo a rojo después de utilizarse para pintar el fondo de un botón.</span><span class="sxs-lookup"><span data-stu-id="fae93-134">In the following example, the color of a <xref:System.Windows.Media.SolidColorBrush> is changed from yellow to red after it's used to paint the background of a button.</span></span> <span data-ttu-id="fae93-135">El sistema de gráficos funciona en segundo plano para cambiar automáticamente el botón de amarillo a rojo la próxima vez que se actualice la pantalla.</span><span class="sxs-lookup"><span data-stu-id="fae93-135">The graphics system works behind the scenes to automatically change the button from yellow to red the next time the screen is refreshed.</span></span>

[!code-csharp[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#unfrozenexampleshort)]
[!code-vb[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#unfrozenexampleshort)]

### <a name="freezing-a-freezable"></a><span data-ttu-id="fae93-136">Inmovilizar un Freezable</span><span class="sxs-lookup"><span data-stu-id="fae93-136">Freezing a Freezable</span></span>

<span data-ttu-id="fae93-137">Para que un <xref:System.Windows.Freezable> sea no modificable, llame a su método <xref:System.Windows.Freezable.Freeze%2A>.</span><span class="sxs-lookup"><span data-stu-id="fae93-137">To make a <xref:System.Windows.Freezable> unmodifiable, you call its <xref:System.Windows.Freezable.Freeze%2A> method.</span></span> <span data-ttu-id="fae93-138">Al inmovilizar un objeto que contiene objetos Freezable, esos objetos también se inmovilizan.</span><span class="sxs-lookup"><span data-stu-id="fae93-138">When you freeze an object that contains freezable objects, those objects are frozen as well.</span></span> <span data-ttu-id="fae93-139">Por ejemplo, si inmoviliza un <xref:System.Windows.Media.PathGeometry>, las figuras y los segmentos que contiene también se bloquearán.</span><span class="sxs-lookup"><span data-stu-id="fae93-139">For example, if you freeze a <xref:System.Windows.Media.PathGeometry>, the figures and segments it contains would be frozen too.</span></span>

<span data-ttu-id="fae93-140">**No se puede** inmovilizar un Freezable si se cumple alguna de las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="fae93-140">A Freezable **can't** be frozen if any of the following are true:</span></span>

- <span data-ttu-id="fae93-141">Tiene propiedades animadas o enlazadas a datos.</span><span class="sxs-lookup"><span data-stu-id="fae93-141">It has animated or data bound properties.</span></span>

- <span data-ttu-id="fae93-142">Tiene las propiedades establecidas por un recurso dinámico.</span><span class="sxs-lookup"><span data-stu-id="fae93-142">It has properties set by a dynamic resource.</span></span> <span data-ttu-id="fae93-143">(Vea los [recursos XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md) para obtener más información acerca de los recursos dinámicos).</span><span class="sxs-lookup"><span data-stu-id="fae93-143">(See the [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md) for more information about dynamic resources.)</span></span>

- <span data-ttu-id="fae93-144">Contiene <xref:System.Windows.Freezable> subobjetos que no se pueden inmovilizar.</span><span class="sxs-lookup"><span data-stu-id="fae93-144">It contains <xref:System.Windows.Freezable> sub-objects that can't be frozen.</span></span>

<span data-ttu-id="fae93-145">Si estas condiciones son falsas y no pretende modificar el <xref:System.Windows.Freezable>, debe inmovilizarla para obtener las ventajas de rendimiento descritas anteriormente.</span><span class="sxs-lookup"><span data-stu-id="fae93-145">If these conditions are false, and you don't intend to modify the <xref:System.Windows.Freezable>, then you should freeze it to gain the performance benefits described earlier.</span></span>

<span data-ttu-id="fae93-146">Una vez que se llama al método <xref:System.Windows.Freezable.Freeze%2A> de un Freezable, ya no se puede modificar.</span><span class="sxs-lookup"><span data-stu-id="fae93-146">Once you call a freezable's <xref:System.Windows.Freezable.Freeze%2A> method, it can no longer be modified.</span></span> <span data-ttu-id="fae93-147">Si se intenta modificar un objeto inmovilizado, se produce una <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="fae93-147">Attempting to modify a frozen object causes an <xref:System.InvalidOperationException> to be thrown.</span></span> <span data-ttu-id="fae93-148">En el código siguiente se produce una excepción, ya que se intenta modificar el pincel una vez que se ha inmovilizado.</span><span class="sxs-lookup"><span data-stu-id="fae93-148">The following code throws an exception, because we attempt to modify the brush after it's been frozen.</span></span>

[!code-csharp[freezablesample_procedural#ExceptionExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#exceptionexample)]
[!code-vb[freezablesample_procedural#ExceptionExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#exceptionexample)]

<span data-ttu-id="fae93-149">Para evitar que se produzca esta excepción, puede utilizar el método <xref:System.Windows.Freezable.IsFrozen%2A> para determinar si un <xref:System.Windows.Freezable> está inmovilizado.</span><span class="sxs-lookup"><span data-stu-id="fae93-149">To avoid throwing this exception, you can use the <xref:System.Windows.Freezable.IsFrozen%2A> method to determine whether a <xref:System.Windows.Freezable> is frozen.</span></span>

[!code-csharp[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#checkisfrozenexample)]
[!code-vb[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#checkisfrozenexample)]

<span data-ttu-id="fae93-150">En el ejemplo de código anterior, se realizó una copia modificable de un objeto inmovilizado mediante el método <xref:System.Windows.Freezable.Clone%2A>.</span><span class="sxs-lookup"><span data-stu-id="fae93-150">In the preceding code example, a modifiable copy was made of a frozen object using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="fae93-151">En la sección siguiente se describe con más detalle la clonación.</span><span class="sxs-lookup"><span data-stu-id="fae93-151">The next section discusses cloning in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="fae93-152">Dado que no se puede animar un objeto Freezable inmovilizado, el sistema de animación creará automáticamente clones modificables de objetos <xref:System.Windows.Freezable> inmovilizados al intentar animarlos con un <xref:System.Windows.Media.Animation.Storyboard>.</span><span class="sxs-lookup"><span data-stu-id="fae93-152">Because a frozen freezable cannot be animated, the animation system will automatically create modifiable clones of frozen <xref:System.Windows.Freezable> objects when you try to animate them with a <xref:System.Windows.Media.Animation.Storyboard>.</span></span> <span data-ttu-id="fae93-153">Para eliminar la sobrecarga de rendimiento causada por la clonación, deje un objeto inmovilizado si tiene previsto animarlo.</span><span class="sxs-lookup"><span data-stu-id="fae93-153">To eliminate the performance overhead caused by cloning, leave an object unfrozen if you intend to animate it.</span></span> <span data-ttu-id="fae93-154">Para obtener más información sobre cómo animar con guiones gráficos, vea la [información general sobre los guiones gráficos](../graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fae93-154">For more information about animating with storyboards, see the [Storyboards Overview](../graphics-multimedia/storyboards-overview.md).</span></span>

### <a name="freezing-from-markup"></a><span data-ttu-id="fae93-155">Inmovilizar desde el marcado</span><span class="sxs-lookup"><span data-stu-id="fae93-155">Freezing from Markup</span></span>

<span data-ttu-id="fae93-156">Para inmovilizar un objeto <xref:System.Windows.Freezable> declarado en el marcado, se usa el atributo `PresentationOptions:Freeze`.</span><span class="sxs-lookup"><span data-stu-id="fae93-156">To freeze a <xref:System.Windows.Freezable> object declared in markup, you use the `PresentationOptions:Freeze` attribute.</span></span> <span data-ttu-id="fae93-157">En el ejemplo siguiente, un <xref:System.Windows.Media.SolidColorBrush> se declara como un recurso de página y se inmoviliza.</span><span class="sxs-lookup"><span data-stu-id="fae93-157">In the following example, a <xref:System.Windows.Media.SolidColorBrush> is declared as a page resource and frozen.</span></span> <span data-ttu-id="fae93-158">A continuación, se usa para establecer el fondo de un botón.</span><span class="sxs-lookup"><span data-stu-id="fae93-158">It is then used to set the background of a button.</span></span>

[!code-xaml[FreezableSample#FreezeFromMarkupWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/FreezableSample/CS/FreezeFromMarkupExample.xaml#freezefrommarkupwholepage)]

<span data-ttu-id="fae93-159">Para usar el atributo `Freeze`, debe asignar al espacio de nombres opciones de presentación: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span><span class="sxs-lookup"><span data-stu-id="fae93-159">To use the `Freeze` attribute, you must map to the presentation options namespace: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span></span> <span data-ttu-id="fae93-160">`PresentationOptions` es el prefijo recomendado para asignar este espacio de nombres:</span><span class="sxs-lookup"><span data-stu-id="fae93-160">`PresentationOptions` is the recommended prefix for mapping this namespace:</span></span>

```xaml
xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
```

<span data-ttu-id="fae93-161">Dado que no todos los lectores de XAML reconocen este atributo, se recomienda usar el [atributo MC: ignorable](mc-ignorable-attribute.md) para marcar el atributo de `Presentation:Freeze` como ignorable:</span><span class="sxs-lookup"><span data-stu-id="fae93-161">Because not all XAML readers recognize this attribute, it's recommended that you use the [mc:Ignorable Attribute](mc-ignorable-attribute.md) to mark the `Presentation:Freeze` attribute as ignorable:</span></span>

```xaml
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="PresentationOptions"
```

<span data-ttu-id="fae93-162">Para obtener más información, vea la página de [atributo MC: ignorable](mc-ignorable-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="fae93-162">For more information, see the [mc:Ignorable Attribute](mc-ignorable-attribute.md) page.</span></span>

### <a name="unfreezing-a-freezable"></a><span data-ttu-id="fae93-163">"Liberar" un Freezable</span><span class="sxs-lookup"><span data-stu-id="fae93-163">"Unfreezing" a Freezable</span></span>

<span data-ttu-id="fae93-164">Una vez inmovilizada, un <xref:System.Windows.Freezable> nunca se puede modificar ni inmovilizar; sin embargo, puede crear un clon inmovilizado mediante el método <xref:System.Windows.Freezable.Clone%2A> o <xref:System.Windows.Freezable.CloneCurrentValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="fae93-164">Once frozen, a <xref:System.Windows.Freezable> can never be modified or unfrozen; however, you can create an unfrozen clone using the <xref:System.Windows.Freezable.Clone%2A> or <xref:System.Windows.Freezable.CloneCurrentValue%2A> method.</span></span>

<span data-ttu-id="fae93-165">En el ejemplo siguiente, el fondo del botón se establece con un pincel y, a continuación, se inmoviliza el pincel.</span><span class="sxs-lookup"><span data-stu-id="fae93-165">In the following example, the button's background is set with a brush and that brush is then frozen.</span></span> <span data-ttu-id="fae93-166">Se realiza una copia inmovilizada del pincel con el método <xref:System.Windows.Freezable.Clone%2A>.</span><span class="sxs-lookup"><span data-stu-id="fae93-166">An unfrozen copy is made of the brush using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="fae93-167">El clon se modifica y se usa para cambiar el fondo del botón de amarillo a rojo.</span><span class="sxs-lookup"><span data-stu-id="fae93-167">The clone is modified and used to change the button's background from yellow to red.</span></span>

[!code-csharp[freezablesample_procedural#CloneExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#cloneexample)]
[!code-vb[freezablesample_procedural#CloneExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#cloneexample)]

> [!NOTE]
> <span data-ttu-id="fae93-168">Independientemente del método de clonación que use, las animaciones nunca se copian en la nueva <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="fae93-168">Regardless of which clone method you use, animations are never copied to the new <xref:System.Windows.Freezable>.</span></span>

<span data-ttu-id="fae93-169">Los métodos <xref:System.Windows.Freezable.Clone%2A> y <xref:System.Windows.Freezable.CloneCurrentValue%2A> generan copias en profundidad del Freezable.</span><span class="sxs-lookup"><span data-stu-id="fae93-169">The <xref:System.Windows.Freezable.Clone%2A> and <xref:System.Windows.Freezable.CloneCurrentValue%2A> methods produce deep copies of the freezable.</span></span> <span data-ttu-id="fae93-170">Si el objeto Freezable contiene otros objetos Freezable inmovilizados, también se clonan y se convierten en modificables.</span><span class="sxs-lookup"><span data-stu-id="fae93-170">If the freezable contains other frozen freezable objects, they are also cloned and made modifiable.</span></span> <span data-ttu-id="fae93-171">Por ejemplo, si clona una <xref:System.Windows.Media.PathGeometry> inmovilizada para convertirla en modificable, las figuras y los segmentos que contiene también se copian y se convierten en modificables.</span><span class="sxs-lookup"><span data-stu-id="fae93-171">For example, if you clone a frozen <xref:System.Windows.Media.PathGeometry> to make it modifiable, the figures and segments it contains are also copied and made modifiable.</span></span>

<a name="createyourownfreezableclass"></a>

## <a name="creating-your-own-freezable-class"></a><span data-ttu-id="fae93-172">Crear su propia clase Freezable</span><span class="sxs-lookup"><span data-stu-id="fae93-172">Creating Your Own Freezable Class</span></span>

<span data-ttu-id="fae93-173">Una clase que deriva de <xref:System.Windows.Freezable> obtiene las siguientes características.</span><span class="sxs-lookup"><span data-stu-id="fae93-173">A class that derives from <xref:System.Windows.Freezable> gains the following features.</span></span>

- <span data-ttu-id="fae93-174">Estados especiales: un estado de solo lectura (inmovilizado) y de escritura.</span><span class="sxs-lookup"><span data-stu-id="fae93-174">Special states: a read-only (frozen) and a writable state.</span></span>

- <span data-ttu-id="fae93-175">Seguridad para subprocesos: un <xref:System.Windows.Freezable> inmovilizado puede compartirse entre subprocesos.</span><span class="sxs-lookup"><span data-stu-id="fae93-175">Thread safety: a frozen <xref:System.Windows.Freezable> can be shared across threads.</span></span>

- <span data-ttu-id="fae93-176">Notificación de cambios detallada: a diferencia de otros <xref:System.Windows.DependencyObject>s, los objetos Freezable proporcionan notificaciones de cambios cuando cambian los valores de las subpropiedades.</span><span class="sxs-lookup"><span data-stu-id="fae93-176">Detailed change notification: Unlike other <xref:System.Windows.DependencyObject>s, Freezable objects provide change notifications when sub-property values change.</span></span>

- <span data-ttu-id="fae93-177">Clonación sencilla: la clase Freezable ya ha implementado varios métodos que producen clones profundos.</span><span class="sxs-lookup"><span data-stu-id="fae93-177">Easy cloning: the Freezable class has already implemented several methods that produce deep clones.</span></span>

<span data-ttu-id="fae93-178">Un <xref:System.Windows.Freezable> es un tipo de <xref:System.Windows.DependencyObject>y, por tanto, utiliza el sistema de propiedades de dependencia.</span><span class="sxs-lookup"><span data-stu-id="fae93-178">A <xref:System.Windows.Freezable> is a type of <xref:System.Windows.DependencyObject>, and therefore uses the dependency property system.</span></span> <span data-ttu-id="fae93-179">No es necesario que las propiedades de la clase sean propiedades de dependencia, pero el uso de propiedades de dependencia reduce la cantidad de código que se debe escribir, ya que la clase <xref:System.Windows.Freezable> se ha diseñado teniendo en cuenta las propiedades de dependencia.</span><span class="sxs-lookup"><span data-stu-id="fae93-179">Your class properties don't have to be dependency properties, but using dependency properties will reduce the amount of code you have to write, because the <xref:System.Windows.Freezable> class was designed with dependency properties in mind.</span></span> <span data-ttu-id="fae93-180">Para obtener más información sobre el sistema de propiedades de dependencia, consulte [información general sobre las propiedades de dependencia](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fae93-180">For more information about the dependency property system, see the [Dependency Properties Overview](dependency-properties-overview.md).</span></span>

<span data-ttu-id="fae93-181">Cada subclase <xref:System.Windows.Freezable> debe invalidar el método <xref:System.Windows.Freezable.CreateInstanceCore%2A>.</span><span class="sxs-lookup"><span data-stu-id="fae93-181">Every <xref:System.Windows.Freezable> subclass must override the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method.</span></span> <span data-ttu-id="fae93-182">Si la clase usa propiedades de dependencia para todos sus datos, ha terminado.</span><span class="sxs-lookup"><span data-stu-id="fae93-182">If your class uses dependency properties for all its data, you're finished.</span></span>

<span data-ttu-id="fae93-183">Si la clase contiene miembros de datos de propiedades que no son de dependencia, también debe invalidar los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="fae93-183">If your class contains non-dependency property data members, you must also override the following methods:</span></span>

- <xref:System.Windows.Freezable.CloneCore%2A>

- <xref:System.Windows.Freezable.CloneCurrentValueCore%2A>

- <xref:System.Windows.Freezable.GetAsFrozenCore%2A>

- <xref:System.Windows.Freezable.GetCurrentValueAsFrozenCore%2A>

- <xref:System.Windows.Freezable.FreezeCore%2A>

<span data-ttu-id="fae93-184">También debe observar las siguientes reglas para obtener acceso a los miembros de datos que no son propiedades de dependencia y escribir en ellos:</span><span class="sxs-lookup"><span data-stu-id="fae93-184">You must also observe the following rules for accessing and writing to data members that are not dependency properties:</span></span>

- <span data-ttu-id="fae93-185">Al principio de cualquier API que lea miembros de datos de propiedades que no son de dependencia, llame al método <xref:System.Windows.Freezable.ReadPreamble%2A>.</span><span class="sxs-lookup"><span data-stu-id="fae93-185">At the beginning of any API that reads non-dependency property data members, call the <xref:System.Windows.Freezable.ReadPreamble%2A> method.</span></span>

- <span data-ttu-id="fae93-186">Al principio de cualquier API que escriba miembros de datos de propiedades que no son de dependencia, llame al método <xref:System.Windows.Freezable.WritePreamble%2A>.</span><span class="sxs-lookup"><span data-stu-id="fae93-186">At the beginning of any API that writes non-dependency property data members, call the <xref:System.Windows.Freezable.WritePreamble%2A> method.</span></span> <span data-ttu-id="fae93-187">(Una vez que haya llamado <xref:System.Windows.Freezable.WritePreamble%2A> en una API, no es necesario que realice una llamada adicional a <xref:System.Windows.Freezable.ReadPreamble%2A> si también lee miembros de datos de propiedades que no son de dependencia).</span><span class="sxs-lookup"><span data-stu-id="fae93-187">(Once you've called <xref:System.Windows.Freezable.WritePreamble%2A> in an API, you don't need to make an additional call to <xref:System.Windows.Freezable.ReadPreamble%2A> if you also read non-dependency property data members.)</span></span>

- <span data-ttu-id="fae93-188">Llame al método <xref:System.Windows.Freezable.WritePostscript%2A> antes de salir de los métodos que escriben en los miembros de datos de propiedades que no son de dependencia.</span><span class="sxs-lookup"><span data-stu-id="fae93-188">Call the <xref:System.Windows.Freezable.WritePostscript%2A> method before exiting methods that write to non-dependency property data members.</span></span>

<span data-ttu-id="fae93-189">Si la clase contiene miembros de datos que no son de dependencia que se <xref:System.Windows.DependencyObject> objetos, también debe llamar al método <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> cada vez que cambie uno de sus valores, aunque esté estableciendo el miembro en `null`.</span><span class="sxs-lookup"><span data-stu-id="fae93-189">If your class contains non-dependency-property data members that are <xref:System.Windows.DependencyObject> objects, you must also call the <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> method each time you change one of their values, even if you're setting the member to `null`.</span></span>

> [!NOTE]
> <span data-ttu-id="fae93-190">Es muy importante que comience cada <xref:System.Windows.Freezable> método que invalide con una llamada a la implementación base.</span><span class="sxs-lookup"><span data-stu-id="fae93-190">It's very important that you begin each <xref:System.Windows.Freezable> method you override with a call to the base implementation.</span></span>

<span data-ttu-id="fae93-191">Para obtener un ejemplo de una clase de <xref:System.Windows.Freezable> personalizada, vea el [ejemplo de animación personalizada](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation).</span><span class="sxs-lookup"><span data-stu-id="fae93-191">For an example of a custom <xref:System.Windows.Freezable> class, see the [Custom Animation Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation).</span></span>

## <a name="see-also"></a><span data-ttu-id="fae93-192">Consulte también</span><span class="sxs-lookup"><span data-stu-id="fae93-192">See also</span></span>

- <xref:System.Windows.Freezable>
- [<span data-ttu-id="fae93-193">Ejemplo de animación personalizada</span><span class="sxs-lookup"><span data-stu-id="fae93-193">Custom Animation Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)
- [<span data-ttu-id="fae93-194">Información general sobre las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="fae93-194">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="fae93-195">Propiedades de dependencia personalizadas</span><span class="sxs-lookup"><span data-stu-id="fae93-195">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
