---
title: 'Cómo: establecer los encabezados en la solicitud de cliente (Data Services de WCF)'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, customizing requests
ms.assetid: 3d55168d-5901-4f48-8117-6c93da3ab5ae
ms.openlocfilehash: 9267f0e5b68823516764891a40e1435c1325b77f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/12/2020
ms.locfileid: "79174347"
---
# <a name="how-to-set-headers-in-the-client-request-wcf-data-services"></a><span data-ttu-id="720cf-102">Cómo: establecer los encabezados en la solicitud de cliente (Data Services de WCF)</span><span class="sxs-lookup"><span data-stu-id="720cf-102">How to: Set Headers in the Client Request (WCF Data Services)</span></span>
<span data-ttu-id="720cf-103">Cuando se usa la biblioteca de cliente de Servicios de datos de WCFWCF Data Services para tener acceso a un servicio de datos que admite el protocolo de datos abiertos (OData), la biblioteca de cliente establece automáticamente los encabezados HTTP necesarios en los mensajes de solicitud enviados al servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="720cf-103">When you use the WCF Data Services client library to access a data service that supports the Open Data Protocol (OData), the client library automatically sets the required HTTP headers in request messages sent to the data service.</span></span> <span data-ttu-id="720cf-104">Sin embargo, la biblioteca cliente no sabe establecer los encabezados de mensaje necesarios en ciertos casos, como cuando el servicio de datos necesita cookies o autenticación basada en notificaciones.</span><span class="sxs-lookup"><span data-stu-id="720cf-104">However, the client library does not know to set message headers that are required in certain cases, such as when the data service requires claims-based authentication or cookies.</span></span> <span data-ttu-id="720cf-105">Para obtener más información, consulta [Securing WCF Data Services](securing-wcf-data-services.md#clientAuthentication).</span><span class="sxs-lookup"><span data-stu-id="720cf-105">For more information, see [Securing WCF Data Services](securing-wcf-data-services.md#clientAuthentication).</span></span> <span data-ttu-id="720cf-106">En estos casos, debe establecer manualmente los encabezados de mensaje del mensaje de solicitud antes de enviarlo.</span><span class="sxs-lookup"><span data-stu-id="720cf-106">In these cases, you must manually set message headers in the request message before it is sent.</span></span> <span data-ttu-id="720cf-107">En el ejemplo de este tema se muestra cómo controla el evento <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> para agregar un nuevo encabezado al mensaje de solicitud antes de que se envíe al servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="720cf-107">The example in this topic shows how to handle the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event to add a new header to the request message before it is sent to the data service.</span></span>  
  
 <span data-ttu-id="720cf-108">En el ejemplo de este tema se usa el servicio de datos de ejemplo Northwind y las clases del servicio de datos de cliente generadas automáticamente.</span><span class="sxs-lookup"><span data-stu-id="720cf-108">The example in this topic uses the Northwind sample data service and autogenerated client data service classes.</span></span> <span data-ttu-id="720cf-109">Este servicio y las clases de datos de cliente se crean al completar la guía de inicio rápido de Servicios de [datos de WCF.](quickstart-wcf-data-services.md)</span><span class="sxs-lookup"><span data-stu-id="720cf-109">This service and the client data classes are created when you complete the [WCF Data Services quickstart](quickstart-wcf-data-services.md).</span></span> <span data-ttu-id="720cf-110">También puede usar el servicio de datos de [ejemplo Northwind](https://services.odata.org/Northwind/Northwind.svc/) que se publica en el sitio Web de OData; este servicio de datos de ejemplo es de solo lectura y al intentar guardar los cambios se devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="720cf-110">You can also use the [Northwind sample data service](https://services.odata.org/Northwind/Northwind.svc/) that is published on the OData Web site; this sample data service is read-only and attempting to save changes returns an error.</span></span> <span data-ttu-id="720cf-111">Los servicios de datos de ejemplo del sitio web de OData permiten la autenticación anónima.</span><span class="sxs-lookup"><span data-stu-id="720cf-111">The sample data services on the OData website allow anonymous authentication.</span></span>  
  
## <a name="example"></a><span data-ttu-id="720cf-112">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="720cf-112">Example</span></span>  
 <span data-ttu-id="720cf-113">En el siguiente ejemplo se registra un controlador del evento <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> y, a continuación, se ejecuta una consulta en el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="720cf-113">The following example registers a handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and then executes a query against the data service.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="720cf-114">Cuando un servicio de datos necesita que se establezca manualmente el encabezado del mensaje de todas las solicitudes, plantéese registrar el controlador del evento <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> mediante la invalidación del método parcial `OnContextCreated` del contenedor de entidades que represente el servicio de datos, que en este caso es `NorthwindEntities`.</span><span class="sxs-lookup"><span data-stu-id="720cf-114">When a data service requires you to manually set the message header for every request, consider registering the handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event by overriding the `OnContextCreated` partial method in the entity container that represents the data service, which in this case is `NorthwindEntities`.</span></span>  
  
[!code-csharp[Astoria Northwind Client#RegisterHeadersQuery](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#registerheadersquery)]
[!code-vb[Astoria Northwind Client#RegisterHeadersQuery](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#registerheadersquery)]
  
## <a name="example"></a><span data-ttu-id="720cf-115">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="720cf-115">Example</span></span>  
 <span data-ttu-id="720cf-116">El siguiente método controla el evento <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> y agrega un encabezado de autenticación a la solicitud.</span><span class="sxs-lookup"><span data-stu-id="720cf-116">The following method handles the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and adds an Authentication header to the request.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#OnSendingRequest](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#onsendingrequest)]  
 [!code-vb[Astoria Northwind Client#OnSendingRequest](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#onsendingrequest)]  
  
## <a name="see-also"></a><span data-ttu-id="720cf-117">Consulte también</span><span class="sxs-lookup"><span data-stu-id="720cf-117">See also</span></span>

- [<span data-ttu-id="720cf-118">Securing WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="720cf-118">Securing WCF Data Services</span></span>](securing-wcf-data-services.md)
- [<span data-ttu-id="720cf-119">Biblioteca cliente de Data Services de WCF</span><span class="sxs-lookup"><span data-stu-id="720cf-119">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
