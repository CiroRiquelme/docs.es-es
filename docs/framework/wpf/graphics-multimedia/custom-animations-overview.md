---
title: Información general sobre animaciones personalizadas
ms.date: 03/30/2017
helpviewer_keywords:
- custom classes [WPF], animation
- key frames [WPF], custom
- custom key frames [WPF]
- animation [WPF], custom classes
- custom animation classes [WPF]
ms.assetid: 9be69d50-3384-4938-886f-08ce00e4a7a6
ms.openlocfilehash: c5f315992e8ae37bc79602e6986d90e7af591fb2
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186547"
---
# <a name="custom-animations-overview"></a><span data-ttu-id="5d7f3-102">Información general sobre animaciones personalizadas</span><span class="sxs-lookup"><span data-stu-id="5d7f3-102">Custom Animations Overview</span></span>
<span data-ttu-id="5d7f3-103">En este tema se describe cómo y cuándo extender el sistema de animación de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] creando fotogramas clave personalizados o clases de animación, o utilizando la devolución de llamada por fotograma para omitirlo.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-103">This topic describes how and when to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system by creating custom key frames, animation classes, or by using per-frame callback to bypass it.</span></span>  
  
<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="5d7f3-104">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="5d7f3-104">Prerequisites</span></span>  
 <span data-ttu-id="5d7f3-105">Para entender este tema, debe estar familiarizado con los distintos tipos de animación proporcionados por [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5d7f3-105">To understand this topic, you should be familiar with the different types of animations provided by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="5d7f3-106">Para más información, consulte From/To/By Animations Overview (Información general sobre animaciones From/To/By), [Key-Frame Animations Overview](key-frame-animations-overview.md) (Información general sobre animaciones de fotogramas clave) e [Información general sobre animaciones en trazados](path-animations-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-106">For more information, see the From/To/By Animations Overview, the [Key-Frame Animations Overview](key-frame-animations-overview.md), and the [Path Animations Overview](path-animations-overview.md).</span></span>  
  
 <span data-ttu-id="5d7f3-107">Dado que las clases de animación heredan de la <xref:System.Windows.Freezable> clase, debe estar familiarizado con <xref:System.Windows.Freezable> los objetos y cómo heredar de <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-107">Because the animation classes inherit from the <xref:System.Windows.Freezable> class, you should be familiar with <xref:System.Windows.Freezable> objects and how to inherit from <xref:System.Windows.Freezable>.</span></span> <span data-ttu-id="5d7f3-108">Para más información, consulte [Freezable Objects Overview](../advanced/freezable-objects-overview.md) (Información general sobre objetos Freezable).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-108">For more information, see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md).</span></span>  
  
<a name="extendingtheanimationsystem"></a>
## <a name="extending-the-animation-system"></a><span data-ttu-id="5d7f3-109">Extender el sistema de animación</span><span class="sxs-lookup"><span data-stu-id="5d7f3-109">Extending the Animation System</span></span>  
 <span data-ttu-id="5d7f3-110">Hay varias maneras de extender el sistema de animación [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], dependiendo del nivel de funcionalidad integrada que se desee utilizar.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-110">There are a number of ways to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system, depending on the level of built-in functionality you want to use.</span></span>  <span data-ttu-id="5d7f3-111">Existen tres puntos principales de extensibilidad en el motor de animación [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="5d7f3-111">There are three primary extensibility points in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine:</span></span>  
  
- <span data-ttu-id="5d7f3-112">Cree un objeto de marco de clave \* \< \*personalizado heredando de una de las clases Type>KeyFrame, como <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-112">Create a custom key frame object by inheriting from one of the *\<Type>* KeyFrame classes, such as <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span></span> <span data-ttu-id="5d7f3-113">En este enfoque se utiliza la mayoría de la funcionalidad integrada del motor de animación de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5d7f3-113">This approach uses most of the built-in functionality of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine.</span></span>  
  
- <span data-ttu-id="5d7f3-114">Cree su propia clase de <xref:System.Windows.Media.Animation.AnimationTimeline> animación heredando de o una de las \* \< \*clases Type>AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-114">Create your own animation class by inheriting from <xref:System.Windows.Media.Animation.AnimationTimeline> or one of the *\<Type>* AnimationBase classes.</span></span>  
  
- <span data-ttu-id="5d7f3-115">Utilizar la devolución de llamada por fotograma para generar animaciones fotograma a fotograma.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-115">Use per-frame callback to generate animations on a per-frame basis.</span></span> <span data-ttu-id="5d7f3-116">En este enfoque se omite completamente el sistema de animación y control de tiempo.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-116">This approach completely bypasses the animation and timing system.</span></span>  
  
 <span data-ttu-id="5d7f3-117">En la tabla siguiente se describen algunos de los escenarios para extender el sistema de animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-117">The following table describes some the scenarios for extending the animation system.</span></span>  
  
|<span data-ttu-id="5d7f3-118">Si desea...</span><span class="sxs-lookup"><span data-stu-id="5d7f3-118">When you want to...</span></span>|<span data-ttu-id="5d7f3-119">Utilice este enfoque</span><span class="sxs-lookup"><span data-stu-id="5d7f3-119">Use this approach</span></span>|  
|-------------------------|-----------------------|  
|<span data-ttu-id="5d7f3-120">Personalizar la interpolación entre los valores de un tipo que tiene un \* \<tipo \*correspondiente>AnimationUsingKeyFrames</span><span class="sxs-lookup"><span data-stu-id="5d7f3-120">Customize the interpolation between values of a type that has a corresponding *\<Type>* AnimationUsingKeyFrames</span></span>|<span data-ttu-id="5d7f3-121">Crear un fotograma clave personalizado.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-121">Create a custom key frame.</span></span> <span data-ttu-id="5d7f3-122">Para más información, consulte la sección [Crear un fotograma clave personalizado](#createacustomkeyframe).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-122">For more information, see the [Create a Custom Key Frame](#createacustomkeyframe) section.</span></span>|  
|<span data-ttu-id="5d7f3-123">Personalice más que solo la interpolación entre los valores de un tipo que tenga un \* \<tipo>\* animación correspondiente.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-123">Customize more than just the interpolation between values of a type that has a corresponding *\<Type>* Animation.</span></span>|<span data-ttu-id="5d7f3-124">Cree una clase de animación \* \< \*personalizada que herede de la clase Type>AnimationBase que corresponda al tipo que desea animar.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-124">Create a custom animation class that inherits from the *\<Type>* AnimationBase class that corresponds to the type you want to animate.</span></span> <span data-ttu-id="5d7f3-125">Para más información, consulte la sección [Crear una clase de animación personalizada](#createacustomanimationtype).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-125">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="5d7f3-126">Animar un tipo que no tenga una animación de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] correspondiente</span><span class="sxs-lookup"><span data-stu-id="5d7f3-126">Animate a type that has no corresponding [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation</span></span>|<span data-ttu-id="5d7f3-127">Utilice <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> una clase o cree <xref:System.Windows.Media.Animation.AnimationTimeline>una clase que herede de .</span><span class="sxs-lookup"><span data-stu-id="5d7f3-127">Use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> or create a class that inherits from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="5d7f3-128">Para más información, consulte la sección [Crear una clase de animación personalizada](#createacustomanimationtype).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-128">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="5d7f3-129">Animar varios objetos con valores que se calculan para cada fotograma y se basan en el último conjunto de interacciones de objeto</span><span class="sxs-lookup"><span data-stu-id="5d7f3-129">Animate multiple objects with values that are computed each frame and are based on the last set of object interactions</span></span>|<span data-ttu-id="5d7f3-130">Utilizar la devolución de llamada por fotograma.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-130">Use per-frame callback.</span></span> <span data-ttu-id="5d7f3-131">Para más información, consulte la sección [Crear una devolución de llamada por fotograma](#useperframecallback).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-131">For more information, see the [Create a Use Per-Frame Callback](#useperframecallback) section.</span></span>|  
  
<a name="createacustomkeyframe"></a>
## <a name="create-a-custom-key-frame"></a><span data-ttu-id="5d7f3-132">Crear un fotograma clave personalizado</span><span class="sxs-lookup"><span data-stu-id="5d7f3-132">Create a Custom Key Frame</span></span>  
 <span data-ttu-id="5d7f3-133">Crear una clase de fotograma clave personalizado es la manera más simple de extender el sistema de animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-133">Creating a custom key frame class is the simplest way to extend the animation system.</span></span> <span data-ttu-id="5d7f3-134">Utilice este enfoque cuando desee utilizar un método de interpolación diferente para una animación de fotograma clave.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-134">Use this approach when you want to a different interpolation method for a key-frame animation.</span></span>  <span data-ttu-id="5d7f3-135">Como se describe en [Key-Frame Animations Overview](key-frame-animations-overview.md) (Información general sobre animaciones de fotogramas clave ), una animación de fotograma clave usa objetos de fotograma clave para generar sus valores de salida.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-135">As described in the [Key-Frame Animations Overview](key-frame-animations-overview.md), a key-frame animation uses key frame objects to generate its output values.</span></span> <span data-ttu-id="5d7f3-136">Cada objeto de fotograma clave realiza tres funciones:</span><span class="sxs-lookup"><span data-stu-id="5d7f3-136">Each key frame object performs three functions:</span></span>  
  
- <span data-ttu-id="5d7f3-137">Especifica un valor de <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> destino mediante su propiedad.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-137">Specifies a target value using its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
- <span data-ttu-id="5d7f3-138">Especifica la hora a la que se <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> debe alcanzar ese valor mediante su propiedad.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-138">Specifies the time at which that value should be reached using its <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> property.</span></span>  
  
- <span data-ttu-id="5d7f3-139">Interpola entre el valor del fotograma clave anterior y su propio valor implementando el método InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-139">Interpolates between the value of the previous key frame and its own value by implementing the InterpolateValueCore method.</span></span>  
  
 <span data-ttu-id="5d7f3-140">**Instrucciones de implementación**</span><span class="sxs-lookup"><span data-stu-id="5d7f3-140">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="5d7f3-141">Derive de \* \< \*la Type>KeyFrame clase abstracta e implemente el InterpolateValueCore método.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-141">Derive from the *\<Type>* KeyFrame abstract class and implement the InterpolateValueCore method.</span></span> <span data-ttu-id="5d7f3-142">El método InterpolateValueCore devuelve el valor actual del fotograma clave.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-142">The InterpolateValueCore method returns the current value of the key frame.</span></span> <span data-ttu-id="5d7f3-143">Acepta dos parámetros: el valor del fotograma clave anterior y un valor de progreso que oscila de 0 a 1.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-143">It takes two parameters: the value of the previous key frame and a progress value that ranges from 0 to 1.</span></span> <span data-ttu-id="5d7f3-144">Un progreso de 0 indica que el fotograma clave acaba de iniciarse y un valor de 1 indica <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> que el fotograma clave se acaba de completar y debe devolver el valor especificado por su propiedad.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-144">A progress of 0 indicates the key frame has just started, and a value of 1 indicates that the key frame has just completed and should return the value specified by its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
 <span data-ttu-id="5d7f3-145">Dado \* \< \*que el Type><xref:System.Windows.Freezable> KeyFrame clases <xref:System.Windows.Freezable.CreateInstanceCore%2A> heredan de la clase, también debe invalidar core para devolver una nueva instancia de la clase.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-145">Because the *\<Type>* KeyFrame classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="5d7f3-146">Si la clase no utiliza propiedades de dependencia para almacenar sus datos o requiere que se inicialice otra vez después de haberse creado, es posible que tenga que invalidar otros métodos; consulte [Freezable Objects Overview](../advanced/freezable-objects-overview.md) (Información general sobre objetos Freezable).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-146">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="5d7f3-147">Después de crear la animación personalizada \* \<Type>\* KeyFrame, puede usarla con \* \<el>De tipo \*AnimationUsingKeyFrames para ese tipo.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-147">After you've created your custom *\<Type>* KeyFrame animation, you can use it with the *\<Type>* AnimationUsingKeyFrames for that type.</span></span>  
  
<a name="createacustomanimationtype"></a>
## <a name="create-a-custom-animation-class"></a><span data-ttu-id="5d7f3-148">Crear una clase de animación personalizada</span><span class="sxs-lookup"><span data-stu-id="5d7f3-148">Create a Custom Animation Class</span></span>  
 <span data-ttu-id="5d7f3-149">Crear su propio tipo de animación le ofrece más control sobre cómo se anima un objeto.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-149">Creating your own animation type gives you more control over how an object in animated.</span></span> <span data-ttu-id="5d7f3-150">Hay dos formas recomendadas de crear su propio <xref:System.Windows.Media.Animation.AnimationTimeline> tipo de animación: puede derivar de la clase o \* \<el tipo>\* clase AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-150">There are two recommended ways to create your own animation type: you can derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class or the *\<Type>* AnimationBase class.</span></span> <span data-ttu-id="5d7f3-151">Derivado de \* \< *la Type>Animation o \* \<Type>* AnimationUsingKeyFrames clases no se recomienda.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-151">Deriving from the *\<Type>* Animation or *\<Type>* AnimationUsingKeyFrames classes is not recommended.</span></span>  
  
### <a name="derive-from-typeanimationbase"></a><span data-ttu-id="5d7f3-152">Derivar de \<Tipo>AnimationBase</span><span class="sxs-lookup"><span data-stu-id="5d7f3-152">Derive from \<Type>AnimationBase</span></span>  
 <span data-ttu-id="5d7f3-153">Derivado de \* \< \*un Type>AnimationBase clase es la forma más sencilla de crear un nuevo tipo de animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-153">Deriving from a *\<Type>* AnimationBase class is the simplest way to create a new animation type.</span></span> <span data-ttu-id="5d7f3-154">Utilice este enfoque cuando desee crear una nueva animación para el tipo que ya tiene un \* \<tipo \*correspondiente>clase AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-154">Use this approach when you want to create a new animation for type that already has a corresponding *\<Type>* AnimationBase class.</span></span>  
  
 <span data-ttu-id="5d7f3-155">**Instrucciones de implementación**</span><span class="sxs-lookup"><span data-stu-id="5d7f3-155">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="5d7f3-156">Derive de \* \< \*un Type>Animation clase e implemente el GetCurrentValueCore método.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-156">Derive from a *\<Type>* Animation class and implement the GetCurrentValueCore method.</span></span> <span data-ttu-id="5d7f3-157">El método GetCurrentValueCore devuelve el valor actual de la animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-157">The GetCurrentValueCore method returns the current value of the animation.</span></span> <span data-ttu-id="5d7f3-158">Toma tres parámetros: un valor inicial sugerido, <xref:System.Windows.Media.Animation.AnimationClock>un valor final sugerido y un , que se utiliza para determinar el progreso de la animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-158">It takes three parameters: a suggested starting value, a suggested ending value, and an <xref:System.Windows.Media.Animation.AnimationClock>, which you use to determine the progress of the animation.</span></span>  
  
 <span data-ttu-id="5d7f3-159">Dado \* \< \*que el Type><xref:System.Windows.Freezable> AnimationBase clases <xref:System.Windows.Freezable.CreateInstanceCore%2A> heredan de la clase, también debe invalidar core para devolver una nueva instancia de la clase.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-159">Because the *\<Type>* AnimationBase classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="5d7f3-160">Si la clase no utiliza propiedades de dependencia para almacenar sus datos o requiere que se inicialice otra vez después de haberse creado, es posible que tenga que invalidar otros métodos; consulte [Freezable Objects Overview](../advanced/freezable-objects-overview.md) (Información general sobre objetos Freezable).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-160">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="5d7f3-161">Para obtener más información, vea la documentación \* \< \*del método GetCurrentValueCore para la clase Type>AnimationBase para el tipo que desea animar.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-161">For more information, see the GetCurrentValueCore method documentation for the *\<Type>* AnimationBase class for the type that you want to animate.</span></span> <span data-ttu-id="5d7f3-162">Para ver un ejemplo, consulte el [ejemplo de animación personalizada](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)</span><span class="sxs-lookup"><span data-stu-id="5d7f3-162">For an example, see the [Custom Animation Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)</span></span>  
  
 <span data-ttu-id="5d7f3-163">**Enfoques alternativos**</span><span class="sxs-lookup"><span data-stu-id="5d7f3-163">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="5d7f3-164">Si simplemente desea cambiar la forma en que se interpolan los valores de animación, considere la posibilidad de derivar de una de las \* \<clases Type>\* KeyFrame.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-164">If you simply want to change how animation values are interpolated, considering deriving from one of the *\<Type>* KeyFrame classes.</span></span> <span data-ttu-id="5d7f3-165">El fotograma clave que cree se puede utilizar con el [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]>\* \<correspondiente \*AnimationUsingKeyFrames proporcionado por .</span><span class="sxs-lookup"><span data-stu-id="5d7f3-165">The key frame you create can be used with the corresponding *\<Type>* AnimationUsingKeyFrames provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="derive-from-animationtimeline"></a><span data-ttu-id="5d7f3-166">Derivar de AnimationTimeline</span><span class="sxs-lookup"><span data-stu-id="5d7f3-166">Derive from AnimationTimeline</span></span>  
 <span data-ttu-id="5d7f3-167">Derive de <xref:System.Windows.Media.Animation.AnimationTimeline> la clase cuando desee crear una animación para [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] un tipo que aún no tiene una animación coincidente o si desea crear una animación que no esté fuertemente tipada.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-167">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class when you want to create an animation for a type that doesn't already have a matching [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation, or you want to create an animation that is not strongly typed.</span></span>  
  
 <span data-ttu-id="5d7f3-168">**Instrucciones de implementación**</span><span class="sxs-lookup"><span data-stu-id="5d7f3-168">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="5d7f3-169">Derive de <xref:System.Windows.Media.Animation.AnimationTimeline> la clase e invalide los siguientes miembros:</span><span class="sxs-lookup"><span data-stu-id="5d7f3-169">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class and override the following members:</span></span>  
  
- <span data-ttu-id="5d7f3-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A>– Si la nueva clase es <xref:System.Windows.Freezable.CreateInstanceCore%2A> concreta, debe reemplazar para devolver una nueva instancia de la clase.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A> – If your new class is concrete, you must override <xref:System.Windows.Freezable.CreateInstanceCore%2A> to return a new instance of your class.</span></span>  
  
- <span data-ttu-id="5d7f3-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A>– Invalide este método para devolver el valor actual de la animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> – Override this method to return the current value of your animation.</span></span> <span data-ttu-id="5d7f3-172">Toma tres parámetros: un valor de origen predeterminado, un valor de destino predeterminado y un <xref:System.Windows.Media.Animation.AnimationClock>archivo .</span><span class="sxs-lookup"><span data-stu-id="5d7f3-172">It takes three parameters: a default origin value, a default destination value, and an <xref:System.Windows.Media.Animation.AnimationClock>.</span></span> <span data-ttu-id="5d7f3-173">Utilice <xref:System.Windows.Media.Animation.AnimationClock> el para obtener la hora actual o el progreso de la animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-173">Use the <xref:System.Windows.Media.Animation.AnimationClock> to obtain the current time or progress for the animation.</span></span> <span data-ttu-id="5d7f3-174">Puede elegir si desea usar los valores de origen y destino predeterminados.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-174">You can choose whether to use the default origin and destination values.</span></span>  
  
- <span data-ttu-id="5d7f3-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A>– Invalide esta propiedad para indicar si la animación utiliza el valor de destino predeterminado especificado por el <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> método.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> – Override this property to indicate whether your animation uses the default destination value specified by the <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> method.</span></span>  
  
- <span data-ttu-id="5d7f3-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A>– Invalide esta <xref:System.Type> propiedad para indicar la salida que produce la animación.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> – Override this property to indicate the <xref:System.Type> of output your animation produces.</span></span>  
  
 <span data-ttu-id="5d7f3-177">Si la clase no utiliza propiedades de dependencia para almacenar sus datos o requiere que se inicialice otra vez después de haberse creado, es posible que tenga que invalidar otros métodos; consulte [Freezable Objects Overview](../advanced/freezable-objects-overview.md) (Información general sobre objetos Freezable).</span><span class="sxs-lookup"><span data-stu-id="5d7f3-177">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="5d7f3-178">El paradigma recomendado (utilizado por las animaciones de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]) es usar dos niveles de herencia:</span><span class="sxs-lookup"><span data-stu-id="5d7f3-178">The recommended paradigm (used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animations) is to use two inheritance levels:</span></span>  
  
1. <span data-ttu-id="5d7f3-179">Cree un \* \<>\* abstracto Clase AnimationBase que derive de <xref:System.Windows.Media.Animation.AnimationTimeline>.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-179">Create an abstract *\<Type>* AnimationBase class that derives from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="5d7f3-180">Esta clase debe <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> invalidar el método.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-180">This class should override the <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> method.</span></span> <span data-ttu-id="5d7f3-181">También debe introducir un nuevo método abstracto, <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> GetCurrentValueCore, y reemplazar para que valide los tipos del valor de origen predeterminado y los parámetros de valor de destino predeterminados y, a continuación, llama a GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-181">It should also introduce a new abstract method, GetCurrentValueCore, and override <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> so that it validates the types of the default origin value and default destination value parameters, then calls GetCurrentValueCore.</span></span>  
  
2. <span data-ttu-id="5d7f3-182">Cree otra clase que herede de la nueva <xref:System.Windows.Freezable.CreateInstanceCore%2A> <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> \* \<clase Type>\* AnimationBase e invalide el método, el método GetCurrentValueCore que introdujo y la propiedad.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-182">Create another class that inherits from your new *\<Type>* AnimationBase class and overrides the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method, the GetCurrentValueCore method that you introduced, and the <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> property.</span></span>  
  
 <span data-ttu-id="5d7f3-183">**Enfoques alternativos**</span><span class="sxs-lookup"><span data-stu-id="5d7f3-183">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="5d7f3-184">Si desea animar un tipo que no tiene ninguna animación From/To/By <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>correspondiente o animación de fotograma clave, considere la posibilidad de utilizar un archivo .</span><span class="sxs-lookup"><span data-stu-id="5d7f3-184">If you want to animate a type that has no corresponding From/To/By animation or key-frame animation, consider using an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span></span> <span data-ttu-id="5d7f3-185">Dado que está débilmente <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> tipado, un puede animar cualquier tipo de valor.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-185">Because it is weakly typed, an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> can animate any type of value.</span></span> <span data-ttu-id="5d7f3-186">El inconveniente de este <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> enfoque es que solo admite la interpolación discreta.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-186">The drawback to this approach is that <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> only supports discrete interpolation.</span></span>  
  
<a name="useperframecallback"></a>
## <a name="use-per-frame-callback"></a><span data-ttu-id="5d7f3-187">Utilizar la devolución de llamada por fotograma</span><span class="sxs-lookup"><span data-stu-id="5d7f3-187">Use Per-Frame Callback</span></span>  
 <span data-ttu-id="5d7f3-188">Utilice este enfoque cuando necesite omitir completamente el sistema de animación de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5d7f3-188">Use this approach when you need to completely bypass the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system.</span></span> <span data-ttu-id="5d7f3-189">Un escenario para este enfoque son las animaciones físicas, en las cuales es preciso volver a calcular una nueva dirección o posición de los objetos animados en cada paso de la animación de acuerdo con el último conjunto de interacciones de objeto.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-189">One scenario for this approach is physics animations, where at each animation step a new direction or position of animated objects needs to be recomputed based on the  last set of object interactions.</span></span>  
  
 <span data-ttu-id="5d7f3-190">**Instrucciones de implementación**</span><span class="sxs-lookup"><span data-stu-id="5d7f3-190">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="5d7f3-191">Al contrario que los demás enfoques descritos en esta información general, para utilizar la devolución de llamada por fotograma no se necesita crear una clase personalizada de animación o de fotograma clave.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-191">Unlike the other approaches described in this overview, to use per-frame callback you don't need to create a custom animation or key frame class.</span></span>  
  
 <span data-ttu-id="5d7f3-192">En su lugar, <xref:System.Windows.Media.CompositionTarget.Rendering> se registra para el evento del objeto que contiene los objetos que desea animar.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-192">Instead, you register for the <xref:System.Windows.Media.CompositionTarget.Rendering> event of the object that contains the objects you want to animate.</span></span> <span data-ttu-id="5d7f3-193">Se llama a este método de control de eventos una vez por cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-193">This event handler method gets called once per frame.</span></span> <span data-ttu-id="5d7f3-194">Cada vez que [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] serializa los datos de representación conservados en el árbol visual hasta el árbol de composición, se llama a este método de control de eventos.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-194">Each time that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshals the persisted rendering data in the visual tree across to the composition tree, your event handler method is called.</span></span>  
  
 <span data-ttu-id="5d7f3-195">En el controlador de eventos, realice los cálculos necesarios para el efecto de animación y establezca las propiedades de los objetos que desea animar con estos valores.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-195">In your event handler, perform your whatever calculations necessary for your animation effect and set the properties of the objects you want to animate with these values.</span></span>  
  
 <span data-ttu-id="5d7f3-196">Para obtener el tiempo de presentación <xref:System.EventArgs> del fotograma actual, <xref:System.Windows.Media.RenderingEventArgs>el asociado <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> a este evento se puede convertir como , que proporcionan una propiedad que puede usar para obtener el tiempo de representación del fotograma actual.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-196">To obtain the presentation time of the current frame, the <xref:System.EventArgs> associated with this event can be cast as <xref:System.Windows.Media.RenderingEventArgs>, which provide a <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> property that you can use to obtain the current frame's rendering time.</span></span>  
  
 <span data-ttu-id="5d7f3-197">Para obtener más <xref:System.Windows.Media.CompositionTarget.Rendering> información, consulte la página.</span><span class="sxs-lookup"><span data-stu-id="5d7f3-197">For more information, see the <xref:System.Windows.Media.CompositionTarget.Rendering> page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5d7f3-198">Consulte también</span><span class="sxs-lookup"><span data-stu-id="5d7f3-198">See also</span></span>

- <xref:System.Windows.Media.Animation.AnimationTimeline>
- <xref:System.Windows.Media.Animation.IKeyFrame>
- [<span data-ttu-id="5d7f3-199">Información general sobre técnicas de animación de propiedades</span><span class="sxs-lookup"><span data-stu-id="5d7f3-199">Property Animation Techniques Overview</span></span>](property-animation-techniques-overview.md)
- <span data-ttu-id="5d7f3-200">[Freezable Objects Overview](../advanced/freezable-objects-overview.md) (Información general sobre objetos Freezable)</span><span class="sxs-lookup"><span data-stu-id="5d7f3-200">[Freezable Objects Overview](../advanced/freezable-objects-overview.md)</span></span>
- [<span data-ttu-id="5d7f3-201">Información general sobre animaciones de fotogramas clave</span><span class="sxs-lookup"><span data-stu-id="5d7f3-201">Key-Frame Animations Overview</span></span>](key-frame-animations-overview.md)
- [<span data-ttu-id="5d7f3-202">Información general sobre animaciones en trazados </span><span class="sxs-lookup"><span data-stu-id="5d7f3-202">Path Animations Overview</span></span>](path-animations-overview.md)
- [<span data-ttu-id="5d7f3-203">Información general sobre animaciones</span><span class="sxs-lookup"><span data-stu-id="5d7f3-203">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="5d7f3-204">Información general sobre sistemas de control de tiempo y animación</span><span class="sxs-lookup"><span data-stu-id="5d7f3-204">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="5d7f3-205">Ejemplo de animación personalizada</span><span class="sxs-lookup"><span data-stu-id="5d7f3-205">Custom Animation Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)
