---
title: 'Descripción de AssemblyLoadContext: .Net Core'
description: Conceptos clave para comprender la finalidad y el comportamiento de AssemblyLoadContext en .NET Core.
ms.date: 08/09/2019
author: sdmaclea
ms.author: stmaclea
ms.openlocfilehash: 43fb0d792ddeb20b8a141af452a86dd50f37ba43
ms.sourcegitcommit: 79b0dd8bfc63f33a02137121dd23475887ecefda
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/01/2020
ms.locfileid: "80523610"
---
# <a name="understanding-systemruntimeloaderassemblyloadcontext"></a><span data-ttu-id="c2573-103">Descripción de System.Runtime.Loader.AssemblyLoadContext</span><span class="sxs-lookup"><span data-stu-id="c2573-103">Understanding System.Runtime.Loader.AssemblyLoadContext</span></span>

<span data-ttu-id="c2573-104">La clase <xref:System.Runtime.Loader.AssemblyLoadContext> es única en .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c2573-104">The <xref:System.Runtime.Loader.AssemblyLoadContext> class is unique to .NET Core.</span></span> <span data-ttu-id="c2573-105">En este artículo se intenta complementar la documentación de la API <xref:System.Runtime.Loader.AssemblyLoadContext> con información conceptual.</span><span class="sxs-lookup"><span data-stu-id="c2573-105">This article attempts to supplement the <xref:System.Runtime.Loader.AssemblyLoadContext> API documentation with conceptual information.</span></span>

<span data-ttu-id="c2573-106">Este artículo es relevante para los desarrolladores que implementan carga dinámica, en particular los desarrolladores de marco de carga dinámica.</span><span class="sxs-lookup"><span data-stu-id="c2573-106">This article is relevant to developers implementing dynamic loading, especially dynamic loading framework developers.</span></span>

## <a name="what-is-the-assemblyloadcontext"></a><span data-ttu-id="c2573-107">¿Qué es AssemblyLoadContext?</span><span class="sxs-lookup"><span data-stu-id="c2573-107">What is the AssemblyLoadContext?</span></span>

<span data-ttu-id="c2573-108">Cada aplicación de .NET Core usa implícitamente <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="c2573-108">Every .NET Core application implicitly uses the <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>
<span data-ttu-id="c2573-109">Es el proveedor del runtime para buscar y cargar las dependencias.</span><span class="sxs-lookup"><span data-stu-id="c2573-109">It's the runtime's provider for locating and loading dependencies.</span></span> <span data-ttu-id="c2573-110">Cada vez que se carga una dependencia, se invoca una instancia de <xref:System.Runtime.Loader.AssemblyLoadContext> para buscarla.</span><span class="sxs-lookup"><span data-stu-id="c2573-110">Whenever a dependency is loaded, an <xref:System.Runtime.Loader.AssemblyLoadContext> instance is invoked to locate it.</span></span>

- <span data-ttu-id="c2573-111">Proporciona un servicio de búsqueda, carga y almacenamiento en caché de ensamblados administrados y otras dependencias.</span><span class="sxs-lookup"><span data-stu-id="c2573-111">It provides a service of locating, loading, and caching managed assemblies and other dependencies.</span></span>

- <span data-ttu-id="c2573-112">Para admitir la carga y descarga de código dinámico, crea un contexto aislado con el fin de cargar el código y sus dependencias en su propia instancia de <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="c2573-112">To support dynamic code loading and unloading, it creates an isolated context for loading code and its dependencies in their own <xref:System.Runtime.Loader.AssemblyLoadContext> instance.</span></span>

## <a name="when-do-you-need-multiple-assemblyloadcontext-instances"></a><span data-ttu-id="c2573-113">¿Cuándo necesita varias instancias de AssemblyLoadContext?</span><span class="sxs-lookup"><span data-stu-id="c2573-113">When do you need multiple AssemblyLoadContext instances?</span></span>

<span data-ttu-id="c2573-114">Una única instancia de <xref:System.Runtime.Loader.AssemblyLoadContext> se limita a cargar exactamente una versión de un elemento <xref:System.Reflection.Assembly> por nombre de ensamblado simple, <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2573-114">A single <xref:System.Runtime.Loader.AssemblyLoadContext> instance is limited to loading exactly one version of an <xref:System.Reflection.Assembly> per simple assembly name, <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="c2573-115">Esta restricción puede convertirse en un problema cuando se cargan módulos de código de forma dinámica.</span><span class="sxs-lookup"><span data-stu-id="c2573-115">This restriction can become a problem when loading code modules dynamically.</span></span> <span data-ttu-id="c2573-116">Cada módulo se compila de forma independiente y puede depender de distintas versiones de un elemento <xref:System.Reflection.Assembly>.</span><span class="sxs-lookup"><span data-stu-id="c2573-116">Each module is independently compiled and may depend on different versions of an <xref:System.Reflection.Assembly>.</span></span> <span data-ttu-id="c2573-117">Este problema se produce normalmente cuando distintos módulos dependen de versiones diferentes de una biblioteca usada habitualmente.</span><span class="sxs-lookup"><span data-stu-id="c2573-117">This problem commonly occurs when different modules depend on different versions of a commonly used library.</span></span>

<span data-ttu-id="c2573-118">Para admitir la carga de código de forma dinámica, la API <xref:System.Runtime.Loader.AssemblyLoadContext> proporciona versiones en conflicto de carga de un elemento <xref:System.Reflection.Assembly> en la misma aplicación.</span><span class="sxs-lookup"><span data-stu-id="c2573-118">To support dynamically loading code, the <xref:System.Runtime.Loader.AssemblyLoadContext> API provides for loading conflicting versions of an <xref:System.Reflection.Assembly> in the same application.</span></span> <span data-ttu-id="c2573-119">Cada instancia de <xref:System.Runtime.Loader.AssemblyLoadContext> proporciona un diccionario único que asigna cada <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> a una instancia de <xref:System.Reflection.Assembly> concreta.</span><span class="sxs-lookup"><span data-stu-id="c2573-119">Each <xref:System.Runtime.Loader.AssemblyLoadContext> instance provides a unique dictionary mapping each <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> to a specific <xref:System.Reflection.Assembly> instance.</span></span>

<span data-ttu-id="c2573-120">También proporciona un mecanismo práctico para agrupar las dependencias relacionadas con un módulo de código para su descarga posterior.</span><span class="sxs-lookup"><span data-stu-id="c2573-120">It also provides a convenient mechanism for grouping dependencies related to a code module for later unload.</span></span>

## <a name="what-is-special-about-the-assemblyloadcontextdefault-instance"></a><span data-ttu-id="c2573-121">¿Qué tiene de especial la instancia de AssemblyLoadContext.Default?</span><span class="sxs-lookup"><span data-stu-id="c2573-121">What is special about the AssemblyLoadContext.Default instance?</span></span>

<span data-ttu-id="c2573-122">La instancia de <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> la rellena automáticamente el runtime en el inicio.</span><span class="sxs-lookup"><span data-stu-id="c2573-122">The <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> instance is automatically populated by the runtime at startup.</span></span>  <span data-ttu-id="c2573-123">Utiliza el [sondeo predeterminado](default-probing.md) para buscar y encontrar todas las dependencias estáticas.</span><span class="sxs-lookup"><span data-stu-id="c2573-123">It uses [default probing](default-probing.md) to locate and find all static dependencies.</span></span>

<span data-ttu-id="c2573-124">Resuelve los escenarios de carga de dependencias más comunes.</span><span class="sxs-lookup"><span data-stu-id="c2573-124">It solves the most common dependency loading scenarios.</span></span>

## <a name="how-does-assemblyloadcontext-support-dynamic-dependencies"></a><span data-ttu-id="c2573-125">¿Cómo admite AssemblyLoadContext las dependencias dinámicas?</span><span class="sxs-lookup"><span data-stu-id="c2573-125">How does AssemblyLoadContext support dynamic dependencies?</span></span>

<span data-ttu-id="c2573-126"><xref:System.Runtime.Loader.AssemblyLoadContext> tiene varios eventos y funciones virtuales que se pueden invalidar.</span><span class="sxs-lookup"><span data-stu-id="c2573-126"><xref:System.Runtime.Loader.AssemblyLoadContext> has various events and virtual functions that can be overridden.</span></span>

<span data-ttu-id="c2573-127">La instancia de <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> solo admite la invalidación de los eventos.</span><span class="sxs-lookup"><span data-stu-id="c2573-127">The <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> instance only supports overriding the events.</span></span>

<span data-ttu-id="c2573-128">Los artículos [Algoritmo de carga de ensamblado administrado](loading-managed.md), [Algoritmo de carga de ensamblado satélite](loading-resources.md) y [Algoritmo de carga de biblioteca no administrada (nativa)](loading-unmanaged.md) hacen referencia a todos los eventos y funciones virtuales disponibles.</span><span class="sxs-lookup"><span data-stu-id="c2573-128">The articles [Managed assembly loading algorithm](loading-managed.md), [Satellite assembly loading algorithm](loading-resources.md), and [Unmanaged (native) library loading algorithm](loading-unmanaged.md) refer to all the available events and virtual functions.</span></span>  <span data-ttu-id="c2573-129">En los artículos se muestra la posición relativa de cada evento y función en los algoritmos de carga.</span><span class="sxs-lookup"><span data-stu-id="c2573-129">The articles show each event and function's relative position in the loading algorithms.</span></span> <span data-ttu-id="c2573-130">En este artículo no se reproduce esa información.</span><span class="sxs-lookup"><span data-stu-id="c2573-130">This article doesn't reproduce that information.</span></span>

<span data-ttu-id="c2573-131">En esta sección se tratan los principios generales de las funciones y eventos relevantes.</span><span class="sxs-lookup"><span data-stu-id="c2573-131">This section covers the general principles for the relevant events and functions.</span></span>

- <span data-ttu-id="c2573-132">**Ser reiterativo**.</span><span class="sxs-lookup"><span data-stu-id="c2573-132">**Be repeatable**.</span></span> <span data-ttu-id="c2573-133">Una consulta para una dependencia concreta siempre debe tener como resultado la misma respuesta.</span><span class="sxs-lookup"><span data-stu-id="c2573-133">A query for a specific dependency must always result in the same response.</span></span> <span data-ttu-id="c2573-134">Se debe devolver la misma instancia de dependencia cargada.</span><span class="sxs-lookup"><span data-stu-id="c2573-134">The same loaded dependency instance must be returned.</span></span> <span data-ttu-id="c2573-135">Este requisito es fundamental para la coherencia de la caché.</span><span class="sxs-lookup"><span data-stu-id="c2573-135">This requirement is fundamental  for cache consistency.</span></span> <span data-ttu-id="c2573-136">En el caso concreto de los ensamblados administrados, creamos una caché de <xref:System.Reflection.Assembly>.</span><span class="sxs-lookup"><span data-stu-id="c2573-136">For managed assemblies in particular, we're creating a <xref:System.Reflection.Assembly> cache.</span></span> <span data-ttu-id="c2573-137">La clave de caché es un nombre de ensamblado sencillo, <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2573-137">The cache key is a simple assembly name, <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="c2573-138">**Normalmente no se inician**.</span><span class="sxs-lookup"><span data-stu-id="c2573-138">**Typically don't throw**.</span></span>  <span data-ttu-id="c2573-139">Se espera que estas funciones devuelvan `null`, en lugar de iniciarse, cuando no se pueda encontrar la dependencia solicitada.</span><span class="sxs-lookup"><span data-stu-id="c2573-139">It's expected that these functions return `null` rather than throw when unable to find the requested dependency.</span></span> <span data-ttu-id="c2573-140">El inicio finalizará la búsqueda prematuramente y propagará una excepción al autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="c2573-140">Throwing will prematurely end the search and be propagate an exception to the caller.</span></span> <span data-ttu-id="c2573-141">El inicio se debe restringir a errores inesperados, como un ensamblado dañado o una condición de memoria insuficiente.</span><span class="sxs-lookup"><span data-stu-id="c2573-141">Throwing should be restricted to unexpected errors like a corrupted assembly or an out of memory condition.</span></span>
- <span data-ttu-id="c2573-142">**Evitar la recursividad**.</span><span class="sxs-lookup"><span data-stu-id="c2573-142">**Avoid recursion**.</span></span> <span data-ttu-id="c2573-143">Tenga en cuenta que estas funciones y controladores implementan las reglas de carga para buscar dependencias.</span><span class="sxs-lookup"><span data-stu-id="c2573-143">Be aware that these functions and handlers implement the loading rules for locating dependencies.</span></span> <span data-ttu-id="c2573-144">Su implementación no debe llamar a las API que desencadenan la recursividad.</span><span class="sxs-lookup"><span data-stu-id="c2573-144">Your implementation shouldn't call APIs that trigger recursion.</span></span> <span data-ttu-id="c2573-145">Normalmente, el código debería llamar a las funciones de carga **AssemblyLoadContext** que requieran una ruta de acceso concreta o un argumento de referencia de memoria.</span><span class="sxs-lookup"><span data-stu-id="c2573-145">Your code should typically call **AssemblyLoadContext** load functions that require a specific path or memory reference argument.</span></span>
- <span data-ttu-id="c2573-146">**Cargar en el elemento AssemblyLoadContext correcto**.</span><span class="sxs-lookup"><span data-stu-id="c2573-146">**Load into the correct AssemblyLoadContext**.</span></span> <span data-ttu-id="c2573-147">La elección de dónde cargar las dependencias es específica de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c2573-147">The choice of where to load dependencies is application-specific.</span></span>  <span data-ttu-id="c2573-148">Estos eventos y funciones implementan la opción.</span><span class="sxs-lookup"><span data-stu-id="c2573-148">The choice is implemented by these events and functions.</span></span> <span data-ttu-id="c2573-149">Cuando el código llama a las funciones de carga por ruta de acceso **AssemblyLoadContext**, les llama en la instancia en la que se quiere cargar el código.</span><span class="sxs-lookup"><span data-stu-id="c2573-149">When your code calls **AssemblyLoadContext** load-by-path functions call them on the instance where you want the code loaded.</span></span> <span data-ttu-id="c2573-150">En algún momento, devolver `null` y permitir que <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> controle la carga puede ser la opción más sencilla.</span><span class="sxs-lookup"><span data-stu-id="c2573-150">Sometime returning `null` and letting the <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> handle the load may be the simplest option.</span></span>
- <span data-ttu-id="c2573-151">**Tenga en cuenta las carreras de subprocesos**.</span><span class="sxs-lookup"><span data-stu-id="c2573-151">**Be aware of thread races**.</span></span> <span data-ttu-id="c2573-152">La carga la pueden desencadenar varios subprocesos.</span><span class="sxs-lookup"><span data-stu-id="c2573-152">Loading can be triggered by multiple threads.</span></span> <span data-ttu-id="c2573-153">AssemblyLoadContext controla las carreras de subprocesos mediante la adición atómica de ensamblados a su caché.</span><span class="sxs-lookup"><span data-stu-id="c2573-153">The AssemblyLoadContext handles thread races by atomically adding assemblies to its cache.</span></span> <span data-ttu-id="c2573-154">La instancia del que pierde la carrera se descarta.</span><span class="sxs-lookup"><span data-stu-id="c2573-154">The race loser's instance is discarded.</span></span> <span data-ttu-id="c2573-155">En la lógica de implementación, no agregue lógica adicional que no controle correctamente varios subprocesos.</span><span class="sxs-lookup"><span data-stu-id="c2573-155">In your implementation logic, don't add extra logic that doesn't handle multiple threads properly.</span></span>

## <a name="how-are-dynamic-dependencies-isolated"></a><span data-ttu-id="c2573-156">¿Cómo se aíslan las dependencias dinámicas?</span><span class="sxs-lookup"><span data-stu-id="c2573-156">How are dynamic dependencies isolated?</span></span>

<span data-ttu-id="c2573-157">Cada instancia de <xref:System.Runtime.Loader.AssemblyLoadContext> representa un ámbito único para instancias de <xref:System.Reflection.Assembly> y definiciones de <xref:System.Type>.</span><span class="sxs-lookup"><span data-stu-id="c2573-157">Each <xref:System.Runtime.Loader.AssemblyLoadContext> instance represents a unique scope for <xref:System.Reflection.Assembly> instances and <xref:System.Type> definitions.</span></span>

<span data-ttu-id="c2573-158">No existe aislamiento binario entre estas dependencias.</span><span class="sxs-lookup"><span data-stu-id="c2573-158">There's no binary isolation between these dependencies.</span></span> <span data-ttu-id="c2573-159">Solo están aisladas por no encontrarse entre sí por nombre.</span><span class="sxs-lookup"><span data-stu-id="c2573-159">They're only isolated by not finding each other by name.</span></span>

<span data-ttu-id="c2573-160">En cada <xref:System.Runtime.Loader.AssemblyLoadContext>:</span><span class="sxs-lookup"><span data-stu-id="c2573-160">In each <xref:System.Runtime.Loader.AssemblyLoadContext>:</span></span>

- <span data-ttu-id="c2573-161"><xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> puede hacer referencia a una instancia de <xref:System.Reflection.Assembly> distinta.</span><span class="sxs-lookup"><span data-stu-id="c2573-161"><xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> may refer to a different <xref:System.Reflection.Assembly> instance.</span></span>
- <span data-ttu-id="c2573-162"><xref:System.Type.GetType%2A?displayProperty=nameWithType> puede devolver una instancia de tipo distinta para el mismo tipo `name`.</span><span class="sxs-lookup"><span data-stu-id="c2573-162"><xref:System.Type.GetType%2A?displayProperty=nameWithType> may return a different type instance for the same type `name`.</span></span>

## <a name="how-are-dependencies-shared"></a><span data-ttu-id="c2573-163">¿Cómo se comparten las dependencias?</span><span class="sxs-lookup"><span data-stu-id="c2573-163">How are dependencies shared?</span></span>

<span data-ttu-id="c2573-164">Las dependencias se pueden compartir fácilmente entre instancias de <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="c2573-164">Dependencies can easily be shared between <xref:System.Runtime.Loader.AssemblyLoadContext> instances.</span></span> <span data-ttu-id="c2573-165">El modelo general es que un elemento <xref:System.Runtime.Loader.AssemblyLoadContext> cargue una dependencia.</span><span class="sxs-lookup"><span data-stu-id="c2573-165">The general model is for one <xref:System.Runtime.Loader.AssemblyLoadContext> to load a dependency.</span></span>  <span data-ttu-id="c2573-166">El otro comparte la dependencia mediante el uso de una referencia en el ensamblado cargado.</span><span class="sxs-lookup"><span data-stu-id="c2573-166">The other shares the dependency by using a reference to the loaded assembly.</span></span>

<span data-ttu-id="c2573-167">Este uso compartido es necesario para los ensamblados en runtime.</span><span class="sxs-lookup"><span data-stu-id="c2573-167">This sharing is required of the runtime assemblies.</span></span> <span data-ttu-id="c2573-168">Estos ensamblados solo se pueden cargar en <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2573-168">These assemblies can only be loaded into the <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c2573-169">Lo mismo se requiere en el caso de marcos como `ASP.NET`, `WPF` o `WinForms`.</span><span class="sxs-lookup"><span data-stu-id="c2573-169">The same is required for frameworks like `ASP.NET`, `WPF`, or `WinForms`.</span></span>

<span data-ttu-id="c2573-170">Se recomienda cargar las dependencias compartidas en <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2573-170">It's recommended that shared dependencies should be loaded into <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c2573-171">Este uso compartido es el modelo de diseño común.</span><span class="sxs-lookup"><span data-stu-id="c2573-171">This sharing is the common design pattern.</span></span>

<span data-ttu-id="c2573-172">El uso compartido se implementa en la codificación de la instancia de <xref:System.Runtime.Loader.AssemblyLoadContext> personalizada.</span><span class="sxs-lookup"><span data-stu-id="c2573-172">Sharing is implemented in the coding of the custom <xref:System.Runtime.Loader.AssemblyLoadContext> instance.</span></span> <span data-ttu-id="c2573-173"><xref:System.Runtime.Loader.AssemblyLoadContext> tiene varios eventos y funciones virtuales que se pueden invalidar.</span><span class="sxs-lookup"><span data-stu-id="c2573-173"><xref:System.Runtime.Loader.AssemblyLoadContext> has various events and virtual functions that can be overridden.</span></span> <span data-ttu-id="c2573-174">Cuando alguna de estas funciones devuelve una referencia a una instancia de <xref:System.Reflection.Assembly> que se ha cargado en otra instancia de <xref:System.Runtime.Loader.AssemblyLoadContext>, se comparte la instancia de <xref:System.Reflection.Assembly>.</span><span class="sxs-lookup"><span data-stu-id="c2573-174">When any of these functions return a reference to an <xref:System.Reflection.Assembly> instance that was loaded in another <xref:System.Runtime.Loader.AssemblyLoadContext> instance, the <xref:System.Reflection.Assembly> instance is shared.</span></span> <span data-ttu-id="c2573-175">El algoritmo de carga estándar se aplaza a <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> para cargar con el fin de simplificar el patrón común de uso compartido.</span><span class="sxs-lookup"><span data-stu-id="c2573-175">The standard load algorithm defers to <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> for loading to simplify the common sharing pattern.</span></span>  <span data-ttu-id="c2573-176">Consulte [Algoritmo de carga de ensamblado administrado](loading-managed.md).</span><span class="sxs-lookup"><span data-stu-id="c2573-176">See [Managed assembly loading algorithm](loading-managed.md).</span></span>

## <a name="complications"></a><span data-ttu-id="c2573-177">Complicaciones</span><span class="sxs-lookup"><span data-stu-id="c2573-177">Complications</span></span>

### <a name="type-conversion-issues"></a><span data-ttu-id="c2573-178">Incidencias de conversión de tipos</span><span class="sxs-lookup"><span data-stu-id="c2573-178">Type conversion issues</span></span>

<span data-ttu-id="c2573-179">Cuando dos instancias de <xref:System.Runtime.Loader.AssemblyLoadContext> contienen definiciones de tipo con el mismo `name`, no son del mismo tipo.</span><span class="sxs-lookup"><span data-stu-id="c2573-179">When two <xref:System.Runtime.Loader.AssemblyLoadContext> instances contain type definitions with the same `name`, they're not the same type.</span></span> <span data-ttu-id="c2573-180">Son del mismo tipo si y solo si proceden de la misma instancia de <xref:System.Reflection.Assembly>.</span><span class="sxs-lookup"><span data-stu-id="c2573-180">They're the same type if and only if they come from the same <xref:System.Reflection.Assembly> instance.</span></span>

<span data-ttu-id="c2573-181">Para complicar las cosas, los mensajes de excepción sobre estos tipos no coincidentes pueden ser confusos.</span><span class="sxs-lookup"><span data-stu-id="c2573-181">To complicate matters, exception messages about these mismatched types can be confusing.</span></span> <span data-ttu-id="c2573-182">Se hace referencia a los tipos en los mensajes de excepción por sus nombres de tipo simple.</span><span class="sxs-lookup"><span data-stu-id="c2573-182">The types are referred to in the exception messages by their simple type names.</span></span> <span data-ttu-id="c2573-183">En este caso, el mensaje de excepción común tendría el formato siguiente:</span><span class="sxs-lookup"><span data-stu-id="c2573-183">The common exception message in this case would be of the form:</span></span>

> <span data-ttu-id="c2573-184">El objeto de tipo "IsolatedType" no se puede convertir al tipo "IsolatedType".</span><span class="sxs-lookup"><span data-stu-id="c2573-184">Object of type 'IsolatedType' cannot be converted to type 'IsolatedType'.</span></span>

### <a name="debugging-type-conversion-issues"></a><span data-ttu-id="c2573-185">Depuración de incidencias de conversión de tipos</span><span class="sxs-lookup"><span data-stu-id="c2573-185">Debugging type conversion issues</span></span>

<span data-ttu-id="c2573-186">Dado un par de tipos no coincidentes, es importante conocer también lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="c2573-186">Given a pair of mismatched types it's important to also know:</span></span>

- <span data-ttu-id="c2573-187">El elemento <xref:System.Type.Assembly?displayProperty=nameWithType> de cada tipo.</span><span class="sxs-lookup"><span data-stu-id="c2573-187">Each type's <xref:System.Type.Assembly?displayProperty=nameWithType></span></span>
- <span data-ttu-id="c2573-188">El elemento <xref:System.Runtime.Loader.AssemblyLoadContext> de cada tipo., que se puede obtener a través de la función <xref:System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(System.Reflection.Assembly)?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2573-188">Each type's <xref:System.Runtime.Loader.AssemblyLoadContext>, which can be obtained via the <xref:System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(System.Reflection.Assembly)?displayProperty=nameWithType> function.</span></span>

<span data-ttu-id="c2573-189">Dado dos objetos `a` y `b`, la evaluación en el depurador de lo siguiente resultará útil:</span><span class="sxs-lookup"><span data-stu-id="c2573-189">Given two objects `a` and `b`, evaluating the following in the debugger will be helpful:</span></span>

```csharp
// In debugger look at each assembly's instance, Location, and FullName
a.GetType().Assembly
b.GetType().Assembly
// In debugger look at each AssemblyLoadContext's instance and name
System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(a.GetType().Assembly)
System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(b.GetType().Assembly)
```

### <a name="resolving-type-conversion-issues"></a><span data-ttu-id="c2573-190">Resolución de incidencias de conversión de tipos</span><span class="sxs-lookup"><span data-stu-id="c2573-190">Resolving type conversion issues</span></span>

<span data-ttu-id="c2573-191">Existen dos modelos de diseño para resolver estas incidencias de conversión de tipos.</span><span class="sxs-lookup"><span data-stu-id="c2573-191">There are two design patterns for solving these type conversion issues.</span></span>

1. <span data-ttu-id="c2573-192">Usar tipos comunes compartidos.</span><span class="sxs-lookup"><span data-stu-id="c2573-192">Use common shared types.</span></span> <span data-ttu-id="c2573-193">Este tipo compartido puede ser un tipo en runtime primitivo o puede implicar la creación de un nuevo tipo compartido en un ensamblado compartido.</span><span class="sxs-lookup"><span data-stu-id="c2573-193">This shared type can either be a primitive runtime type, or it can involve creating a new shared type in a shared assembly.</span></span>  <span data-ttu-id="c2573-194">A menudo, el tipo compartido es una [interfaz](../../csharp/language-reference/keywords/interface.md) definida en un ensamblado de aplicación.</span><span class="sxs-lookup"><span data-stu-id="c2573-194">Often the shared type is an [interface](../../csharp/language-reference/keywords/interface.md) defined in an application assembly.</span></span> <span data-ttu-id="c2573-195">Vea también: [¿Cómo se comparten las dependencias?](#how-are-dependencies-shared).</span><span class="sxs-lookup"><span data-stu-id="c2573-195">See also: [How are dependencies shared?](#how-are-dependencies-shared).</span></span>

2. <span data-ttu-id="c2573-196">Utilice técnicas de serialización para realizar la conversión de un tipo a otro.</span><span class="sxs-lookup"><span data-stu-id="c2573-196">Use marshaling techniques to convert from one type to another.</span></span>
